{"version":3,"sources":["kendo.editor.js"],"names":["f","define","kendo","UndoRedoStack","Observable","extend","init","options","fn","call","this","clear","events","push","command","stack","slice","currentCommandIndex","undo","canUndo","trigger","redo","canRedo","length","deepExtend","util","amd","a1","a2","a3","$","undefined","Tool","bomFill","emptyElementContent","emptyTableCellContent","window","Class","Widget","ui","os","support","mobileOS","browser","proxy","keys","SELECT","SELECT_OVERLAY_SELECTOR","PLACEHOLDER_CLASS","PLACEHOLDER_TAG_ID","REFRESH_INTERVAL","DEFAULT_LANGUAGE","ToolTemplate","getHtml","template","useWithBlock","EditorUtils","editorWrapperTemplate","buttonTemplate","tableWizardButtonTemplate","colorPickerTemplate","comboBoxTemplate","dropDownListTemplate","separatorTemplate","overflowAnchorTemplate","formatByName","name","format","i","inArray","tags","getToolCssClass","toolCssClassNames","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","import","indent","outdent","createLink","unlink","insertImage","insertFile","viewHtml","foreColor","backColor","createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn","tableWizard","tableWizardInsert","cleanFormatting","cssClass","registerTool","toolName","tool","toolOptions","toLowerCase","Editor","defaultTools","registerFormat","formatName","formats","cacheComments","content","comments","index","replace","retrieveComments","messages","bold","italic","underline","strikethrough","insertHtml","fontName","fontNameInherit","fontSize","fontSizeInherit","formatBlock","formatting","style","emptyFolder","editAreaTitle","uploadFile","overflowAnchor","orderBy","orderBySize","orderByName","invalidFileType","deleteFile","overwriteFile","directoryNotFound","imageWebAddress","imageAltText","imageWidth","imageHeight","fileWebAddress","fileTitle","fileText","linkWebAddress","linkText","linkToolTip","linkOpenInNewWindow","dialogUpdate","dialogInsert","dialogOk","dialogCancel","createTableHint","tableTab","cellTab","accessibilityTab","caption","summary","width","height","units","cellSpacing","cellPadding","cellMargin","alignment","background","id","border","borderStyle","collapseBorders","wrapText","associateCellsWithHeaders","alignLeft","alignCenter","alignRight","alignLeftTop","alignCenterTop","alignRightTop","alignLeftMiddle","alignCenterMiddle","alignRightMiddle","alignLeftBottom","alignCenterBottom","alignRightBottom","alignRemove","columns","rows","selectAllCells","exportAs","print","supportedBrowser","ios","flatVersion","document","documentElement","contentEditable","toolGroups","basic","lists","indenting","links","tables","element","value","toolbarContainer","toolbarOptions","type","domElement","that","editorNS","editor","dom","Dom","tools","_registerHandler","closest","update","_wrapTextarea","wrapper","find","attr","addClass","popup","insertBefore","toolbar","Toolbar","bindTo","setTimeout","heightStyle","expectedHeight","parseInt","actualHeight","indexOf","isNaN","_resizable","_initializeContentElement","keyboard","Keyboard","BackspaceHandler","TypingHandler","SystemHandler","SelectAllHandler","clipboard","Clipboard","undoRedoStack","textarea","encoded","trim","defaultValue","getAllComments","html","innerHTML","mousedown","_endTyping","mouseup","e","_mouseup","_initializeImmutables","resize","notify","setOptions","_initializePlaceholder","_togglePlaceholder","show","body","$body","placeholder","toggleClass","isTypingInProgress","endTyping","saveSelection","_selectionChange","_selectionStarted","draggableElement","resizableWidget","resizable","isResizable","isPlainObject","insertAfter","kendoResizable","start","currentTarget","initialSize","append","delta","y","initialDelta","newSize","min","max","Infinity","Math","resizeend","remove","getKendoResizable","draggable","ignore","_initializeTableResizing","TableResizing","create","_showTableResizeHandlesProxy","_showTableResizeHandles","bind","_destroyTableResizing","tableResizing","destroy","unbind","showResizeHandles","_initializeColumnResizing","ColumnResizing","_destroyColumnResizing","columnResizing","_initializeRowResizing","RowResizing","_destroyRowResizing","rowResizing","w","h","editorWrap","editArea","appendTo","css","_createContentElement","stylesheets","iframe","wnd","doc","specifiedDomain","domain","domainScript","src","lang","hide","title","frameBorder","tabIndex","location","hostname","contentWindow","contentDocument","one","decorateFrom","getElementsByTagName","getAttribute","open","write","isRtl","map","href","join","close","_blur","old","val","_oldValue","encodedValue","_spellCorrect","beforeCorrection","falseTrigger","contextmenu","_spellCorrectTimeout","RestorePoint","getRange","input","mozilla","_finishUpdate","handler","eventNames","t","NS","_handlers","hasOwnProperty","applyEventMap","split","on","_deregisterHandlers","handlers","off","blurTrigger","mousedownTrigger","interval","createElement","setAttribute","appendChild","setInterval","clearInterval","_mousedown","execCommand","touch","keydown","_activeElement","focus","range","left","container","offset","direction","next","nextChar","keyCode","BACKSPACE","DELETE","F10","preventPopupHide","preventDefault","LEFT","RIGHT","nodeType","nodeValue","setStart","collapse","selectRange","toolFromShortcut","keyPressCommand","test","exec","_runPostContentKeyCommands","clearTimeout","keypress","keyup","selectionCodes","TAB","PAGEUP","PAGEDOWN","END","HOME","UP","DOWN","INSERT","ctrlKey","altKey","shiftKey","_refreshInterval","click","target","createRange","selectNode","cut copy paste drop dragover","focusin","hasAttribute","focusout","toolbarContainerElement","active","get","contains","is","focused","removeClass","$head","head","immutables","Immutables","parents","stopPropagation","gecko","which","tagName","o","cmd","toolsFromShortcut","changesContent","refresh","_destroyResizings","deserialization","custom","serialization","entities","semantic","scripts","pasteCleanup","all","keepNewLines","msAllFormatting","msConvertLists","msTags","none","span","dialogOptions","modal","animation","imageBrowser","fileBrowser","text","concat","_focusOutside","_destroyUploadWidget","dispose","msie","tempInput","blur","_uploadWidget","state","textNodes","finder","RangeUtils","collapsed","startContainer","getFormat","isFormatted","currentHtml","Serializer","domToXhtml","htmlToDom","selectionRestorePoint","refreshTools","commonAncestorContainer","_focusBody","scrollTop","activeElement","scrollHeight","clientHeight","restoreSelection","toRange","encode","getSelection","SelectionUtils","selectionFromDocument","selection","removeAllRanges","addRange","rangeCount","getRangeAt","endContainer","startOffset","endOffset","_containsRange","isAncestorOrSelf","_deleteSavedRange","_range","selectedHtml","cloneContents","paste","InsertHtmlCommand","params","prevented","Error","toolById","async","change","managesUndoRedo","key","ctrl","plugin","initialize","unselectable","aria-label","commandArguments","noop","version","edge","_bomFill","PDFMixin","prototype","_drawPDF","drawing","drawDOM","pdf","saveAsPDF","progress","Deferred","promise","args","then","root","exportPDF","done","dataURI","saveAs","fileName","proxyURL","proxyTarget","forceProxy","resolve","fail","err","reject","jQuery","makeMap","items","len","obj","whitespace","emptyspace","rgb","bom","whitespaceOrBom","persistedScrollTop","cssAttributes","htmlRe","entityRe","entityTable","STYLE","FLOAT","CSSFLOAT","STYLEFLOAT","CLASS","KMARKER","empty","nonListBlockElements","blockElements","block","selfClosing","inlineElements","inline","fillAttrs","normalize","node","parent","firstChild","prev","nextSibling","34","38","39","60","62","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","402","913","914","915","916","917","918","919","920","921","922","923","924","925","926","927","928","929","931","932","933","934","935","936","937","945","946","947","948","949","950","951","952","953","954","955","956","957","958","959","960","961","962","963","964","965","966","967","968","969","977","978","982","8226","8230","8242","8243","8254","8260","8472","8465","8476","8482","8501","8592","8593","8594","8595","8596","8629","8656","8657","8658","8659","8660","8704","8706","8707","8709","8711","8712","8713","8715","8719","8721","8722","8727","8730","8733","8734","8736","8743","8744","8745","8746","8747","8756","8764","8773","8776","8800","8801","8804","8805","8834","8835","8836","8838","8839","8853","8855","8869","8901","8968","8969","8970","8971","9001","9002","9674","9824","9827","9829","9830","338","339","352","353","376","710","732","8194","8195","8201","8204","8205","8206","8207","8211","8212","8216","8217","8218","8220","8221","8222","8224","8225","8240","8249","8250","8364","findNodeIndex","skipText","previousSibling","isDataNode","data","isAncestorOf","parentNode","findClosestAncestor","rootElem","iterator","createNodeIterator","NodeFilter","SHOW_COMMENT","FILTER_ACCEPT","curNode","nextNode","getNodeLength","childNodes","splitDataNode","temp","newNode","cloneNode","denormalizedText","deleteData","attrEquals","attributes","cssFloat","blockParentOrBody","parentOfType","ownerDocument","blockParents","nodes","blocks","windowFromDocument","defaultView","parentWindow","nodeTypes","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","toHex","color","matches","x","toString","encodableChars","c","charCode","charCodeAt","entity","isBom","stripBom","stripBomNode","removeChild","insignificant","className","_moz_dirty","_moz_editor_bogus_node","tableCell","significantNodes","grep","child","emptyTextNode","emptyNode","nodeName","significantChildNodes","isWhitespace","lastTextNode","result","lastChild","isMarker","allWhitespaceContent","isEmptyspace","htmlIndentSpace","sibling","isPrevBlock","isNextBlock","el","isBlock","isSelfClosing","isEmpty","isInline","isBr","list","scrollContainer","compatMode","scrollingElement","scrollTo","toStart","elementTop","elementHeight","marker","windowHeight","innerHeight","top","offsetHeight","ceil","persistScrollTop","offsetParent","offsetTop","offsetLeft","restoreScrollTop","insertAt","newElement","position","referenceElement","removeChildren","removeTextSiblings","tag","closestBy","condition","rootCondition","ofType","changeTag","skipAttributes","attribute","specified","cssText","editableParent","wrap","unwrap","createEmptyNode","removeAttribute","mergeAttributes","origin","each","unstyle","inlineStyle","getEffectiveBackground","backgroundStyle","innerText","classNames","classes","commonAncestor","ancestors","first","j","count","arguments","paths","minPathLength","output","reverse","closestSplittableParent","editableParents","editableAncestor","apply","closestEditable","types","editable","closestEditableOfType","filter","invert","filterFn","filterBy","match","ensureTrailingBreaks","elements","ensureTrailingBreak","removeTrailingBreak","br","supportsLeadingWhitespace","isFunction","TD","fontSizeMappings","quoteRe","brRe","pixelRe","emptyPRe","cssDeclaration","sizzleAttr","scriptAttr","onerrorRe","div","toEditableHtml","_toEditableImmutables","immutable","last","prependTo","_fillEmptyElements","p","_removeSystemElements","_resetOrderedLists","ol","originalStart","ols","_preventScriptExecution","l","attributesToRemove","legacyIE","originalSrc","originalHref","deserialize","semanticFilter","mapStart","cssProperties","property","properties","lastIndex","styleAttr","specifiedAttributes","$node","htmlEncode","children","skip","skipEncoding","childNode","isEmptyBomNode","mapper","previous","jqNode","serialize","hasClass","tagMap","end","textOnly","childrenCount","textChild","runCustom","k:script","font","size","semanticAttributes","textDecoration","fontFamily","strong","em","b","u","styleObj","item","splice","face","script","DropDownList","SelectBox","_initSelectOverlay","autoSize","listWidth","whiteSpace","_listWidth","scrollbar","select","selectBox","view","dataSource","decorate","compareBoundaries","startAncestor","endAncestor","fixIvalidRange","isInvalidRange","ex","updateRangeProperties","textRangeContainer","textRange","duplicate","right","parentElement","adoptContainer","cursorNode","textOffset","isData","anchorNode","anchorParent","cursor","createTextRange","moveToElementText","setEndPoint","adoptEndPoint","comparison","appended","compareEndPoints","RangeIterator","W3CSelection","RangeEnumerator","ImmutablesRangeIterator","ImmutablesRangeEnumerator","Marker","boundary","selectionFromWindow","selectionFromRange","rangeDocument","documentFromRange","W3CRange","setEnd","setStartBefore","setStartAfter","setEndBefore","setEndAfter","selectNodeContents","deleteContents","cloneRange","deleteSubtree","hasPartialSubtree","getSubtreeIterator","cloneSubtree","frag","createDocumentFragment","extractContents","extractSubtree","originalRange","insertNode","startNodeName","endNodeName","fromNode","_current","_next","_end","hasNext","current","traverse","callback","nodeIndex","inStartContainer","inEndContainer","getSubRange","subRange","movedStart","movedEnd","enumerate","visit","rootNode","getEditable","nodeToPath","serializedImmutables","removeImmutables","restoreImmutables","lastType","restoreHtml","path","toRangePoint","denormalizedOffset","caret","addCaret","removeCaret","containerIndex","textNode","add","expand","rangeBoundary","isExpandable","_removeDeadMarkers","createTextNode","_normalizedIndex","pointer","shouldNormalizeStart","shouldNormalizeEnd","shouldNormalize","isBomSelected","collapsedToStart","startParent","endParent","startIndex","endIndex","charAt","editableTextNodes","immutableParent","image","stringify","partition","contents","partitionRange","mapAll","mapped","getAll","predicate","selector","getMarkers","isStartOf","isEndOf","wrapSelectedElements","isEnd","startEditable","endEditable","beforeCaret","afterCaret","search","substring","complexBlocks","toolsToBeUpdated","IMMUTABALE","IMMUTABALE_MARKER_SELECTOR","IMMUTABLE_SELECTOR","expandImmutablesIn","startImmutableParent","endImmutableParent","immutablesContext","editableNodes","randomId","chars","round","random","serialized","replaceWith","removeAttr","deletingKey","updateToolOptions","_initOptions","_toHtml","serializationType","isDeleting","shouldCancelEvent","_cancelDeleting","_cancelTyping","typingInProgress","isTypingKey","cancelDeleting","closestSelectionLi","closestImmutableLi","backspace","del","nextImmutable","_removeImmutable","forwards","commonContainer","_nextNode","startRestorePoint","finishUpdate","endRestorePoint","GenericCommand","Command","restorePoint","formatter","lockRange","releaseRange","point","createDialog","kendoWindow","toggle","outerWidth","_outerWidth","outerHeight","_outerHeight","OVERFLOWANCHOR","focusable","toolNamesByCssClass","k-i-sup-script","k-i-sub-script","k-i-align-left","k-i-align-center","k-i-align-right","k-i-align-justify","k-i-list-unordered","k-i-list-ordered","k-i-login","k-i-indent-increase","k-i-indent-decrease","k-i-link-horizontal","k-i-unlink-horizontal","k-i-image","k-i-file-add","k-i-html","k-i-foreground-color","k-i-paint","k-i-table-insert","k-i-table-column-insert-left","k-i-table-column-insert-right","k-i-table-row-insert-above","k-i-table-row-insert-below","k-i-table-row-delete","k-i-table-column-delete","k-i-table-properties","k-i-table-wizard","k-i-clear-css","OverflowAnchorTool","overflowPopup","_initPopup","_resizeHandler","onResize","groups","advanced","fonts","colors","overflowFlaseTools","prepend","dragHandle","effects","minHeight","visible","autoFocus","actions","dragend","_moved","_toggleOverflowStyles","_initOverflowPopup","popupTemplate","kendoPopup","anchor","copyAnchorStyles","activate","focusOverflowPopup","toolGroupFor","isCustomTool","_editor","expandTools","render","combobox","dropDown","isOpened","stopImmediatePropagation","_attachEvents","inheritText","_toolName","description","tooltip","_appendShortcutSequence","editorElement","editorOffset","editorOptions","_getWindowWidth","_overlaps","box","toolbarWrapper","toolbarWrapperOffset","toolbarWrapperLeft","toolbarWrapperTop","boxOffset","boxOffsetLeft","boxOffsetTop","TABINDEX","localizedText","res","shift","alt","_nativeTools","currentTool","nativeTools","endGroup","group","groupPosition","startGroup","toolElement","groupName","newGroupName","toolConfig","updateGroups","angular","unbindResize","popupElement","attachToolsEvents","buttons","enabledButtons","disabledButtons","dropdown","colorpicker","editorTools","move","constrain","focusableItems","focusElement","currentContainer","ESC","ENTER","SPACEBAR","_executeToolCommand","button","toolname","toCamelCase","lastIndexOf","_immutablesContext","_updateImmutablesState","display","uiData","widget","groupUi","uiElement","trackImmutables","_resize","containerWidth","toolbarWindow","_refreshWidths","_shrink","_stretch","idx","visibleGroups","_groupsWidth","_visibleGroups","eq","_hideGroup","hiddenGroups","_hiddenGroups","_showGroup","sort","a","detach","ViewHtmlCommand","dialog","center","FormatCommand","FormatTool","MOUSEDOWN_NS","KEYDOWN_NS","InlineFormatFinder","numberOfSiblings","referenceNode","textNodesCount","elementNodesCount","markerCount","findSuitable","sourceNode","findFormat","InlineFormatter","values","formatNode","formatNodes","consolidate","outerMostInline","pop","GreedyInlineFormatFinder","greedyProperty","getInlineCssValue","attributeValue","pair","cssIndex","propertyAndValue","getFormatInner","parentsUntil","addBack","toArray","GreedyInlineFormatter","action","InlineFormatTool","DelayedExecutionTool","FontTool","cssAttr","domAttr","initOptions","dataTextField","dataValueField","highlightFirst","newRange","ColorTool","palette","_widget","ColorPicker","toolIcon","storedRange","_inputFocused","picker","sender","_popup","_value","toCssRgba","fontWeight","fontStyle","lastIndexOfRegExp","str","indexOfRegExp","r","HTTP_PROTOCOL","protocolRegExp","endLinkCharsRegExp","LinkFormatFinder","LinkFormatter","markers","ref","UnlinkCommand","LinkCommand","url","_dialogTemplate","img","_initialText","_close","_apply","_keydown","linkUrl","_dialog","textInput","AutoLinkCommand","linkMarker","linkRange","detectedLink","detectLink","_ensureWebProtocol","traverser","detection","startNode","LeftDomTextTraverser","cancelAtNode","DomTextLinkDetection","hasProtocol","_hasProtocolPrefix","_prefixWithWebProtocol","UnlinkTool","DomPos","puntuationOptions","puntuationTraverser","_detectEnd","blank","clone","_detectStart","_isLinkDetected","extendOptions","RightDomTextTraverser","_skipStartPuntuation","ii","DomTextTraverser","cancel","_traverse","edgeNode","subText","splitIndex","listElements","BlockFormatFinder","candidate","suitable","_resolveListsItems","ImmutablesNS","BlockFormatter","ancestor","images","imageFormat","imageAttributes","nonImages","_handleImmutables","applyFormatting","immutableFormat","namedFormat","GreedyBlockFormatter","immutalbeParent","blockFormatter","formatTag","ListFormatter","BlockFormatTool","textAlign","float","marginLeft","marginRight","listStylePosition","ListFormatFinder","unwrapTag","isList","li","isImmutable","containsAny","_parentLists","merge","breakable","applyOnSection","section","pushAncestor","addLastSection","lastSection","sections","lastNodes","ul","fragment","ListCommand","ListTool","unwrapListItem","listFormatter","FormattingTool","toFormattingItem","dot","context","kendoSelectBox","dataItem","toJSON","dataBound","getFormattingValue","n","_ancestor","field","operator","CleanFormatCommand","tagsToClean","clean","KEDITORIMAGEURL","KEDITORIMAGETITLE","KEDITORIMAGEWIDTH","KEDITORIMAGEHEIGHT","ImageCommand","removeIEAttributes","onload","onerror","showBrowser","applied","keyDown","dialogHeight","isIE","ImageBrowser","transport","read","_imageBrowser","ev","selected","loadingOverlay","ImportCommand","_initializeUploadWidget","importOptions","upload","kendoUpload","success","_onUploadSuccess","_onUploadProgress","_onUploadSelect","error","_onUploadError","complete","_onUploadComplete","showFileList","multiple","saveUrl","proxyUrl","autoUpload","saveField","validation","allowedExtensions","maxFileSize","getKendoUpload","_trigger","clearAllFiles","_removeLoadingOverlay","response","files","validationErrors","_initLoadingOverlay","eventType","uploadEvent","_iframeWrapper","_container","genericCommand","postProcess","InsertHtmlTool","_selectBox","selectbox","initialValue","defaultExportAsItems","ExportAsCommand","exportType","postToProxy","generateForm","submit","exportAsOptions","form","method","valueInput","exportTypeInput","fileNameInput","ExportAsTool","changeHandler","unshift","_exec","indentDirection","IndentFormatter","targets","parentList","siblingList","nestedList","targetIndex","mapImmutables","targetNode","listParent","siblings","nextAll","IndentCommand","indentFormatter","OutdentCommand","OutdentTool","isOutdentable","listParentsCount","suitableNodes","ParagraphCommand","_insertMarker","_moveFocus","focusNode","shouldTrim","startInBlock","endInBlock","_blankAfter","paragraph","heading","tableNode","rng","parentChildrenLength","emptyParagraphContent","_insertParagraphAfter","NewLineCommand","filler","oldIE","KEDITORFILEURL","KEDITORFILETEXT","KEDITORFILETITLE","FileCommand","file","FileBrowser","_fileBrowser","ACTIVESTATE","SELECTEDSTATE","getTouches","columnTemplate","tableFormatFinder","TableCommand","skipCleaners","_tableHtml","columnHtml","rowHeight","Array","insertedTable","PopupTool","twTool","_open","_activate","_toggle","TableWizardTool","TableWizardCommand","insertNewTable","InsertTableTool","cols","tableFromLocation","row","floor","clientY","cellHeight","col","clientX","scrollLeft","cellWidth","cells","firstCell","lastCell","getOffset","offsetWidth","autoApplyNS","_setTableSize","_valid","status","selectedRows","selectedColumns","changed","tableSize","InsertRowCommand","cellCount","newRow","td","InsertColumnCommand","columnIndex","cell","newCell","table","DeleteRowCommand","DeleteColumnCommand","columnCount","TableModificationTool","cleaners","ScriptCleaner","TabCleaner","MSWordFormatCleaner","WebkitFormatCleaner","HtmlTagsCleaner","HtmlAttrCleaner","HtmlContentCleaner","CustomCleaner","htmlToFragment","_startModification","_inProgress","_endModification","modificationInfo","_contentModification","before","after","_removeBomNodes","_onBeforeCopy","oncopy","oncut","_fileToDataURL","blob","deferred","reader","FileReader","File","getAsFile","readAsDataURL","_triggerPaste","_handleImagePaste","clipboardData","originalEvent","_insertImages","when","results","onpaste","clipboardRange","clipboardNode","_decoreateClipboardNode","webkit","_moveToCaretPosition","containers","ondragover","ondrop","dataTransfer","borderWidth","overflow","margin","padding","fontVariant","lineSpacing","lineHeight","nodeOffset","caretOffset","_caretOffset","translateX","translateY","translate","-webkit-transform","transform","rangeChanged","isStartTextNode","prevLength","bomNode","splittableParent","splittable","fragmentsHtml","rangeEnd","focusedTable","siblingNodes","lastSiblingIndex","lastSibling","applicable","elm","Cleaner","replacements","customReplacements","replacement","junkReplacements","convertFontMatch","$0","$1","closing","faceRe","family","stripEmptyAnchors","listType","listData","startingSymbol","matchSymbol","symbol","isNumber","trimStartText","_guessUnorderedListStyle","_guessOrderedListStyle","_convertToLi","extractListLevels","msoListRegExp","level","_createList","styleType","listStyleType","rootMargin","rootIndex","lastRootLi","isLastRootLi","rootList","listIndex","levelType","blockChildren","lastMargin","levels","acceptedNameTags","isParentTable","parseFloat","removeAttributes","removeAttributeNode","createColGroup","colgroup","convertHeaders","boldedCells","removeParagraphs","paragraphs","removeDefaultColors","spans","firstRow","longestRow","headers","titles","removeFormatting","filters","DomCleaner","cleanDom","collectTags","collectAttr","TextContainer","HtmlTextLines","separators","line","lines","inlineBlockText","resetLine","appendText","textContainer","appendInlineBlockText","flashInlineBlockText","endLine","il","il1","jl","jl1","DomEnumerator","preventDown","hasText","enumerator","buildText","getDefaultSeparators","htmlLines","thead","tbody","cleaner","tdCleaner","cellText","getSibling","PREVIOUS_SIBLING","tableCells","tableCellsWrappers","tableElements","inTable","RemoveTableContent","cellsTypes","startCell","endCell","_removeContent","getNext","removeTableContent","backspaceHandler","evt","Event","isDefaultPrevented","deleteSelection","startTyping","_addCaret","chrome","_restoreCaret","_handleDelete","_merge","_cleanBomBefore","_handleBackspace","startAtLi","liIndex","startAtNonFirstLi","rangeStartNode","previousNode","isEndOfLink","_handleSelection","_surroundFullyContent","_surroundFullySelectedAnchor","toLocaleLowerCase","_join","startImmutable","endImmutable","_moveMarker","_root","dest","_mergeWithTextNode","appendedNode","_isCaret","systemCommandIsInProgress","createUndoCommand","isModifierKey","isSystem","_toSelectableImmutables","_selectEditorBody","isCharacter","String","fromCharCode","modifier","_getShortcutModifier","navigator","platform","mac","toUpperCase","metaKey","matchesKey","found","matchKey","toolKey","isArray","onEndTyping","stopTyping","force","timeout","what","ExportPdfCommand","PrintCommand","lowerBound","upperBound","getScrollBarWidth","calculatePercentageRatio","total","inPercentages","STRING","REGEX_NUMBER_IN_PERCENTAGES","inPixels","REGEX_NUMBER_IN_PIXELS","toPercentages","PERCENTAGE","toPixels","PIXEL","global","math","ResizingUtils","KEY_DOWN","MOUSE_DOWN","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_MOVE","MOUSE_UP","COMMA","DOT","LAST_CHILD","TABLE","TableElementResizing","_attachEventHandlers","eventNamespace","rootElement","_destroyResizeHandle","rtl","handle","dataAttribute","detectElementBorderHovering","resizingInProgress","resizing","handleOptions","tableElement","resizeHandle","elementBorderHovered","showResizeHandle","_initResizeHandle","setResizeHandlePosition","setResizeHandleDimensions","setResizeHandleDataAttributes","_attachResizeHandleEventHandlers","_initResizable","_hideResizeMarker","markerClass","_destroyResizable","Resizable","onResizeStart","onResizeEnd","_disableKeyboard","setResizeHandleDragPosition","_enableKeyboard","_forceResizing","userEvents","ResizingFactory","resizingName","_destroyResizing","_initResizing","parentTable","resizingType","abs","RESIZE_HANDLE_CLASS","RESIZE_MARKER_CLASS","BODY","TBODY","TH","TR","WIDTH","column","handleWidth","borderOffset","mousePosition","tableBody","scrollTopOffset","scrollLeftOffset","columnWidthOffset","scrollBarWidth","columnOffsetLeft","tBodyOffsetTop","columnWidth","columnLeftOffset","adjacentColumnWidth","resizeHandleOffsetLeft","handleOffset","newWidth","initialAdjacentColumnWidth","initialColumnWidth","rtlModifier","initialDeltaX","_setTableComputedWidth","_setColumnsComputedWidth","_resizeColumn","_resizeTopAndBottomColumns","_resizeAdjacentColumns","tableBodyWidth","currentColumnsWidths","topAndBottomColumns","deltaWidth","adjacentColumns","_resizeAdjacentColumn","adjacentColumn","RESIZE_HANDLE_MARKER_WRAPPER_CLASS","HEIGHT","handleHeight","rowOffsetLeft","rowOffsetTop","$row","tableBodyTopOffset","resizeHandleOffsetTop","currentRowHeight","initialTableHeight","tableBodyHeight","initialStyleHeight","newRowHeight","_setRowsHeightInPixels","_setTableHeight","_setRowsHeightInPercentages","currentRowsHeights","newHeight","HandlePositioningStrategy","EastPositioningStrategy","NorthPositioningStrategy","NortheastPositioningStrategy","NorthwestPositioningStrategy","SouthPositioningStrategy","SoutheastPositioningStrategy","SouthwestPositioningStrategy","WestPositioningStrategy","DraggingStrategyFactory","HandleDraggingStrategy","HorizontalDraggingStrategy","EastDraggingStrategy","WestDraggingStrategy","VerticalDraggingStrategy","NorthDraggingStrategy","SouthDraggingStrategy","HorizontalAndVerticalDraggingStrategy","NorthEastDraggingStrategy","NorthWestDraggingStrategy","SouthEastDraggingStrategy","SouthWestDraggingStrategy","Draggable","DRAG_START","DRAG","DRAG_END","HALF_INSIDE","MOUSE_OVER","MOUSE_OUT","EAST","NORTH","NORTHEAST","NORTHWEST","SOUTH","SOUTHEAST","SOUTHWEST","WEST","TableResizeHandle","_addStyles","_initDraggable","_initPositioningStrategy","_initDraggingStrategy","resizableElement","_destroyDraggable","_setPosition","_positioningStrategy","getPosition","_onMouseOver","_onMouseOut","_draggable","dragstart","_onDragStart","drag","_onDrag","_onDragEnd","_draggingStrategy","adjustDragDelta","deltaX","deltaY","initialDeltaY","StrategyFactory","_items","register","itemsLength","PositioningStrategyFactory","calculatePosition","handleOffsetPosition","applyHandleOffset","scrollOffsetPosition","applyScrollOffset","adjustment","deltas","xAxisAdjustment","yAxisAdjustment","isUndefined","RESIZE_HANDLE_WRAPPER_CLASS","TABLE_CLASS","TABLE_RESIZING_CLASS","COLUMN","ROW","handles","_destroyResizeHandles","appendHandlesTo","minWidth","_resizeWidth","_resizeHeight","ratioValue","ratioTotalValue","constrainedWidth","styleWidth","currentWidth","parentWidth","maxWidth","_getMaxDimensionValue","_initialElementWidth","_setColumnsWidth","constrainedHeight","styleHeight","currentHeight","parentHeight","maxHeight","hasRowsInPixels","_hasRowsInPixels","_initialElementHeight","dimension","dimensionLowercase","parentDimension","parentScrollOffset","isWidthInPercentages","parentColumn","columnsLength","_initResizeHandles","_showResizeHandles","_bindToResizeHandlesEvents","_onResizeHandleDragStart","_onResizeHandleDrag","_onResizeHandleDragEnd","_onResizeHandleMouseOver","_onResizeHandleMouseOut","TableResizingFactory","factory","eventTarget","eventCurrentTarget","isResizeHandleOrChild","cellsFormatFinder","reUnit","selectedTable","_sourceTable","_selectedTable","selectedCells","_selectedTableCells","_selectedCells","closeCallback","onDialogClose","parseTable","TableWizardDialog","insertTable","createNewTable","updateTable","_ensureFocusableAfterTable","lastSelectedRow","rowIndex","cellsLength","newRowsCount","cellIndex","cellProp","tableRows","tableProp","tableProperties","collection","_deleteTableRows","insertRow","_insertCells","deleteCell","_updateTableProperties","cellProperties","_updateCellProperties","_updateCaption","cellsWithHeaders","cellsWithHeadersAssociated","associateCellsWithHeader","_isHeadingRow","associate","nextRow","isDataRow","timestamp","Date","getTime","ids","generateIds","modifySellsIds","modifyCellsHeadings","isHeadingRow","associatedCells","headingIds","headersAttr","insertCell","rowParent","cellPropToAll","createTBody","_getStylesData","captionContent","deleteCaption","createCaption","_getAlignmentData","captionAlignment","verticalAlign","widthUnit","heightUnit","backgroundColor","bgColor","borderColor","borderCollapse","align","tStyle","captionClone","tableAlignment","tableJson","_getAlignment","_getUnit","parseTableRows","rowData","cellData","parseCell","cStyle","horizontalOnly","vAlign","hAlign","unit","TableWizardEditTool","numericTextBoxSettings","borderStyles","tableAlignmentDropDownSettings","valueTemplate","cellAlignmentDropDownSettings","accessibilityAlignmentDropDownSettings","dialogTemplate","okHandler","collectDialogValues","tableData","closeHandler","_initTabStripComponent","_initTableViewComponents","_initCellViewComponents","_initAccessibilityViewComponents","components","tabStrip","kendoTabStrip","_collectTableViewValues","_collectCellViewValues","_collectAccessibilityViewValues","tableView","checked","cellView","accessibilityView","_addUnit","_initNumericTextbox","_initDropDownList","_initTableAlignmentDropDown","_initColorPicker","_initInput","_initCheckbox","_initCellAlignmentDropDown","_initAccessibilityAlignmentDropDown","storage","settings","component","kendoNumericTextBox","kendoDropDownList","_setComponentValue","_initAlignmentDropDown","kendoColorPicker","clearButton","_destroyComponents"],"mappings":"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I,KACJC,IAAK,OACLC,IAAK,QACLC,IAAK,OACLC,IAAK,QACLC,IAAK,SACLC,IAAK,MACLC,IAAK,SACLC,IAAK,OACLC,IAAK,MACLC,IAAK,OACLC,IAAK,OACLC,IAAK,QACLC,IAAK,MACLC,IAAK,MACLC,IAAK,MACLC,IAAK,OACLC,IAAK,MACLC,IAAK,SACLC,IAAK,OACLC,IAAK,OACLC,IAAK,QACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,OACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,SACLC,IAAK,OACLC,IAAK,QACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,MACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,SACLC,IAAK,OACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,QACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,SACLC,IAAK,OACLC,IAAK,QACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,MACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,SACLC,IAAK,OACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,OACLC,IAAK,QACLC,IAAK,OACLC,IAAK,QACLC,IAAK,QACLC,IAAK,UACLC,IAAK,OACLC,IAAK,MACLC,IAAK,QACLC,IAAK,OACLC,IAAK,QACLC,IAAK,SACLC,IAAK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","file":"kendo.editor.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('util/undoredostack', ['kendo.core'], f);\n}(function () {\n    (function (kendo) {\n        var UndoRedoStack = kendo.Observable.extend({\n            init: function (options) {\n                kendo.Observable.fn.init.call(this, options);\n                this.clear();\n            },\n            events: [\n                'undo',\n                'redo'\n            ],\n            push: function (command) {\n                this.stack = this.stack.slice(0, this.currentCommandIndex + 1);\n                this.currentCommandIndex = this.stack.push(command) - 1;\n            },\n            undo: function () {\n                if (this.canUndo()) {\n                    var command = this.stack[this.currentCommandIndex--];\n                    command.undo();\n                    this.trigger('undo', { command: command });\n                }\n            },\n            redo: function () {\n                if (this.canRedo()) {\n                    var command = this.stack[++this.currentCommandIndex];\n                    command.redo();\n                    this.trigger('redo', { command: command });\n                }\n            },\n            clear: function () {\n                this.stack = [];\n                this.currentCommandIndex = -1;\n            },\n            canUndo: function () {\n                return this.currentCommandIndex >= 0;\n            },\n            canRedo: function () {\n                return this.currentCommandIndex != this.stack.length - 1;\n            }\n        });\n        kendo.deepExtend(kendo, { util: { UndoRedoStack: UndoRedoStack } });\n    }(kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/main', [\n        'util/undoredostack',\n        'kendo.combobox',\n        'kendo.dropdownlist',\n        'kendo.window',\n        'kendo.colorpicker'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, Widget = kendo.ui.Widget, os = kendo.support.mobileOS, browser = kendo.support.browser, extend = $.extend, proxy = $.proxy, deepExtend = kendo.deepExtend, keys = kendo.keys;\n        var SELECT = 'select';\n        var SELECT_OVERLAY_SELECTOR = 'select.k-select-overlay';\n        var PLACEHOLDER_CLASS = 'k-placeholder';\n        var PLACEHOLDER_TAG_ID = 'placeholder';\n        var REFRESH_INTERVAL = 200;\n        var DEFAULT_LANGUAGE = 'en';\n        var ToolTemplate = Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            getHtml: function () {\n                var options = this.options;\n                return kendo.template(options.template, { useWithBlock: false })(options);\n            }\n        });\n        var EditorUtils = {\n            editorWrapperTemplate: '<table cellspacing=\"4\" cellpadding=\"0\" class=\"k-widget k-editor k-header\" role=\"presentation\"><tbody>' + '<tr role=\"presentation\"><td class=\"k-editor-toolbar-wrap\" role=\"presentation\"><ul class=\"k-editor-toolbar\" role=\"toolbar\" /></td></tr>' + '<tr><td class=\"k-editable-area\" /></tr>' + '</tbody></table>',\n            buttonTemplate: '# var iconCssClass= \"k-icon k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\"));#' + '<a tabindex=\"0\" role=\"button\" class=\"k-tool\"' + '#= data.popup ? \" data-popup\" : \"\" #' + ' unselectable=\"on\" title=\"#= data.title #\" aria-label=\"#= data.title #\"><span unselectable=\"on\" class=\"k-tool-icon #= iconCssClass #\"></span></a>',\n            tableWizardButtonTemplate: '# var iconCssClass= \"k-icon k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\"));#' + '<a tabindex=\"0\" role=\"button\" class=\"k-tool\"' + '#= data.popup ? \" data-popup\" : \"\" #' + ' unselectable=\"on\" title=\"#= data.title #\"><span unselectable=\"on\" class=\"k-tool-icon #= iconCssClass #\"></span><span class=\"k-tool-text\">#= data.title #</span></a>',\n            colorPickerTemplate: '<div class=\"k-colorpicker k-icon k-i-#= data.cssClass.replace(\"k-\", \"\") #\" />',\n            comboBoxTemplate: '<select title=\"#= data.title #\" aria-label=\"#= data.title #\" class=\"#= data.cssClass #\" />',\n            dropDownListTemplate: '<span class=\"k-editor-dropdown\"><select title=\"#= data.title #\" aria-label=\"#= data.title #\" class=\"#= data.cssClass #\" /></span>',\n            separatorTemplate: '<span class=\"k-separator\" />',\n            overflowAnchorTemplate: '<a tabindex=\"0\" role=\"button\" class=\"k-tool k-overflow-anchor\" data-popup' + ' unselectable=\"on\" title=\"#= data.title #\" aria-label=\"#= data.title #\" aria-haspopup=\"true\" aria-expanded=\"false\">' + '<span unselectable=\"on\" class=\"k-icon k-i-more-vertical\"></span></a>',\n            formatByName: function (name, format) {\n                for (var i = 0; i < format.length; i++) {\n                    if ($.inArray(name, format[i].tags) >= 0) {\n                        return format[i];\n                    }\n                }\n            },\n            getToolCssClass: function (name) {\n                var toolCssClassNames = {\n                    superscript: 'sup-script',\n                    subscript: 'sub-script',\n                    justifyLeft: 'align-left',\n                    justifyCenter: 'align-center',\n                    justifyRight: 'align-right',\n                    justifyFull: 'align-justify',\n                    insertUnorderedList: 'list-unordered',\n                    insertOrderedList: 'list-ordered',\n                    'import': 'login',\n                    indent: 'indent-increase',\n                    outdent: 'indent-decrease',\n                    createLink: 'link-horizontal',\n                    unlink: 'unlink-horizontal',\n                    insertImage: 'image',\n                    insertFile: 'file-add',\n                    viewHtml: 'html',\n                    foreColor: 'foreground-color',\n                    backColor: 'paint',\n                    createTable: 'table-insert',\n                    addColumnLeft: 'table-column-insert-left',\n                    addColumnRight: 'table-column-insert-right',\n                    addRowAbove: 'table-row-insert-above',\n                    addRowBelow: 'table-row-insert-below',\n                    deleteRow: 'table-row-delete',\n                    deleteColumn: 'table-column-delete',\n                    tableWizard: 'table-properties',\n                    tableWizardInsert: 'table-wizard',\n                    cleanFormatting: 'clear-css'\n                };\n                var cssClass = toolCssClassNames[name];\n                if (cssClass) {\n                    return cssClass;\n                }\n                return name;\n            },\n            registerTool: function (toolName, tool) {\n                var toolOptions = tool.options;\n                if (toolOptions && toolOptions.template) {\n                    toolOptions.template.options.cssClass = 'k-' + EditorUtils.getToolCssClass(toolName);\n                }\n                if (!tool.name) {\n                    tool.options.name = toolName;\n                    tool.name = toolName.toLowerCase();\n                }\n                Editor.defaultTools[toolName] = tool;\n            },\n            registerFormat: function (formatName, format) {\n                Editor.fn.options.formats[formatName] = format;\n            },\n            cacheComments: function (content, comments) {\n                for (var index in comments) {\n                    content = content.replace(comments[index], '{' + index + '}');\n                }\n                return content;\n            },\n            retrieveComments: function (content, comments) {\n                for (var index in comments) {\n                    content = content.replace('{' + index + '}', comments[index]);\n                }\n                return content;\n            }\n        };\n        var messages = {\n            bold: 'Bold',\n            italic: 'Italic',\n            underline: 'Underline',\n            strikethrough: 'Strikethrough',\n            superscript: 'Superscript',\n            subscript: 'Subscript',\n            justifyCenter: 'Center text',\n            justifyLeft: 'Align text left',\n            justifyRight: 'Align text right',\n            justifyFull: 'Justify',\n            insertUnorderedList: 'Insert unordered list',\n            insertOrderedList: 'Insert ordered list',\n            indent: 'Indent',\n            outdent: 'Outdent',\n            createLink: 'Insert hyperlink',\n            unlink: 'Remove hyperlink',\n            insertImage: 'Insert image',\n            insertFile: 'Insert file',\n            insertHtml: 'Insert HTML',\n            viewHtml: 'View HTML',\n            fontName: 'Select font family',\n            fontNameInherit: '(inherited font)',\n            fontSize: 'Select font size',\n            fontSizeInherit: '(inherited size)',\n            formatBlock: 'Format',\n            formatting: 'Format',\n            foreColor: 'Color',\n            backColor: 'Background color',\n            style: 'Styles',\n            emptyFolder: 'Empty Folder',\n            editAreaTitle: 'Editable area. Press F10 for toolbar.',\n            uploadFile: 'Upload',\n            overflowAnchor: 'More tools',\n            orderBy: 'Arrange by:',\n            orderBySize: 'Size',\n            orderByName: 'Name',\n            invalidFileType: 'The selected file \"{0}\" is not valid. Supported file types are {1}.',\n            deleteFile: 'Are you sure you want to delete \"{0}\"?',\n            overwriteFile: 'A file with name \"{0}\" already exists in the current directory. Do you want to overwrite it?',\n            directoryNotFound: 'A directory with this name was not found.',\n            imageWebAddress: 'Web address',\n            imageAltText: 'Alternate text',\n            imageWidth: 'Width (px)',\n            imageHeight: 'Height (px)',\n            fileWebAddress: 'Web address',\n            fileTitle: 'Title',\n            fileText: 'Text',\n            linkWebAddress: 'Web address',\n            linkText: 'Text',\n            linkToolTip: 'ToolTip',\n            linkOpenInNewWindow: 'Open link in new window',\n            dialogUpdate: 'Update',\n            dialogInsert: 'Insert',\n            dialogOk: 'Ok',\n            dialogCancel: 'Cancel',\n            cleanFormatting: 'Clean formatting',\n            createTable: 'Create a table',\n            createTableHint: 'Create a {0} x {1} table',\n            addColumnLeft: 'Add column on the left',\n            addColumnRight: 'Add column on the right',\n            addRowAbove: 'Add row above',\n            addRowBelow: 'Add row below',\n            deleteRow: 'Delete row',\n            deleteColumn: 'Delete column',\n            tableWizard: 'Table Wizard',\n            tableTab: 'Table',\n            cellTab: 'Cell',\n            accessibilityTab: 'Accessibility',\n            caption: 'Caption',\n            summary: 'Summary',\n            width: 'Width',\n            height: 'Height',\n            units: 'Units',\n            cellSpacing: 'Cell Spacing',\n            cellPadding: 'Cell Padding',\n            cellMargin: 'Cell Margin',\n            alignment: 'Alignment',\n            background: 'Background',\n            cssClass: 'CSS Class',\n            id: 'ID',\n            border: 'Border',\n            borderStyle: 'Border Style',\n            collapseBorders: 'Collapse borders',\n            wrapText: 'Wrap text',\n            associateCellsWithHeaders: 'Associate cells with headers',\n            alignLeft: 'Align Left',\n            alignCenter: 'Align Center',\n            alignRight: 'Align Right',\n            alignLeftTop: 'Align Left Top',\n            alignCenterTop: 'Align Center Top',\n            alignRightTop: 'Align Right Top',\n            alignLeftMiddle: 'Align Left Middle',\n            alignCenterMiddle: 'Align Center Middle',\n            alignRightMiddle: 'Align Right Middle',\n            alignLeftBottom: 'Align Left Bottom',\n            alignCenterBottom: 'Align Center Bottom',\n            alignRightBottom: 'Align Right Bottom',\n            alignRemove: 'Remove Alignment',\n            columns: 'Columns',\n            rows: 'Rows',\n            selectAllCells: 'Select All Cells',\n            exportAs: 'Export As',\n            'import': 'Import',\n            print: 'Print'\n        };\n        var supportedBrowser = !os || os.ios && os.flatVersion >= 500 || !os.ios && typeof document.documentElement.contentEditable != 'undefined';\n        var toolGroups = {\n            basic: [\n                'bold',\n                'italic',\n                'underline'\n            ],\n            alignment: [\n                'justifyLeft',\n                'justifyCenter',\n                'justifyRight'\n            ],\n            lists: [\n                'insertUnorderedList',\n                'insertOrderedList'\n            ],\n            indenting: [\n                'indent',\n                'outdent'\n            ],\n            links: [\n                'createLink',\n                'unlink'\n            ],\n            tables: [\n                'tableWizard',\n                'createTable',\n                'addColumnLeft',\n                'addColumnRight',\n                'addRowAbove',\n                'addRowBelow',\n                'deleteRow',\n                'deleteColumn'\n            ]\n        };\n        var Editor = Widget.extend({\n            init: function (element, options) {\n                var that = this, value, editorNS = kendo.ui.editor, toolbarContainer, toolbarOptions, type, comments;\n                var domElement;\n                var dom = editorNS.Dom;\n                if (!supportedBrowser) {\n                    return;\n                }\n                Widget.fn.init.call(that, element, options);\n                that.options = deepExtend({}, that.options, options);\n                that.options.tools = that.options.tools.slice();\n                element = that.element;\n                domElement = element[0];\n                type = dom.name(domElement);\n                this._registerHandler(element.closest('form'), 'submit', proxy(that.update, that, undefined));\n                toolbarOptions = extend({}, that.options);\n                toolbarOptions.editor = that;\n                if (type == 'textarea') {\n                    that._wrapTextarea();\n                    toolbarContainer = that.wrapper.find('.k-editor-toolbar');\n                    if (domElement.id) {\n                        toolbarContainer.attr('aria-controls', domElement.id);\n                    }\n                } else {\n                    that.element.attr('contenteditable', true).addClass('k-widget k-editor k-editor-inline');\n                    toolbarOptions.popup = true;\n                    toolbarContainer = $('<ul class=\"k-editor-toolbar\" role=\"toolbar\" />').insertBefore(element);\n                }\n                that.toolbar = new editorNS.Toolbar(toolbarContainer[0], toolbarOptions);\n                that.toolbar.bindTo(that);\n                if (type == 'textarea') {\n                    setTimeout(function () {\n                        var heightStyle = that.wrapper[0].style.height;\n                        var expectedHeight = parseInt(heightStyle, 10);\n                        var actualHeight = that.wrapper.height();\n                        if (heightStyle.indexOf('px') > 0 && !isNaN(expectedHeight) && actualHeight > expectedHeight) {\n                            that.wrapper.height(expectedHeight - (actualHeight - expectedHeight));\n                        }\n                    });\n                }\n                that._resizable();\n                that._initializeContentElement(that);\n                that.keyboard = new editorNS.Keyboard([\n                    new editorNS.BackspaceHandler(that),\n                    new editorNS.TypingHandler(that),\n                    new editorNS.SystemHandler(that),\n                    new editorNS.SelectAllHandler(that)\n                ]);\n                that.clipboard = new editorNS.Clipboard(this);\n                that.undoRedoStack = new kendo.util.UndoRedoStack();\n                if (options && options.value) {\n                    value = options.value;\n                } else if (that.textarea) {\n                    value = domElement.value;\n                    if (that.options.encoded && $.trim(domElement.defaultValue).length) {\n                        value = domElement.defaultValue;\n                    }\n                    comments = dom.getAllComments($('<div></div>').html(value)[0]);\n                    value = EditorUtils.cacheComments(value, comments);\n                    value = value.replace(/[\\r\\n\\v\\f\\t ]+/gi, ' ');\n                    value = EditorUtils.retrieveComments(value, comments);\n                } else {\n                    value = domElement.innerHTML;\n                }\n                that.value(value || '\\uFEFF');\n                this._registerHandler(document, {\n                    'mousedown': function () {\n                        that._endTyping();\n                    },\n                    'mouseup': function (e) {\n                        that._mouseup(e);\n                    }\n                });\n                that._initializeImmutables();\n                that.toolbar.resize();\n                kendo.notify(that);\n            },\n            setOptions: function (options) {\n                var editor = this;\n                Widget.fn.setOptions.call(editor, options);\n                if (options.tools) {\n                    editor.toolbar.bindTo(editor);\n                }\n                this._initializePlaceholder();\n            },\n            _togglePlaceholder: function (show) {\n                var that = this, body = that.body, $body = $(body), placeholder = that.options.placeholder;\n                if (!that.textarea || !placeholder) {\n                    return;\n                }\n                $body.attr('aria-label', function () {\n                    return show ? placeholder : '';\n                });\n                $body.toggleClass(PLACEHOLDER_CLASS, show);\n            },\n            _endTyping: function () {\n                var keyboard = this.keyboard;\n                try {\n                    if (keyboard.isTypingInProgress()) {\n                        keyboard.endTyping(true);\n                        this.saveSelection();\n                    }\n                } catch (e) {\n                }\n            },\n            _selectionChange: function () {\n                this._selectionStarted = false;\n                this.saveSelection();\n                this.trigger('select', {});\n            },\n            _resizable: function () {\n                var resizable = this.options.resizable;\n                var isResizable = $.isPlainObject(resizable) ? resizable.content === undefined || resizable.content === true : resizable;\n                if (isResizable && this.textarea) {\n                    var draggableElement = $('<div class=\\'k-resize-handle\\'><span class=\\'k-icon k-i-arrow-45-down-right\\' /></div>').insertAfter(this.textarea);\n                    this.wrapper.addClass('k-resizable');\n                    this.wrapper.kendoResizable(extend({}, this.options.resizable, {\n                        draggableElement: draggableElement,\n                        start: function (e) {\n                            var editor = this.editor = $(e.currentTarget).closest('.k-editor');\n                            this.initialSize = editor.height();\n                            editor.find('td:last').append('<div class=\\'k-overlay\\' />');\n                        },\n                        resize: function (e) {\n                            var delta = e.y.initialDelta;\n                            var newSize = this.initialSize + delta;\n                            var min = this.options.min || 0;\n                            var max = this.options.max || Infinity;\n                            newSize = Math.min(max, Math.max(min, newSize));\n                            this.editor.height(newSize);\n                        },\n                        resizeend: function () {\n                            this.editor.find('.k-overlay').remove();\n                            this.editor = null;\n                        }\n                    }));\n                    if (kendo.support.mobileOS.ios) {\n                        var resizableWidget = this.wrapper.getKendoResizable();\n                        resizableWidget.draggable.options.ignore = SELECT_OVERLAY_SELECTOR;\n                    }\n                }\n            },\n            _initializeTableResizing: function () {\n                var editor = this;\n                kendo.ui.editor.TableResizing.create(editor);\n                editor._showTableResizeHandlesProxy = proxy(editor._showTableResizeHandles, editor);\n                editor.bind(SELECT, editor._showTableResizeHandlesProxy);\n            },\n            _destroyTableResizing: function () {\n                var editor = this;\n                var tableResizing = editor.tableResizing;\n                if (tableResizing) {\n                    tableResizing.destroy();\n                    editor.tableResizing = null;\n                }\n                if (editor._showTableResizeHandlesProxy) {\n                    editor.unbind(SELECT, editor._showTableResizeHandlesProxy);\n                }\n            },\n            _showTableResizeHandles: function () {\n                var editor = this;\n                var tableResizing = editor.tableResizing;\n                if (tableResizing) {\n                    tableResizing.showResizeHandles();\n                }\n            },\n            _initializeColumnResizing: function () {\n                kendo.ui.editor.ColumnResizing.create(this);\n            },\n            _destroyColumnResizing: function () {\n                var editor = this;\n                if (editor.columnResizing) {\n                    editor.columnResizing.destroy();\n                    editor.columnResizing = null;\n                }\n            },\n            _initializeRowResizing: function () {\n                kendo.ui.editor.RowResizing.create(this);\n            },\n            _destroyRowResizing: function () {\n                var editor = this;\n                if (editor.rowResizing) {\n                    editor.rowResizing.destroy();\n                    editor.rowResizing = null;\n                }\n            },\n            _wrapTextarea: function () {\n                var that = this, textarea = that.element, w = textarea[0].style.width, h = textarea[0].style.height, template = EditorUtils.editorWrapperTemplate, editorWrap = $(template).insertBefore(textarea).width(w).height(h), editArea = editorWrap.find('.k-editable-area');\n                textarea.attr('autocomplete', 'off').appendTo(editArea).addClass('k-content k-raw-content').css('display', 'none');\n                that.textarea = textarea;\n                that.wrapper = editorWrap;\n            },\n            _createContentElement: function (stylesheets) {\n                var editor = this;\n                var iframe, wnd, doc;\n                var textarea = editor.textarea;\n                var specifiedDomain = editor.options.domain;\n                var domain = specifiedDomain || document.domain;\n                var domainScript = '';\n                var src = 'javascript:\"\"';\n                var lang = '';\n                textarea.hide();\n                iframe = $('<iframe />', {\n                    title: editor.options.messages.editAreaTitle,\n                    frameBorder: '0'\n                })[0];\n                $(iframe).css('display', '').addClass('k-content').attr('tabindex', textarea[0].tabIndex).insertBefore(textarea);\n                if (specifiedDomain || domain != location.hostname) {\n                    domainScript = '<script>document.domain=\"' + domain + '\"</script>';\n                    src = 'javascript:document.write(\\'' + domainScript + '\\')';\n                    iframe.src = src;\n                }\n                wnd = iframe.contentWindow || iframe;\n                doc = wnd.document || iframe.contentDocument;\n                $(iframe).one('load', function () {\n                    editor.toolbar.decorateFrom(doc.body);\n                });\n                lang = document.getElementsByTagName('html')[0].getAttribute('lang') || DEFAULT_LANGUAGE;\n                doc.open();\n                doc.write('<!DOCTYPE html><html lag=\\'' + lang + '\\'><head>' + '<meta charset=\\'utf-8\\' />' + '<title>Kendo UI Editor content</title>' + '<style>' + 'html{padding:0;margin:0;height:100%;min-height:100%;cursor:text;}' + 'body{padding:0;margin:0;}' + 'body{box-sizing:border-box;font-size:12px;font-family:Verdana,Geneva,sans-serif;margin-top:-1px;padding:5px .4em 0;' + 'word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;' + (kendo.support.isRtl(textarea) ? 'direction:rtl;' : '') + (os.ios ? 'word-break:keep-all;' : '') + '}' + 'h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}' + 'p{margin:0 0 1em;}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}' + 'ul,ol{padding-left:2.5em}' + 'span{-ms-high-contrast-adjust:none;}' + 'a{color:#00a}' + 'code{font-size:1.23em}' + 'telerik\\\\3Ascript{display: none;}' + '.k-table{width:100%;border-spacing:0;margin: 0 0 1em;}' + '.k-table td{min-width:1px;padding:.2em .3em;}' + '.k-table,.k-table td{outline:0;border: 1px dotted #ccc;}' + '.k-table p{margin:0;padding:0;}' + '.k-column-resize-handle-wrapper {position: absolute; height: 10px; width:10px; cursor: col-resize; z-index: 2;}' + '.k-column-resize-handle {width: 100%; height: 100%;}' + '.k-column-resize-handle > .k-column-resize-marker {width:2px; height:100%; margin:0 auto; background-color:#00b0ff; display:none; opacity:0.8;}' + '.k-row-resize-handle-wrapper {position: absolute; cursor: row-resize; z-index:2; width: 10px; height: 10px;}' + '.k-row-resize-handle {display: table; width: 100%; height: 100%;}' + '.k-row-resize-marker-wrapper{display: table-cell; height:100%; width:100%; margin:0; padding:0; vertical-align: middle;}' + '.k-row-resize-marker{margin: 0; padding:0; width:100%; height:2px; background-color: #00b0ff; opacity:0.8; display:none;}' + '.k-table-resize-handle-wrapper {position: absolute; background-color: #fff; border: 1px solid #000; z-index: 100; width: 5px; height: 5px;}' + '.k-table-resize-handle {width: 100%; height: 100%;}' + '.k-table-resize-handle.k-resize-east{cursor:e-resize;}' + '.k-table-resize-handle.k-resize-north{cursor:n-resize;}' + '.k-table-resize-handle.k-resize-northeast{cursor:ne-resize;}' + '.k-table-resize-handle.k-resize-northwest{cursor:nw-resize;}' + '.k-table-resize-handle.k-resize-south{cursor:s-resize;}' + '.k-table-resize-handle.k-resize-southeast{cursor:se-resize;}' + '.k-table-resize-handle.k-resize-southwest{cursor:sw-resize;}' + '.k-table-resize-handle.k-resize-west{cursor:w-resize;}' + '.k-table.k-table-resizing{opacity:0.6;}' + '.k-placeholder{color:grey}' + 'k\\\\:script{display:none;}' + '</style>' + domainScript + $.map(stylesheets, function (href) {\n                    return '<link rel=\\'stylesheet\\' href=\\'' + href + '\\'>';\n                }).join('') + '</head><body autocorrect=\\'off\\' contenteditable=\\'true\\'></body></html>');\n                doc.close();\n                return wnd;\n            },\n            _blur: function () {\n                var textarea = this.textarea;\n                var old = textarea ? textarea.val() : this._oldValue;\n                var value = this.options.encoded ? this.encodedValue() : this.value();\n                this.update();\n                if (textarea) {\n                    textarea.trigger('blur');\n                }\n                if (value != old) {\n                    this.trigger('change');\n                    if (textarea) {\n                        textarea.trigger('change');\n                    }\n                }\n            },\n            _spellCorrect: function (editor) {\n                var beforeCorrection;\n                var falseTrigger = false;\n                this._registerHandler(editor.body, {\n                    'contextmenu': function () {\n                        editor.one('select', function () {\n                            beforeCorrection = null;\n                        });\n                        editor._spellCorrectTimeout = setTimeout(function () {\n                            beforeCorrection = new kendo.ui.editor.RestorePoint(editor.getRange(), editor.body);\n                            falseTrigger = false;\n                        }, 10);\n                    },\n                    'input': function () {\n                        if (!beforeCorrection) {\n                            return;\n                        }\n                        if (kendo.support.browser.mozilla && !falseTrigger) {\n                            falseTrigger = true;\n                            return;\n                        }\n                        kendo.ui.editor._finishUpdate(editor, beforeCorrection);\n                    }\n                });\n            },\n            _registerHandler: function (element, type, handler) {\n                var editor = this;\n                var NS = '.kendoEditor';\n                var eventNames;\n                var i;\n                element = $(element);\n                if (!this._handlers) {\n                    this._handlers = [];\n                }\n                if (element.length) {\n                    if ($.isPlainObject(type)) {\n                        for (var t in type) {\n                            if (type.hasOwnProperty(t)) {\n                                this._registerHandler(element, t, type[t]);\n                            }\n                        }\n                    } else {\n                        eventNames = kendo.applyEventMap(type).split(' ');\n                        for (i = 0; i < eventNames.length; i++) {\n                            editor._handlers.push({\n                                element: element,\n                                type: eventNames[i] + NS,\n                                handler: handler\n                            });\n                            element.on(eventNames[i] + NS, handler);\n                        }\n                    }\n                }\n            },\n            _deregisterHandlers: function () {\n                var handlers = this._handlers;\n                for (var i = 0; i < handlers.length; i++) {\n                    var h = handlers[i];\n                    h.element.off(h.type, h.handler);\n                }\n                this._handlers = [];\n            },\n            _initializeContentElement: function () {\n                var editor = this;\n                var doc;\n                var blurTrigger;\n                var mousedownTrigger;\n                if (editor.textarea) {\n                    editor.window = editor._createContentElement(editor.options.stylesheets);\n                    doc = editor.document = editor.window.contentDocument || editor.window.document;\n                    if (!doc.body) {\n                        var body = doc.createElement('body');\n                        body.setAttribute('contenteditable', 'true');\n                        body.setAttribute('autocorrect', 'off');\n                        doc.getElementsByTagName('html')[0].appendChild(body);\n                        var interval = setInterval(function () {\n                            if ($(editor.document).find('body').length > 1) {\n                                $(editor.document).find('body:last').remove();\n                                window.clearInterval(interval);\n                            }\n                        }, 10);\n                    }\n                    editor.body = doc.body;\n                    blurTrigger = editor.window;\n                    mousedownTrigger = doc;\n                    this._registerHandler(doc, 'mouseup', proxy(this._mouseup, this));\n                } else {\n                    editor.window = window;\n                    doc = editor.document = document;\n                    editor.body = editor.element[0];\n                    blurTrigger = editor.body;\n                    mousedownTrigger = editor.body;\n                    editor.toolbar.decorateFrom(editor.body);\n                }\n                this._registerHandler(blurTrigger, 'blur', proxy(this._blur, this));\n                editor._registerHandler(mousedownTrigger, 'down', proxy(editor._mousedown, editor));\n                try {\n                    doc.execCommand('enableInlineTableEditing', null, false);\n                } catch (e) {\n                }\n                if (kendo.support.touch) {\n                    this._registerHandler(doc, {\n                        'keydown': function () {\n                            if (kendo._activeElement() != doc.body) {\n                                editor.window.focus();\n                            }\n                        }\n                    });\n                }\n                this._initializePlaceholder();\n                this._spellCorrect(editor);\n                this._registerHandler(editor.body, {\n                    'keydown': function (e) {\n                        var range;\n                        if ((e.keyCode === keys.BACKSPACE || e.keyCode === keys.DELETE) && editor.body.getAttribute('contenteditable') !== 'true') {\n                            return false;\n                        }\n                        if (e.keyCode === keys.F10) {\n                            setTimeout(proxy(editor.toolbar.focus, editor.toolbar), 100);\n                            editor.toolbar.preventPopupHide = true;\n                            e.preventDefault();\n                            return;\n                        } else if (e.keyCode == keys.LEFT || e.keyCode == keys.RIGHT) {\n                            range = editor.getRange();\n                            var left = e.keyCode == keys.LEFT;\n                            var container = range[left ? 'startContainer' : 'endContainer'];\n                            var offset = range[left ? 'startOffset' : 'endOffset'];\n                            var direction = left ? -1 : 1;\n                            var next = offset + direction;\n                            var nextChar = left ? next : offset;\n                            if (container.nodeType == 3 && container.nodeValue[nextChar] == '\\uFEFF') {\n                                range.setStart(container, next);\n                                range.collapse(true);\n                                editor.selectRange(range);\n                            }\n                        }\n                        var tools = editor.toolbar.tools;\n                        var toolName = editor.keyboard.toolFromShortcut(tools, e);\n                        var toolOptions = toolName ? tools[toolName].options : {};\n                        if (toolName && !toolOptions.keyPressCommand) {\n                            e.preventDefault();\n                            if (!/^(undo|redo)$/.test(toolName)) {\n                                editor.keyboard.endTyping(true);\n                            }\n                            editor.trigger('keydown', e);\n                            editor.exec(toolName);\n                            editor._runPostContentKeyCommands(e);\n                            return false;\n                        }\n                        editor.keyboard.clearTimeout();\n                        editor.keyboard.keydown(e);\n                    },\n                    'keypress': function (e) {\n                        setTimeout(function () {\n                            editor._runPostContentKeyCommands(e);\n                            editor._showTableResizeHandles();\n                        }, 0);\n                    },\n                    'keyup': function (e) {\n                        var selectionCodes = [\n                            keys.BACKSPACE,\n                            keys.TAB,\n                            keys.PAGEUP,\n                            keys.PAGEDOWN,\n                            keys.END,\n                            keys.HOME,\n                            keys.LEFT,\n                            keys.UP,\n                            keys.RIGHT,\n                            keys.DOWN,\n                            keys.INSERT,\n                            keys.DELETE\n                        ];\n                        if ($.inArray(e.keyCode, selectionCodes) > -1 || e.keyCode == 65 && e.ctrlKey && !e.altKey && !e.shiftKey) {\n                            window.clearTimeout(this._refreshInterval);\n                            this._refreshInterval = window.setTimeout(function () {\n                                editor._selectionChange();\n                            }, REFRESH_INTERVAL);\n                        }\n                        editor.keyboard.keyup(e);\n                    },\n                    'click': function (e) {\n                        var dom = kendo.ui.editor.Dom, range;\n                        if (dom.name(e.target) === 'img') {\n                            range = editor.createRange();\n                            range.selectNode(e.target);\n                            editor.selectRange(range);\n                        }\n                    },\n                    'cut copy paste drop dragover': function (e) {\n                        editor.clipboard['on' + e.type](e);\n                    },\n                    'focusin': function () {\n                        if (editor.body.hasAttribute('contenteditable')) {\n                            $(this).addClass('k-state-active');\n                            editor.toolbar.show();\n                            editor._togglePlaceholder(false);\n                        }\n                    },\n                    'focusout': function () {\n                        setTimeout(function () {\n                            var active = kendo._activeElement();\n                            var body = editor.body;\n                            var toolbar = editor.toolbar;\n                            if (toolbar.options.popup) {\n                                var toolbarContainerElement = toolbar.window.element.get(0);\n                                if (toolbarContainerElement && !($.contains(toolbarContainerElement, active) || toolbarContainerElement == active)) {\n                                    toolbar.preventPopupHide = false;\n                                }\n                            }\n                            if (active != body && !$.contains(body, active) && !$(active).is('.k-editortoolbar-dragHandle') && !toolbar.focused()) {\n                                $(body).removeClass('k-state-active');\n                                toolbar.hide();\n                            }\n                            editor._togglePlaceholder(!editor.value().trim());\n                        }, 10);\n                    }\n                });\n                editor._initializeColumnResizing();\n                editor._initializeRowResizing();\n                editor._initializeTableResizing();\n            },\n            _initializePlaceholder: function () {\n                var that = this, placeholder = that.options.placeholder, style, $head;\n                if (!that.textarea || !placeholder) {\n                    return;\n                }\n                style = '<style id=\\'' + PLACEHOLDER_TAG_ID + '\\'>.' + PLACEHOLDER_CLASS + ':before { content: \\'' + placeholder + '\\'; }' + '</style>';\n                $head = $(that.document.head);\n                $head.find('#' + PLACEHOLDER_TAG_ID).remove();\n                $head.append(style);\n                that._togglePlaceholder(!that.value().trim());\n            },\n            _initializeImmutables: function () {\n                var that = this, editorNS = kendo.ui.editor;\n                if (that.options.immutables) {\n                    that.immutables = new editorNS.Immutables(that);\n                }\n            },\n            _mousedown: function (e) {\n                var editor = this;\n                editor._selectionStarted = true;\n                if ($(editor.body).parents('.k-window').length) {\n                    e.stopPropagation();\n                }\n                if (browser.gecko) {\n                    return;\n                }\n                var target = $(e.target).closest('a[href]');\n                if ((e.which == 2 || e.which == 1 && e.ctrlKey) && target && target.is('a[href]')) {\n                    window.open(target.attr('href'), '_new');\n                }\n                if (e.target.tagName && e.target.tagName.toLowerCase() === 'html') {\n                    setTimeout(function () {\n                        editor.body.focus();\n                    }, 0);\n                }\n            },\n            _mouseup: function (e) {\n                var that = this;\n                if (kendo.support.mobileOS.ios && e && $(e.target).is(SELECT_OVERLAY_SELECTOR)) {\n                    return;\n                }\n                if (that._selectionStarted) {\n                    setTimeout(function () {\n                        that._selectionChange();\n                    }, 1);\n                }\n            },\n            _runPostContentKeyCommands: function (e) {\n                var range = this.getRange();\n                var tools = this.keyboard.toolsFromShortcut(this.toolbar.tools, e);\n                for (var i = 0; i < tools.length; i++) {\n                    var tool = tools[i];\n                    var o = tool.options;\n                    if (!o.keyPressCommand) {\n                        continue;\n                    }\n                    var cmd = new o.command({ range: range });\n                    if (cmd.changesContent()) {\n                        this.keyboard.endTyping(true);\n                        this.exec(tool.name);\n                    }\n                }\n            },\n            refresh: function () {\n                var that = this;\n                if (that.textarea) {\n                    that._destroyResizings();\n                    var value = that.value();\n                    that.textarea.val(value);\n                    that.wrapper.find('iframe').remove();\n                    that._initializeContentElement(that);\n                    that.value(value);\n                }\n            },\n            events: [\n                'select',\n                'change',\n                'execute',\n                'error',\n                'paste',\n                'keydown',\n                'keyup'\n            ],\n            options: {\n                name: 'Editor',\n                messages: messages,\n                placeholder: '',\n                formats: {},\n                encoded: true,\n                domain: null,\n                resizable: false,\n                deserialization: { custom: null },\n                serialization: {\n                    entities: true,\n                    semantic: true,\n                    scripts: false\n                },\n                pasteCleanup: {\n                    all: false,\n                    css: false,\n                    custom: null,\n                    keepNewLines: false,\n                    msAllFormatting: false,\n                    msConvertLists: true,\n                    msTags: true,\n                    none: false,\n                    span: false\n                },\n                stylesheets: [],\n                dialogOptions: {\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    animation: false\n                },\n                imageBrowser: null,\n                fileBrowser: null,\n                fontName: [\n                    {\n                        text: 'Arial',\n                        value: 'Arial, Helvetica, sans-serif'\n                    },\n                    {\n                        text: 'Courier New',\n                        value: '\"Courier New\", Courier, monospace'\n                    },\n                    {\n                        text: 'Georgia',\n                        value: 'Georgia, serif'\n                    },\n                    {\n                        text: 'Impact',\n                        value: 'Impact, Charcoal, sans-serif'\n                    },\n                    {\n                        text: 'Lucida Console',\n                        value: '\"Lucida Console\", Monaco, monospace'\n                    },\n                    {\n                        text: 'Tahoma',\n                        value: 'Tahoma, Geneva, sans-serif'\n                    },\n                    {\n                        text: 'Times New Roman',\n                        value: '\"Times New Roman\", Times, serif'\n                    },\n                    {\n                        text: 'Trebuchet MS',\n                        value: '\"Trebuchet MS\", Helvetica, sans-serif'\n                    },\n                    {\n                        text: 'Verdana',\n                        value: 'Verdana, Geneva, sans-serif'\n                    }\n                ],\n                fontSize: [\n                    {\n                        text: '1 (8pt)',\n                        value: 'xx-small'\n                    },\n                    {\n                        text: '2 (10pt)',\n                        value: 'x-small'\n                    },\n                    {\n                        text: '3 (12pt)',\n                        value: 'small'\n                    },\n                    {\n                        text: '4 (14pt)',\n                        value: 'medium'\n                    },\n                    {\n                        text: '5 (18pt)',\n                        value: 'large'\n                    },\n                    {\n                        text: '6 (24pt)',\n                        value: 'x-large'\n                    },\n                    {\n                        text: '7 (36pt)',\n                        value: 'xx-large'\n                    }\n                ],\n                formatBlock: [\n                    {\n                        text: 'Paragraph',\n                        value: 'p'\n                    },\n                    {\n                        text: 'Quotation',\n                        value: 'blockquote'\n                    },\n                    {\n                        text: 'Heading 1',\n                        value: 'h1'\n                    },\n                    {\n                        text: 'Heading 2',\n                        value: 'h2'\n                    },\n                    {\n                        text: 'Heading 3',\n                        value: 'h3'\n                    },\n                    {\n                        text: 'Heading 4',\n                        value: 'h4'\n                    },\n                    {\n                        text: 'Heading 5',\n                        value: 'h5'\n                    },\n                    {\n                        text: 'Heading 6',\n                        value: 'h6'\n                    }\n                ],\n                tools: [].concat.call(['formatting'], toolGroups.basic, toolGroups.alignment, toolGroups.lists, toolGroups.indenting, toolGroups.links, ['insertImage'], toolGroups.tables)\n            },\n            destroy: function () {\n                var editor = this;\n                Widget.fn.destroy.call(this);\n                this._endTyping(true);\n                this._deregisterHandlers();\n                clearTimeout(this._spellCorrectTimeout);\n                this._focusOutside();\n                this.toolbar.destroy();\n                editor._destroyUploadWidget();\n                editor._destroyResizings();\n                kendo.destroy(this.wrapper);\n            },\n            _destroyResizings: function () {\n                var editor = this;\n                editor._destroyTableResizing();\n                kendo.ui.editor.TableResizing.dispose(editor);\n                editor._destroyRowResizing();\n                kendo.ui.editor.RowResizing.dispose(editor);\n                editor._destroyColumnResizing();\n                kendo.ui.editor.ColumnResizing.dispose(editor);\n            },\n            _focusOutside: function () {\n                if (kendo.support.browser.msie && this.textarea) {\n                    var tempInput = $('<input style=\\'position:fixed;left:1px;top:1px;width:1px;height:1px;font-size:0;border:0;opacity:0\\' />').appendTo(document.body).focus();\n                    tempInput.blur().remove();\n                }\n            },\n            _destroyUploadWidget: function () {\n                var editor = this;\n                if (editor._uploadWidget) {\n                    editor._uploadWidget.destroy();\n                    editor._uploadWidget = null;\n                }\n            },\n            state: function (toolName) {\n                var tool = Editor.defaultTools[toolName];\n                var finder = tool && (tool.options.finder || tool.finder);\n                var RangeUtils = kendo.ui.editor.RangeUtils;\n                var range, textNodes;\n                if (finder) {\n                    range = this.getRange();\n                    textNodes = RangeUtils.textNodes(range);\n                    if (!textNodes.length && range.collapsed) {\n                        textNodes = [range.startContainer];\n                    }\n                    return finder.getFormat ? finder.getFormat(textNodes) : finder.isFormatted(textNodes);\n                }\n                return false;\n            },\n            value: function (html) {\n                var body = this.body, editorNS = kendo.ui.editor, options = this.options, currentHtml = editorNS.Serializer.domToXhtml(body, options.serialization);\n                if (html === undefined) {\n                    return currentHtml;\n                }\n                if (html == currentHtml) {\n                    return;\n                }\n                editorNS.Serializer.htmlToDom(html, body, options.deserialization);\n                this.selectionRestorePoint = null;\n                this.update();\n                this.toolbar.refreshTools();\n            },\n            saveSelection: function (range) {\n                range = range || this.getRange();\n                var container = range.commonAncestorContainer, body = this.body;\n                if (container == body || $.contains(body, container)) {\n                    this.selectionRestorePoint = new kendo.ui.editor.RestorePoint(range, body);\n                }\n            },\n            _focusBody: function () {\n                var body = this.body;\n                var iframe = this.wrapper && this.wrapper.find('iframe')[0];\n                var documentElement = this.document.documentElement;\n                var activeElement = kendo._activeElement();\n                var scrollTop;\n                if (!iframe && body.scrollHeight > body.clientHeight) {\n                    scrollTop = body.scrollTop;\n                    body.focus();\n                    body.scrollTop = scrollTop;\n                } else if (activeElement != body && activeElement != iframe) {\n                    scrollTop = documentElement.scrollTop;\n                    body.focus();\n                    documentElement.scrollTop = scrollTop;\n                }\n            },\n            restoreSelection: function () {\n                this._focusBody();\n                if (this.selectionRestorePoint) {\n                    this.selectRange(this.selectionRestorePoint.toRange());\n                }\n            },\n            focus: function () {\n                this.restoreSelection();\n            },\n            update: function (value) {\n                value = value || this.options.encoded ? this.encodedValue() : this.value();\n                if (this.textarea) {\n                    this.textarea.val(value);\n                    this._togglePlaceholder(!value.trim());\n                } else {\n                    this._oldValue = value;\n                }\n            },\n            encodedValue: function () {\n                return kendo.ui.editor.Dom.encode(this.value());\n            },\n            createRange: function (document) {\n                return kendo.ui.editor.RangeUtils.createRange(document || this.document);\n            },\n            getSelection: function () {\n                return kendo.ui.editor.SelectionUtils.selectionFromDocument(this.document);\n            },\n            selectRange: function (range) {\n                this._focusBody();\n                var selection = this.getSelection();\n                selection.removeAllRanges();\n                selection.addRange(range);\n                this.saveSelection(range);\n            },\n            getRange: function () {\n                var selection = this.getSelection(), range = selection && selection.rangeCount > 0 ? selection.getRangeAt(0) : this.createRange(), doc = this.document;\n                if (range.startContainer == doc && range.endContainer == doc && !range.startOffset && !range.endOffset) {\n                    range.setStart(this.body, 0);\n                    range.collapse(true);\n                }\n                return range;\n            },\n            _containsRange: function (range) {\n                var dom = kendo.ui.editor.Dom;\n                var body = this.body;\n                return range && dom.isAncestorOrSelf(body, range.startContainer) && dom.isAncestorOrSelf(body, range.endContainer);\n            },\n            _deleteSavedRange: function () {\n                if ('_range' in this) {\n                    delete this._range;\n                }\n            },\n            selectedHtml: function () {\n                return kendo.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents());\n            },\n            paste: function (html, options) {\n                this.focus();\n                var command = new kendo.ui.editor.InsertHtmlCommand($.extend({\n                    range: this.getRange(),\n                    html: html\n                }, options));\n                command.editor = this;\n                command.exec();\n            },\n            exec: function (name, params) {\n                var that = this;\n                var command = null;\n                var range, tool, prevented;\n                if (!name) {\n                    throw new Error('kendoEditor.exec(): `name` parameter cannot be empty');\n                }\n                if (that.body.getAttribute('contenteditable') !== 'true' && name !== 'print' && name !== 'pdf' && name !== 'exportAs') {\n                    return false;\n                }\n                name = name.toLowerCase();\n                if (!that.keyboard.isTypingInProgress()) {\n                    that._focusBody();\n                    that.selectRange(that._range || that.getRange());\n                }\n                tool = that.toolbar.toolById(name);\n                if (!tool) {\n                    for (var id in Editor.defaultTools) {\n                        if (id.toLowerCase() == name) {\n                            tool = Editor.defaultTools[id];\n                            break;\n                        }\n                    }\n                }\n                if (tool) {\n                    range = that.getRange();\n                    if (tool.command) {\n                        command = tool.command(extend({\n                            range: range,\n                            body: that.body,\n                            immutables: !!that.immutables\n                        }, params));\n                    }\n                    prevented = that.trigger('execute', {\n                        name: name,\n                        command: command\n                    });\n                    if (prevented) {\n                        return;\n                    }\n                    if (/^(undo|redo)$/i.test(name)) {\n                        that.undoRedoStack[name]();\n                    } else if (command) {\n                        that.execCommand(command);\n                        if (command.async) {\n                            command.change = proxy(that._selectionChange, that);\n                            return;\n                        }\n                    }\n                    that._selectionChange();\n                }\n            },\n            execCommand: function (command) {\n                if (!command.managesUndoRedo) {\n                    this.undoRedoStack.push(command);\n                }\n                command.editor = this;\n                command.exec();\n            }\n        });\n        Editor.defaultTools = {\n            undo: {\n                options: {\n                    key: 'Z',\n                    ctrl: true\n                }\n            },\n            redo: {\n                options: {\n                    key: 'Y',\n                    ctrl: true\n                }\n            }\n        };\n        kendo.ui.plugin(Editor);\n        var Tool = Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            initialize: function (ui, options) {\n                ui.attr({\n                    unselectable: 'on',\n                    title: options.title,\n                    'aria-label': options.title\n                });\n            },\n            command: function (commandArguments) {\n                return new this.options.command(commandArguments);\n            },\n            update: $.noop\n        });\n        Tool.exec = function (editor, name, value) {\n            editor.exec(name, { value: value });\n        };\n        EditorUtils.registerTool('separator', new Tool({ template: new ToolTemplate({ template: EditorUtils.separatorTemplate }) }));\n        var bomFill = browser.msie && browser.version < 9 ? '\\uFEFF' : '';\n        var emptyElementContent = '\\uFEFF';\n        var emptyTableCellContent = emptyElementContent;\n        if (browser.msie || browser.edge) {\n            emptyTableCellContent = emptyElementContent = '&nbsp;';\n        }\n        extend(kendo.ui, {\n            editor: {\n                ToolTemplate: ToolTemplate,\n                EditorUtils: EditorUtils,\n                Tool: Tool,\n                _bomFill: bomFill,\n                emptyElementContent: emptyElementContent,\n                emptyTableCellContent: emptyTableCellContent\n            }\n        });\n        if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(Editor.prototype);\n            Editor.prototype._drawPDF = function () {\n                return kendo.drawing.drawDOM(this.body, this.options.pdf);\n            };\n            Editor.prototype.saveAsPDF = function () {\n                var progress = new $.Deferred();\n                var promise = progress.promise();\n                var args = { promise: promise };\n                if (this.trigger('pdfExport', args)) {\n                    return;\n                }\n                var options = this.options.pdf;\n                this._drawPDF(progress).then(function (root) {\n                    return kendo.drawing.exportPDF(root, options);\n                }).done(function (dataURI) {\n                    kendo.saveAs({\n                        dataURI: dataURI,\n                        fileName: options.fileName,\n                        proxyURL: options.proxyURL,\n                        proxyTarget: options.proxyTarget,\n                        forceProxy: options.forceProxy\n                    });\n                    progress.resolve();\n                }).fail(function (err) {\n                    progress.reject(err);\n                });\n                return promise;\n            };\n        }\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/dom', ['editor/main'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, map = $.map, extend = $.extend, browser = kendo.support.browser, STYLE = 'style', FLOAT = 'float', CSSFLOAT = 'cssFloat', STYLEFLOAT = 'styleFloat', CLASS = 'class', KMARKER = 'k-marker';\n        function makeMap(items) {\n            var obj = {}, i, len;\n            for (i = 0, len = items.length; i < len; i++) {\n                obj[items[i]] = true;\n            }\n            return obj;\n        }\n        var empty = makeMap('area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed'.split(',')), nonListBlockElements = 'p,div,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption'.split(','), blockElements = nonListBlockElements.concat([\n                'ul',\n                'ol',\n                'li'\n            ]), block = makeMap(blockElements), selfClosing = makeMap('area,base,br,col,command,embed,hr,img,input,keygen,link,menuitem,meta,param,source,track,wbr'.split(',')), inlineElements = 'span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby'.split(','), inline = makeMap(inlineElements), fillAttrs = makeMap('checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected'.split(','));\n        var normalize = function (node) {\n            if (node.nodeType == 1) {\n                node.normalize();\n            }\n        };\n        if (browser.msie && browser.version >= 8) {\n            normalize = function (parent) {\n                if (parent.nodeType == 1 && parent.firstChild) {\n                    var prev = parent.firstChild, node = prev;\n                    while (true) {\n                        node = node.nextSibling;\n                        if (!node) {\n                            break;\n                        }\n                        if (node.nodeType == 3 && prev.nodeType == 3) {\n                            node.nodeValue = prev.nodeValue + node.nodeValue;\n                            Dom.remove(prev);\n                        }\n                        prev = node;\n                    }\n                }\n            };\n        }\n        var whitespace = /^\\s+$/, emptyspace = /^[\\n\\r\\t]+$/, rgb = /rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/i, bom = /\\ufeff/g, whitespaceOrBom = /^(\\s+|\\ufeff)$/, persistedScrollTop, cssAttributes = ('color,padding-left,padding-right,padding-top,padding-bottom,' + 'background-color,background-attachment,background-image,background-position,background-repeat,' + 'border-top-style,border-top-width,border-top-color,' + 'border-bottom-style,border-bottom-width,border-bottom-color,' + 'border-left-style,border-left-width,border-left-color,' + 'border-right-style,border-right-width,border-right-color,' + 'font-family,font-size,font-style,font-variant,font-weight,line-height').split(','), htmlRe = /[<>\\&]/g, entityRe = /[\\u00A0-\\u2666<>\\&]/g, entityTable = {\n                34: 'quot',\n                38: 'amp',\n                39: 'apos',\n                60: 'lt',\n                62: 'gt',\n                160: 'nbsp',\n                161: 'iexcl',\n                162: 'cent',\n                163: 'pound',\n                164: 'curren',\n                165: 'yen',\n                166: 'brvbar',\n                167: 'sect',\n                168: 'uml',\n                169: 'copy',\n                170: 'ordf',\n                171: 'laquo',\n                172: 'not',\n                173: 'shy',\n                174: 'reg',\n                175: 'macr',\n                176: 'deg',\n                177: 'plusmn',\n                178: 'sup2',\n                179: 'sup3',\n                180: 'acute',\n                181: 'micro',\n                182: 'para',\n                183: 'middot',\n                184: 'cedil',\n                185: 'sup1',\n                186: 'ordm',\n                187: 'raquo',\n                188: 'frac14',\n                189: 'frac12',\n                190: 'frac34',\n                191: 'iquest',\n                192: 'Agrave',\n                193: 'Aacute',\n                194: 'Acirc',\n                195: 'Atilde',\n                196: 'Auml',\n                197: 'Aring',\n                198: 'AElig',\n                199: 'Ccedil',\n                200: 'Egrave',\n                201: 'Eacute',\n                202: 'Ecirc',\n                203: 'Euml',\n                204: 'Igrave',\n                205: 'Iacute',\n                206: 'Icirc',\n                207: 'Iuml',\n                208: 'ETH',\n                209: 'Ntilde',\n                210: 'Ograve',\n                211: 'Oacute',\n                212: 'Ocirc',\n                213: 'Otilde',\n                214: 'Ouml',\n                215: 'times',\n                216: 'Oslash',\n                217: 'Ugrave',\n                218: 'Uacute',\n                219: 'Ucirc',\n                220: 'Uuml',\n                221: 'Yacute',\n                222: 'THORN',\n                223: 'szlig',\n                224: 'agrave',\n                225: 'aacute',\n                226: 'acirc',\n                227: 'atilde',\n                228: 'auml',\n                229: 'aring',\n                230: 'aelig',\n                231: 'ccedil',\n                232: 'egrave',\n                233: 'eacute',\n                234: 'ecirc',\n                235: 'euml',\n                236: 'igrave',\n                237: 'iacute',\n                238: 'icirc',\n                239: 'iuml',\n                240: 'eth',\n                241: 'ntilde',\n                242: 'ograve',\n                243: 'oacute',\n                244: 'ocirc',\n                245: 'otilde',\n                246: 'ouml',\n                247: 'divide',\n                248: 'oslash',\n                249: 'ugrave',\n                250: 'uacute',\n                251: 'ucirc',\n                252: 'uuml',\n                253: 'yacute',\n                254: 'thorn',\n                255: 'yuml',\n                402: 'fnof',\n                913: 'Alpha',\n                914: 'Beta',\n                915: 'Gamma',\n                916: 'Delta',\n                917: 'Epsilon',\n                918: 'Zeta',\n                919: 'Eta',\n                920: 'Theta',\n                921: 'Iota',\n                922: 'Kappa',\n                923: 'Lambda',\n                924: 'Mu',\n                925: 'Nu',\n                926: 'Xi',\n                927: 'Omicron',\n                928: 'Pi',\n                929: 'Rho',\n                931: 'Sigma',\n                932: 'Tau',\n                933: 'Upsilon',\n                934: 'Phi',\n                935: 'Chi',\n                936: 'Psi',\n                937: 'Omega',\n                945: 'alpha',\n                946: 'beta',\n                947: 'gamma',\n                948: 'delta',\n                949: 'epsilon',\n                950: 'zeta',\n                951: 'eta',\n                952: 'theta',\n                953: 'iota',\n                954: 'kappa',\n                955: 'lambda',\n                956: 'mu',\n                957: 'nu',\n                958: 'xi',\n                959: 'omicron',\n                960: 'pi',\n                961: 'rho',\n                962: 'sigmaf',\n                963: 'sigma',\n                964: 'tau',\n                965: 'upsilon',\n                966: 'phi',\n                967: 'chi',\n                968: 'psi',\n                969: 'omega',\n                977: 'thetasym',\n                978: 'upsih',\n                982: 'piv',\n                8226: 'bull',\n                8230: 'hellip',\n                8242: 'prime',\n                8243: 'Prime',\n                8254: 'oline',\n                8260: 'frasl',\n                8472: 'weierp',\n                8465: 'image',\n                8476: 'real',\n                8482: 'trade',\n                8501: 'alefsym',\n                8592: 'larr',\n                8593: 'uarr',\n                8594: 'rarr',\n                8595: 'darr',\n                8596: 'harr',\n                8629: 'crarr',\n                8656: 'lArr',\n                8657: 'uArr',\n                8658: 'rArr',\n                8659: 'dArr',\n                8660: 'hArr',\n                8704: 'forall',\n                8706: 'part',\n                8707: 'exist',\n                8709: 'empty',\n                8711: 'nabla',\n                8712: 'isin',\n                8713: 'notin',\n                8715: 'ni',\n                8719: 'prod',\n                8721: 'sum',\n                8722: 'minus',\n                8727: 'lowast',\n                8730: 'radic',\n                8733: 'prop',\n                8734: 'infin',\n                8736: 'ang',\n                8743: 'and',\n                8744: 'or',\n                8745: 'cap',\n                8746: 'cup',\n                8747: 'int',\n                8756: 'there4',\n                8764: 'sim',\n                8773: 'cong',\n                8776: 'asymp',\n                8800: 'ne',\n                8801: 'equiv',\n                8804: 'le',\n                8805: 'ge',\n                8834: 'sub',\n                8835: 'sup',\n                8836: 'nsub',\n                8838: 'sube',\n                8839: 'supe',\n                8853: 'oplus',\n                8855: 'otimes',\n                8869: 'perp',\n                8901: 'sdot',\n                8968: 'lceil',\n                8969: 'rceil',\n                8970: 'lfloor',\n                8971: 'rfloor',\n                9001: 'lang',\n                9002: 'rang',\n                9674: 'loz',\n                9824: 'spades',\n                9827: 'clubs',\n                9829: 'hearts',\n                9830: 'diams',\n                338: 'OElig',\n                339: 'oelig',\n                352: 'Scaron',\n                353: 'scaron',\n                376: 'Yuml',\n                710: 'circ',\n                732: 'tilde',\n                8194: 'ensp',\n                8195: 'emsp',\n                8201: 'thinsp',\n                8204: 'zwnj',\n                8205: 'zwj',\n                8206: 'lrm',\n                8207: 'rlm',\n                8211: 'ndash',\n                8212: 'mdash',\n                8216: 'lsquo',\n                8217: 'rsquo',\n                8218: 'sbquo',\n                8220: 'ldquo',\n                8221: 'rdquo',\n                8222: 'bdquo',\n                8224: 'dagger',\n                8225: 'Dagger',\n                8240: 'permil',\n                8249: 'lsaquo',\n                8250: 'rsaquo',\n                8364: 'euro'\n            };\n        var Dom = {\n            block: block,\n            inline: inline,\n            findNodeIndex: function (node, skipText) {\n                var i = 0;\n                if (!node) {\n                    return -1;\n                }\n                while (true) {\n                    node = node.previousSibling;\n                    if (!node) {\n                        break;\n                    }\n                    if (!(skipText && node.nodeType == 3)) {\n                        i++;\n                    }\n                }\n                return i;\n            },\n            isDataNode: function (node) {\n                return node && node.nodeValue !== null && node.data !== null;\n            },\n            isAncestorOf: function (parent, node) {\n                try {\n                    return !Dom.isDataNode(parent) && ($.contains(parent, Dom.isDataNode(node) ? node.parentNode : node) || node.parentNode == parent);\n                } catch (e) {\n                    return false;\n                }\n            },\n            isAncestorOrSelf: function (root, node) {\n                return Dom.isAncestorOf(root, node) || root == node;\n            },\n            findClosestAncestor: function (root, node) {\n                if (Dom.isAncestorOf(root, node)) {\n                    while (node && node.parentNode != root) {\n                        node = node.parentNode;\n                    }\n                }\n                return node;\n            },\n            getAllComments: function (rootElem) {\n                var comments = [];\n                var iterator = document.createNodeIterator(rootElem, NodeFilter.SHOW_COMMENT, function () {\n                    return NodeFilter.FILTER_ACCEPT;\n                }, false);\n                var curNode = iterator.nextNode();\n                while (curNode) {\n                    comments.push(curNode.nodeValue);\n                    curNode = iterator.nextNode();\n                }\n                return comments;\n            },\n            getNodeLength: function (node) {\n                return Dom.isDataNode(node) ? node.length : node.childNodes.length;\n            },\n            splitDataNode: function (node, offset) {\n                var newNode = node.cloneNode(false);\n                var denormalizedText = '';\n                var iterator = node.nextSibling;\n                var temp;\n                while (iterator && iterator.nodeType == 3 && iterator.nodeValue) {\n                    denormalizedText += iterator.nodeValue;\n                    temp = iterator;\n                    iterator = iterator.nextSibling;\n                    Dom.remove(temp);\n                }\n                node.deleteData(offset, node.length);\n                newNode.deleteData(0, offset);\n                newNode.nodeValue += denormalizedText;\n                Dom.insertAfter(newNode, node);\n            },\n            attrEquals: function (node, attributes) {\n                for (var key in attributes) {\n                    var value = node[key];\n                    if (key == FLOAT) {\n                        value = node[kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT];\n                    }\n                    if (typeof value == 'object') {\n                        if (!Dom.attrEquals(value, attributes[key])) {\n                            return false;\n                        }\n                    } else if (value != attributes[key]) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            blockParentOrBody: function (node) {\n                return Dom.parentOfType(node, blockElements) || node.ownerDocument.body;\n            },\n            blockParents: function (nodes) {\n                var blocks = [], i, len;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    var block = Dom.parentOfType(nodes[i], Dom.blockElements);\n                    if (block && $.inArray(block, blocks) < 0) {\n                        blocks.push(block);\n                    }\n                }\n                return blocks;\n            },\n            windowFromDocument: function (document) {\n                return document.defaultView || document.parentWindow;\n            },\n            normalize: normalize,\n            blockElements: blockElements,\n            nonListBlockElements: nonListBlockElements,\n            inlineElements: inlineElements,\n            empty: empty,\n            fillAttrs: fillAttrs,\n            nodeTypes: {\n                ELEMENT_NODE: 1,\n                ATTRIBUTE_NODE: 2,\n                TEXT_NODE: 3,\n                CDATA_SECTION_NODE: 4,\n                ENTITY_REFERENCE_NODE: 5,\n                ENTITY_NODE: 6,\n                PROCESSING_INSTRUCTION_NODE: 7,\n                COMMENT_NODE: 8,\n                DOCUMENT_NODE: 9,\n                DOCUMENT_TYPE_NODE: 10,\n                DOCUMENT_FRAGMENT_NODE: 11,\n                NOTATION_NODE: 12\n            },\n            toHex: function (color) {\n                var matches = rgb.exec(color);\n                if (!matches) {\n                    return color;\n                }\n                return '#' + map(matches.slice(1), function (x) {\n                    x = parseInt(x, 10).toString(16);\n                    return x.length > 1 ? x : '0' + x;\n                }).join('');\n            },\n            encode: function (value, options) {\n                var encodableChars = !options || options.entities ? entityRe : htmlRe;\n                return value.replace(encodableChars, function (c) {\n                    var charCode = c.charCodeAt(0);\n                    var entity = entityTable[charCode];\n                    return entity ? '&' + entity + ';' : c;\n                });\n            },\n            isBom: function (node) {\n                return node && node.nodeType === 3 && /^[\\ufeff]+$/.test(node.nodeValue);\n            },\n            stripBom: function (text) {\n                return (text || '').replace(bom, '');\n            },\n            stripBomNode: function (node) {\n                if (Dom.isBom(node)) {\n                    node.parentNode.removeChild(node);\n                }\n            },\n            insignificant: function (node) {\n                var attr = node.attributes;\n                return node.className == 'k-marker' || Dom.is(node, 'br') && (node.className == 'k-br' || attr._moz_dirty || attr._moz_editor_bogus_node);\n            },\n            tableCell: function (node) {\n                return Dom.is(node, 'td') || Dom.is(node, 'th');\n            },\n            significantNodes: function (nodes) {\n                return $.grep(nodes, function (child) {\n                    var name = Dom.name(child);\n                    if (name == 'br') {\n                        return false;\n                    } else if (Dom.insignificant(child)) {\n                        return false;\n                    } else if (Dom.emptyTextNode(child)) {\n                        return false;\n                    } else if (child.nodeType == 1 && !empty[name] && Dom.emptyNode(child)) {\n                        return false;\n                    }\n                    return true;\n                });\n            },\n            emptyTextNode: function (node) {\n                return node && node.nodeType == 3 && whitespaceOrBom.test(node.nodeValue);\n            },\n            emptyNode: function (node) {\n                return node.nodeType == 1 && !Dom.significantNodes(node.childNodes).length;\n            },\n            name: function (node) {\n                return node.nodeName.toLowerCase();\n            },\n            significantChildNodes: function (node) {\n                return $.grep(node.childNodes, function (child) {\n                    return child.nodeType != 3 || !Dom.isWhitespace(child);\n                });\n            },\n            lastTextNode: function (node) {\n                var result = null;\n                if (node.nodeType == 3) {\n                    return node;\n                }\n                for (var child = node.lastChild; child; child = child.previousSibling) {\n                    result = Dom.lastTextNode(child);\n                    if (result) {\n                        return result;\n                    }\n                }\n                return result;\n            },\n            is: function (node, nodeName) {\n                return node && Dom.name(node) == nodeName;\n            },\n            isMarker: function (node) {\n                return node.className == KMARKER;\n            },\n            isWhitespace: function (node) {\n                return whitespace.test(node.nodeValue);\n            },\n            allWhitespaceContent: function (node) {\n                var child = node.firstChild;\n                while (child && Dom.isWhitespace(child)) {\n                    child = child.nextSibling;\n                }\n                return !child;\n            },\n            isEmptyspace: function (node) {\n                return emptyspace.test(node.nodeValue);\n            },\n            htmlIndentSpace: function (node) {\n                if (!(Dom.isDataNode(node) && Dom.isWhitespace(node))) {\n                    return false;\n                }\n                if (emptyspace.test(node.nodeValue)) {\n                    return true;\n                }\n                var sibling = function (el, direction) {\n                    while (el[direction]) {\n                        el = el[direction];\n                        if (Dom.significantNodes([el]).length > 0) {\n                            return el;\n                        }\n                    }\n                };\n                var parent = node.parentNode;\n                var prev = sibling(node, 'previousSibling');\n                var next = sibling(node, 'nextSibling');\n                if (bom.test(node.nodeValue)) {\n                    return !!(prev || next);\n                }\n                if ($(parent).is('tr,tbody,thead,tfoot,table,ol,ul')) {\n                    return true;\n                }\n                if (Dom.isBlock(parent) || Dom.is(parent, 'body')) {\n                    var isPrevBlock = prev && Dom.isBlock(prev);\n                    var isNextBlock = next && Dom.isBlock(next);\n                    if (!next && isPrevBlock || !prev && isNextBlock || isPrevBlock && isNextBlock) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            isBlock: function (node) {\n                return block[Dom.name(node)];\n            },\n            isSelfClosing: function (node) {\n                return selfClosing[Dom.name(node)];\n            },\n            isEmpty: function (node) {\n                return empty[Dom.name(node)];\n            },\n            isInline: function (node) {\n                return inline[Dom.name(node)];\n            },\n            isBr: function (node) {\n                return Dom.name(node) == 'br';\n            },\n            list: function (node) {\n                var name = node ? Dom.name(node) : '';\n                return name == 'ul' || name == 'ol' || name == 'dl';\n            },\n            scrollContainer: function (doc) {\n                var wnd = Dom.windowFromDocument(doc), scrollContainer = (wnd.contentWindow || wnd).document || wnd.ownerDocument || wnd;\n                if (scrollContainer.compatMode == 'BackCompat') {\n                    scrollContainer = scrollContainer.body;\n                } else {\n                    scrollContainer = scrollContainer.scrollingElement || scrollContainer.documentElement;\n                }\n                return scrollContainer;\n            },\n            scrollTo: function (node, toStart) {\n                var doc = node.ownerDocument;\n                var wnd = Dom.windowFromDocument(doc);\n                var windowHeight = wnd.innerHeight;\n                var scrollContainer = Dom.scrollContainer(doc);\n                var element, elementTop, elementHeight, marker;\n                if (Dom.isDataNode(node)) {\n                    if (toStart) {\n                        marker = Dom.create(doc, 'span', { 'innerHTML': '&#xfeff;' });\n                        Dom.insertBefore(marker, node);\n                        element = $(marker);\n                    } else {\n                        element = $(node.parentNode);\n                    }\n                } else {\n                    element = $(node);\n                }\n                elementTop = element.offset().top;\n                elementHeight = element[0].offsetHeight;\n                if (toStart || !elementHeight) {\n                    elementHeight = parseInt(element.css('line-height'), 10) || Math.ceil(1.2 * parseInt(element.css('font-size'), 10)) || 15;\n                }\n                if (marker) {\n                    Dom.remove(marker);\n                }\n                if (elementHeight + elementTop > scrollContainer.scrollTop + windowHeight) {\n                    scrollContainer.scrollTop = elementHeight + elementTop - windowHeight;\n                }\n            },\n            persistScrollTop: function (doc) {\n                persistedScrollTop = Dom.scrollContainer(doc).scrollTop;\n            },\n            offset: function (target, offsetParent) {\n                var result = {\n                    top: target.offsetTop,\n                    left: target.offsetLeft\n                };\n                var parent = target.offsetParent;\n                while (parent && (!offsetParent || Dom.isAncestorOf(offsetParent, parent))) {\n                    result.top += parent.offsetTop;\n                    result.left += parent.offsetLeft;\n                    parent = parent.offsetParent;\n                }\n                return result;\n            },\n            restoreScrollTop: function (doc) {\n                if (typeof persistedScrollTop == 'number') {\n                    Dom.scrollContainer(doc).scrollTop = persistedScrollTop;\n                    persistedScrollTop = undefined;\n                }\n            },\n            insertAt: function (parent, newElement, position) {\n                parent.insertBefore(newElement, parent.childNodes[position] || null);\n            },\n            insertBefore: function (newElement, referenceElement) {\n                if (referenceElement.parentNode) {\n                    return referenceElement.parentNode.insertBefore(newElement, referenceElement);\n                } else {\n                    return referenceElement;\n                }\n            },\n            insertAfter: function (newElement, referenceElement) {\n                return referenceElement.parentNode.insertBefore(newElement, referenceElement.nextSibling);\n            },\n            remove: function (node) {\n                if (node.parentNode) {\n                    node.parentNode.removeChild(node);\n                }\n            },\n            removeChildren: function (node) {\n                while (node.firstChild) {\n                    node.removeChild(node.firstChild);\n                }\n            },\n            removeTextSiblings: function (node) {\n                var parentNode = node.parentNode;\n                while (node.nextSibling && node.nextSibling.nodeType == 3) {\n                    parentNode.removeChild(node.nextSibling);\n                }\n                while (node.previousSibling && node.previousSibling.nodeType == 3) {\n                    parentNode.removeChild(node.previousSibling);\n                }\n            },\n            trim: function (parent) {\n                for (var i = parent.childNodes.length - 1; i >= 0; i--) {\n                    var node = parent.childNodes[i];\n                    if (Dom.isDataNode(node)) {\n                        if (!Dom.stripBom(node.nodeValue).length) {\n                            Dom.remove(node);\n                        }\n                    } else if (node.className != KMARKER) {\n                        Dom.trim(node);\n                        if (!Dom.isEmpty(node) && node.childNodes.length === 0 || Dom.isBlock(node) && Dom.allWhitespaceContent(node)) {\n                            Dom.remove(node);\n                        }\n                    }\n                }\n                return parent;\n            },\n            closest: function (node, tag) {\n                while (node && Dom.name(node) != tag) {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            closestBy: function (node, condition, rootCondition) {\n                while (node && !condition(node)) {\n                    if (rootCondition && rootCondition(node)) {\n                        return null;\n                    }\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            sibling: function (node, direction) {\n                do {\n                    node = node[direction];\n                } while (node && node.nodeType != 1);\n                return node;\n            },\n            next: function (node) {\n                return Dom.sibling(node, 'nextSibling');\n            },\n            prev: function (node) {\n                return Dom.sibling(node, 'previousSibling');\n            },\n            parentOfType: function (node, tags) {\n                do {\n                    node = node.parentNode;\n                } while (node && !Dom.ofType(node, tags));\n                return node;\n            },\n            ofType: function (node, tags) {\n                return $.inArray(Dom.name(node), tags) >= 0;\n            },\n            changeTag: function (referenceElement, tagName, skipAttributes) {\n                var newElement = Dom.create(referenceElement.ownerDocument, tagName), attributes = referenceElement.attributes, i, len, name, value, attribute;\n                if (!skipAttributes) {\n                    for (i = 0, len = attributes.length; i < len; i++) {\n                        attribute = attributes[i];\n                        if (attribute.specified) {\n                            name = attribute.nodeName;\n                            value = attribute.nodeValue;\n                            if (name == CLASS) {\n                                newElement.className = value;\n                            } else if (name == STYLE) {\n                                newElement.style.cssText = referenceElement.style.cssText;\n                            } else {\n                                newElement.setAttribute(name, value);\n                            }\n                        }\n                    }\n                }\n                while (referenceElement.firstChild) {\n                    newElement.appendChild(referenceElement.firstChild);\n                }\n                Dom.insertBefore(newElement, referenceElement);\n                Dom.remove(referenceElement);\n                return newElement;\n            },\n            editableParent: function (node) {\n                while (node && (node.nodeType == 3 || node.contentEditable !== 'true')) {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            wrap: function (node, wrapper) {\n                Dom.insertBefore(wrapper, node);\n                wrapper.appendChild(node);\n                return wrapper;\n            },\n            unwrap: function (node) {\n                var parent = node.parentNode;\n                while (node.firstChild) {\n                    parent.insertBefore(node.firstChild, node);\n                }\n                parent.removeChild(node);\n            },\n            wrapper: function (node) {\n                var wrapper = Dom.closestBy(node, function (el) {\n                    return el.parentNode && Dom.significantNodes(el.parentNode.childNodes).length > 1;\n                });\n                return $(wrapper).is('body,.k-editor') ? undefined : wrapper;\n            },\n            create: function (document, tagName, attributes) {\n                return Dom.attr(document.createElement(tagName), attributes);\n            },\n            createEmptyNode: function (document, tagName, attributes) {\n                var node = Dom.attr(document.createElement(tagName), attributes);\n                node.innerHTML = '\\uFEFF';\n                return node;\n            },\n            attr: function (element, attributes) {\n                attributes = extend({}, attributes);\n                if (attributes && STYLE in attributes) {\n                    Dom.style(element, attributes.style);\n                    delete attributes.style;\n                }\n                for (var attr in attributes) {\n                    if (attributes[attr] === null) {\n                        element.removeAttribute(attr);\n                        delete attributes[attr];\n                    } else if (attr == 'className') {\n                        element[attr] = attributes[attr];\n                    }\n                }\n                return extend(element, attributes);\n            },\n            mergeAttributes: function (origin, target) {\n                if (!origin.attributes.length) {\n                    return;\n                }\n                $.each(origin.attributes, function () {\n                    if (this.name !== 'contenteditable') {\n                        $(target).attr(this.name, this.value);\n                    }\n                });\n            },\n            style: function (node, value) {\n                $(node).css(value || {});\n            },\n            unstyle: function (node, value) {\n                for (var key in value) {\n                    if (key == FLOAT) {\n                        key = kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT;\n                    }\n                    node.style[key] = '';\n                }\n                if (node.style.cssText === '') {\n                    node.removeAttribute(STYLE);\n                }\n            },\n            inlineStyle: function (body, name, attributes) {\n                var span = $(Dom.create(body.ownerDocument, name, attributes)), style;\n                body.appendChild(span[0]);\n                style = map(cssAttributes, function (value) {\n                    if (browser.msie && value == 'line-height' && span.css(value) == '1px') {\n                        return 'line-height:1.5';\n                    } else {\n                        return value + ':' + span.css(value);\n                    }\n                }).join(';');\n                span.remove();\n                return style;\n            },\n            getEffectiveBackground: function (element) {\n                var backgroundStyle = element.css('background-color') || '';\n                if (backgroundStyle.indexOf('rgba(0, 0, 0, 0') < 0 && backgroundStyle !== 'transparent') {\n                    return backgroundStyle;\n                } else if (element[0].tagName.toLowerCase() === 'html') {\n                    return 'Window';\n                } else {\n                    return Dom.getEffectiveBackground(element.parent());\n                }\n            },\n            innerText: function (node) {\n                var text = node.innerHTML;\n                text = text.replace(/<!--(.|\\s)*?-->/gi, '');\n                text = text.replace(/<\\/?[^>]+?\\/?>/gm, '');\n                return text;\n            },\n            removeClass: function (node, classNames) {\n                var className = ' ' + node.className + ' ', classes = classNames.split(' '), i, len;\n                for (i = 0, len = classes.length; i < len; i++) {\n                    className = className.replace(' ' + classes[i] + ' ', ' ');\n                }\n                className = $.trim(className);\n                if (className.length) {\n                    node.className = className;\n                } else {\n                    node.removeAttribute(CLASS);\n                }\n            },\n            commonAncestor: function () {\n                var count = arguments.length, paths = [], minPathLength = Infinity, output = null, i, ancestors, node, first, j;\n                if (!count) {\n                    return null;\n                }\n                if (count == 1) {\n                    return arguments[0];\n                }\n                for (i = 0; i < count; i++) {\n                    ancestors = [];\n                    node = arguments[i];\n                    while (node) {\n                        ancestors.push(node);\n                        node = node.parentNode;\n                    }\n                    paths.push(ancestors.reverse());\n                    minPathLength = Math.min(minPathLength, ancestors.length);\n                }\n                if (count == 1) {\n                    return paths[0][0];\n                }\n                for (i = 0; i < minPathLength; i++) {\n                    first = paths[0][i];\n                    for (j = 1; j < count; j++) {\n                        if (first != paths[j][i]) {\n                            return output;\n                        }\n                    }\n                    output = first;\n                }\n                return output;\n            },\n            closestSplittableParent: function (nodes) {\n                var result;\n                if (nodes.length == 1) {\n                    result = Dom.parentOfType(nodes[0], [\n                        'ul',\n                        'ol'\n                    ]);\n                } else {\n                    result = Dom.commonAncestor.apply(null, nodes);\n                }\n                if (!result) {\n                    result = Dom.parentOfType(nodes[0], [\n                        'p',\n                        'td'\n                    ]) || nodes[0].ownerDocument.body;\n                }\n                if (Dom.isInline(result)) {\n                    result = Dom.blockParentOrBody(result);\n                }\n                var editableParents = map(nodes, Dom.editableParent);\n                var editableAncestor = Dom.commonAncestor(editableParents)[0];\n                if ($.contains(result, editableAncestor)) {\n                    result = editableAncestor;\n                }\n                return result;\n            },\n            closestEditable: function (node, types) {\n                var closest;\n                var editable = Dom.editableParent(node);\n                if (Dom.ofType(node, types)) {\n                    closest = node;\n                } else {\n                    closest = Dom.parentOfType(node, types);\n                }\n                if (closest && editable && $.contains(closest, editable)) {\n                    closest = editable;\n                } else if (!closest && editable) {\n                    closest = editable;\n                }\n                return closest;\n            },\n            closestEditableOfType: function (node, types) {\n                var editable = Dom.closestEditable(node, types);\n                if (editable && Dom.ofType(editable, types) && !$(editable).is('.k-editor')) {\n                    return editable;\n                }\n            },\n            filter: function (tagName, nodes, invert) {\n                var filterFn = function (node) {\n                    return Dom.name(node) == tagName;\n                };\n                return Dom.filterBy(nodes, filterFn, invert);\n            },\n            filterBy: function (nodes, condition, invert) {\n                var i = 0;\n                var len = nodes.length;\n                var result = [];\n                var match;\n                for (; i < len; i++) {\n                    match = condition(nodes[i]);\n                    if (match && !invert || !match && invert) {\n                        result.push(nodes[i]);\n                    }\n                }\n                return result;\n            },\n            ensureTrailingBreaks: function (node) {\n                var elements = $(node).find('p,td,th');\n                var length = elements.length;\n                var i = 0;\n                if (length) {\n                    for (; i < length; i++) {\n                        Dom.ensureTrailingBreak(elements[i]);\n                    }\n                } else {\n                    Dom.ensureTrailingBreak(node);\n                }\n            },\n            removeTrailingBreak: function (node) {\n                $(node).find('br[type=_moz],.k-br').remove();\n            },\n            ensureTrailingBreak: function (node) {\n                Dom.removeTrailingBreak(node);\n                var lastChild = node.lastChild;\n                var name = lastChild && Dom.name(lastChild);\n                var br;\n                if (!name || name != 'br' && name != 'img' || name == 'br' && lastChild.className != 'k-br') {\n                    br = node.ownerDocument.createElement('br');\n                    br.className = 'k-br';\n                    node.appendChild(br);\n                }\n            }\n        };\n        kendo.ui.editor.Dom = Dom;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/serializer', ['editor/dom'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo;\n        var Editor = kendo.ui.editor;\n        var dom = Editor.Dom;\n        var extend = $.extend;\n        var fontSizeMappings = 'xx-small,x-small,small,medium,large,x-large,xx-large'.split(',');\n        var quoteRe = /\"/g;\n        var brRe = /<br[^>]*>/i;\n        var pixelRe = /^\\d+(\\.\\d*)?(px)?$/i;\n        var emptyPRe = /<p>(?:&nbsp;)?<\\/p>/i;\n        var cssDeclaration = /(\\*?[-#\\/\\*\\\\\\w]+(?:\\[[0-9a-z_-]+\\])?)\\s*:\\s*((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/g;\n        var sizzleAttr = /^sizzle-\\d+/i;\n        var scriptAttr = /^k-script-/i;\n        var onerrorRe = /\\s*onerror\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/i;\n        var br = '<br class=\"k-br\">';\n        var div = document.createElement('div');\n        div.innerHTML = ' <hr>';\n        var supportsLeadingWhitespace = div.firstChild.nodeType === 3;\n        div = null;\n        var isFunction = $.isFunction;\n        var TD = 'td';\n        var Serializer = {\n            toEditableHtml: function (html) {\n                return (html || '').replace(/<!\\[CDATA\\[(.*)?\\]\\]>/g, '<!--[CDATA[$1]]-->').replace(/<(\\/?)script([^>]*)>/gi, '<$1k:script$2>').replace(/<img([^>]*)>/gi, function (match) {\n                    return match.replace(onerrorRe, '');\n                }).replace(/(<\\/?img[^>]*>)[\\r\\n\\v\\f\\t ]+/gi, '$1').replace(/^<(table|blockquote)/i, br + '<$1').replace(/^[\\s]*(&nbsp;|\\u00a0)/i, '$1').replace(/<\\/(table|blockquote)>$/i, '</$1>' + br);\n            },\n            _toEditableImmutables: function (body) {\n                var immutable = Editor.Immutables.immutable, emptyTextNode = dom.emptyTextNode, first = body.firstChild, last = body.lastChild;\n                while (emptyTextNode(first)) {\n                    first = first.nextSibling;\n                }\n                while (emptyTextNode(last)) {\n                    last = last.previousSibling;\n                }\n                if (first && immutable(first)) {\n                    $(br).prependTo(body);\n                }\n                if (last && immutable(last)) {\n                    $(br).appendTo(body);\n                }\n            },\n            _fillEmptyElements: function (body) {\n                $(body).find('p,td').each(function () {\n                    var p = $(this);\n                    if (/^\\s*$/g.test(p.text()) && !p.find('img,input').length) {\n                        var node = this;\n                        while (node.firstChild && node.firstChild.nodeType != 3) {\n                            node = node.firstChild;\n                        }\n                        if (node.nodeType == 1 && !dom.empty[dom.name(node)]) {\n                            if (dom.is(node, 'td')) {\n                                node.innerHTML = kendo.ui.editor.emptyTableCellContent;\n                            } else {\n                                node.innerHTML = kendo.ui.editor.emptyElementContent;\n                            }\n                        }\n                    }\n                });\n            },\n            _removeSystemElements: function (body) {\n                $('.k-paste-container', body).remove();\n            },\n            _resetOrderedLists: function (root) {\n                var ols = root.getElementsByTagName('ol'), i, ol, originalStart;\n                for (i = 0; i < ols.length; i++) {\n                    ol = ols[i];\n                    originalStart = ol.getAttribute('start');\n                    ol.setAttribute('start', 1);\n                    if (originalStart) {\n                        ol.setAttribute('start', originalStart);\n                    } else {\n                        ol.removeAttribute(originalStart);\n                    }\n                }\n            },\n            _preventScriptExecution: function (root) {\n                $(root).find('*').each(function () {\n                    var attributes = this.attributes;\n                    var attribute, i, l, name;\n                    var attributesToRemove = [];\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        if (attribute.specified && /^on/i.test(name)) {\n                            this.setAttribute('k-script-' + name, attribute.value);\n                            attributesToRemove.push(name);\n                        }\n                    }\n                    for (i = 0, l = attributesToRemove.length; i < l; i++) {\n                        this.removeAttribute(attributesToRemove[i]);\n                    }\n                });\n            },\n            htmlToDom: function (html, root, options) {\n                var browser = kendo.support.browser;\n                var msie = browser.msie;\n                var legacyIE = msie && browser.version < 9;\n                var originalSrc = 'originalsrc';\n                var originalHref = 'originalhref';\n                var o = options || {};\n                var immutables = o.immutables;\n                html = Serializer.toEditableHtml(html);\n                if (legacyIE) {\n                    html = '<br/>' + html;\n                    html = html.replace(/href\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/, originalHref + '=\"$1\"');\n                    html = html.replace(/src\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/, originalSrc + '=\"$1\"');\n                }\n                if (isFunction(o.custom)) {\n                    html = o.custom(html) || html;\n                }\n                root.innerHTML = html;\n                if (immutables) {\n                    immutables.deserialize(root);\n                }\n                if (legacyIE) {\n                    dom.remove(root.firstChild);\n                    $(root).find('k\\\\:script,script,link,img,a').each(function () {\n                        var node = this;\n                        if (node[originalHref]) {\n                            node.setAttribute('href', node[originalHref]);\n                            node.removeAttribute(originalHref);\n                        }\n                        if (node[originalSrc]) {\n                            node.setAttribute('src', node[originalSrc]);\n                            node.removeAttribute(originalSrc);\n                        }\n                    });\n                } else if (msie) {\n                    dom.normalize(root);\n                    Serializer._resetOrderedLists(root);\n                }\n                Serializer._preventScriptExecution(root);\n                Serializer._fillEmptyElements(root);\n                Serializer._removeSystemElements(root);\n                Serializer._toEditableImmutables(root);\n                $('table', root).addClass('k-table');\n                return root;\n            },\n            domToXhtml: function (root, options) {\n                var result = [];\n                var immutables = options && options.immutables;\n                function semanticFilter(attributes) {\n                    return $.grep(attributes, function (attr) {\n                        return attr.name != 'style';\n                    });\n                }\n                function mapStart(node, tag) {\n                    result.push('<' + tag);\n                    attr(node);\n                    result.push('>');\n                }\n                var tagMap = {\n                    iframe: {\n                        start: function (node) {\n                            mapStart(node, 'iframe');\n                        },\n                        end: function () {\n                            result.push('</iframe>');\n                        }\n                    },\n                    'k:script': {\n                        start: function (node) {\n                            mapStart(node, 'script');\n                        },\n                        end: function () {\n                            result.push('</script>');\n                        },\n                        skipEncoding: true\n                    },\n                    span: {\n                        semantic: true,\n                        start: function (node) {\n                            var style = node.style;\n                            var attributes = specifiedAttributes(node);\n                            var semanticAttributes = semanticFilter(attributes);\n                            if (semanticAttributes.length) {\n                                result.push('<span');\n                                attr(node, semanticAttributes);\n                                result.push('>');\n                            }\n                            if (style.textDecoration == 'underline') {\n                                result.push('<u>');\n                            }\n                            var font = [];\n                            if (style.color) {\n                                font.push('color=\"' + dom.toHex(style.color) + '\"');\n                            }\n                            if (style.fontFamily) {\n                                font.push('face=\"' + style.fontFamily + '\"');\n                            }\n                            if (style.fontSize) {\n                                var size = $.inArray(style.fontSize, fontSizeMappings);\n                                font.push('size=\"' + size + '\"');\n                            }\n                            if (font.length) {\n                                result.push('<font ' + font.join(' ') + '>');\n                            }\n                        },\n                        end: function (node) {\n                            var style = node.style;\n                            if (style.color || style.fontFamily || style.fontSize) {\n                                result.push('</font>');\n                            }\n                            if (style.textDecoration == 'underline') {\n                                result.push('</u>');\n                            }\n                            if (semanticFilter(specifiedAttributes(node)).length) {\n                                result.push('</span>');\n                            }\n                        }\n                    },\n                    strong: {\n                        semantic: true,\n                        start: function (node) {\n                            mapStart(node, 'b');\n                        },\n                        end: function () {\n                            result.push('</b>');\n                        }\n                    },\n                    em: {\n                        semantic: true,\n                        start: function (node) {\n                            mapStart(node, 'i');\n                        },\n                        end: function () {\n                            result.push('</i>');\n                        }\n                    },\n                    b: {\n                        semantic: false,\n                        start: function (node) {\n                            mapStart(node, 'strong');\n                        },\n                        end: function () {\n                            result.push('</strong>');\n                        }\n                    },\n                    i: {\n                        semantic: false,\n                        start: function (node) {\n                            mapStart(node, 'em');\n                        },\n                        end: function () {\n                            result.push('</em>');\n                        }\n                    },\n                    u: {\n                        semantic: false,\n                        start: function (node) {\n                            result.push('<span');\n                            var attributes = specifiedAttributes(node);\n                            var style = $(attributes).filter(function (i, item) {\n                                return item.name == 'style';\n                            })[0];\n                            var styleObj = {\n                                nodeName: 'style',\n                                value: 'text-decoration:underline;'\n                            };\n                            if (style) {\n                                styleObj.value = style.value;\n                                if (!/text-decoration/i.test(styleObj.value)) {\n                                    styleObj.value = 'text-decoration:underline;' + styleObj.value;\n                                }\n                                attributes.splice($.inArray(style, attributes), 1);\n                            }\n                            attributes.push(styleObj);\n                            attr(node, attributes);\n                            result.push('>');\n                        },\n                        end: function () {\n                            result.push('</span>');\n                        }\n                    },\n                    font: {\n                        semantic: false,\n                        start: function (node) {\n                            result.push('<span style=\"');\n                            var color = node.getAttribute('color');\n                            var size = fontSizeMappings[node.getAttribute('size')];\n                            var face = node.getAttribute('face');\n                            if (color) {\n                                result.push('color:');\n                                result.push(dom.toHex(color));\n                                result.push(';');\n                            }\n                            if (face) {\n                                result.push('font-family:');\n                                result.push(face);\n                                result.push(';');\n                            }\n                            if (size) {\n                                result.push('font-size:');\n                                result.push(size);\n                                result.push(';');\n                            }\n                            result.push('\">');\n                        },\n                        end: function () {\n                            result.push('</span>');\n                        }\n                    }\n                };\n                tagMap.script = tagMap['k:script'];\n                options = options || {};\n                if (typeof options.semantic == 'undefined') {\n                    options.semantic = true;\n                }\n                function cssProperties(cssText) {\n                    var trim = $.trim;\n                    var css = trim(cssText);\n                    var match;\n                    var property, value;\n                    var properties = [];\n                    cssDeclaration.lastIndex = 0;\n                    while (true) {\n                        match = cssDeclaration.exec(css);\n                        if (!match) {\n                            break;\n                        }\n                        property = trim(match[1].toLowerCase());\n                        value = trim(match[2]);\n                        if (property == 'font-size-adjust' || property == 'font-stretch') {\n                            continue;\n                        }\n                        if (property.indexOf('color') >= 0) {\n                            value = dom.toHex(value);\n                        } else if (property.indexOf('font') >= 0) {\n                            value = value.replace(quoteRe, '\\'');\n                        } else if (/\\burl\\(/g.test(value)) {\n                            value = value.replace(quoteRe, '');\n                        }\n                        properties.push({\n                            property: property,\n                            value: value\n                        });\n                    }\n                    return properties;\n                }\n                function styleAttr(cssText) {\n                    var properties = cssProperties(cssText);\n                    var i;\n                    for (i = 0; i < properties.length; i++) {\n                        result.push(properties[i].property);\n                        result.push(':');\n                        result.push(properties[i].value);\n                        result.push(';');\n                    }\n                }\n                function specifiedAttributes(node) {\n                    var result = [];\n                    var attributes = node.attributes;\n                    var attribute, i, l;\n                    var name, value, specified;\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        value = attribute.value;\n                        specified = attribute.specified;\n                        if (name == 'value' && 'value' in node && node.value) {\n                            specified = true;\n                        } else if (name == 'type' && value == 'text') {\n                            specified = true;\n                        } else if (name == 'class' && !value) {\n                            specified = false;\n                        } else if (sizzleAttr.test(name)) {\n                            specified = false;\n                        } else if (name == 'complete') {\n                            specified = false;\n                        } else if (name == 'altHtml') {\n                            specified = false;\n                        } else if (name == 'start' && dom.is(node, 'ul')) {\n                            specified = false;\n                        } else if (name == 'start' && dom.is(node, 'ol') && value == '1') {\n                            specified = false;\n                        } else if (name.indexOf('_moz') >= 0) {\n                            specified = false;\n                        } else if (scriptAttr.test(name)) {\n                            specified = !!options.scripts;\n                        } else if (name == 'data-role' && value == 'resizable' && (dom.is(node, 'tr') || dom.is(node, 'td'))) {\n                            specified = false;\n                        }\n                        if (specified) {\n                            result.push(attribute);\n                        }\n                    }\n                    return result;\n                }\n                function attr(node, attributes) {\n                    var i, l, attribute, name, value;\n                    attributes = attributes || specifiedAttributes(node);\n                    if (dom.is(node, 'img')) {\n                        var width = node.style.width, height = node.style.height, $node = $(node);\n                        if (width && pixelRe.test(width)) {\n                            $node.attr('width', parseInt(width, 10));\n                            dom.unstyle(node, { width: undefined });\n                        }\n                        if (height && pixelRe.test(height)) {\n                            $node.attr('height', parseInt(height, 10));\n                            dom.unstyle(node, { height: undefined });\n                        }\n                    }\n                    if (!attributes.length) {\n                        return;\n                    }\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        value = attribute.value;\n                        if (name == 'class' && value == 'k-table') {\n                            continue;\n                        }\n                        name = name.replace(scriptAttr, '');\n                        result.push(' ');\n                        result.push(name);\n                        result.push('=\"');\n                        if (name == 'style') {\n                            styleAttr(value || node.style.cssText);\n                        } else if (name == 'src' || name == 'href') {\n                            result.push(kendo.htmlEncode(node.getAttribute(name, 2)));\n                        } else {\n                            result.push(dom.fillAttrs[name] ? name : value);\n                        }\n                        result.push('\"');\n                    }\n                }\n                function children(node, skip, skipEncoding) {\n                    for (var childNode = node.firstChild; childNode; childNode = childNode.nextSibling) {\n                        child(childNode, skip, skipEncoding);\n                    }\n                }\n                function text(node) {\n                    return node.nodeValue.replace(/\\ufeff/g, '');\n                }\n                function isEmptyBomNode(node) {\n                    if (dom.isBom(node)) {\n                        do {\n                            node = node.parentNode;\n                            if (dom.is(node, TD) && node.childNodes.length === 1) {\n                                return true;\n                            }\n                            if (node.childNodes.length !== 1) {\n                                return false;\n                            }\n                        } while (!dom.isBlock(node));\n                        return true;\n                    }\n                    return false;\n                }\n                function child(node, skip, skipEncoding) {\n                    var nodeType = node.nodeType, tagName, mapper, parent, value, previous, jqNode;\n                    if (immutables && Editor.Immutables.immutable(node)) {\n                        result.push(immutables.serialize(node));\n                    } else if (nodeType == 1) {\n                        tagName = dom.name(node);\n                        jqNode = $(node);\n                        if (jqNode.hasClass('k-table-resize-handle-wrapper') || jqNode.hasClass('k-column-resize-handle-wrapper') || jqNode.hasClass('k-row-resize-handle-wrapper')) {\n                            return;\n                        }\n                        if (!tagName || dom.insignificant(node)) {\n                            return;\n                        }\n                        if (!options.scripts && (tagName == 'script' || tagName == 'k:script')) {\n                            return;\n                        }\n                        mapper = tagMap[tagName];\n                        if (mapper) {\n                            if (typeof mapper.semantic == 'undefined' || options.semantic ^ mapper.semantic) {\n                                mapper.start(node);\n                                children(node, false, mapper.skipEncoding);\n                                mapper.end(node);\n                                return;\n                            }\n                        }\n                        result.push('<');\n                        result.push(tagName);\n                        attr(node);\n                        if (dom.empty[tagName]) {\n                            result.push(' />');\n                        } else {\n                            result.push('>');\n                            children(node, skip || dom.is(node, 'pre'));\n                            result.push('</');\n                            result.push(tagName);\n                            result.push('>');\n                        }\n                    } else if (nodeType == 3) {\n                        if (isEmptyBomNode(node)) {\n                            result.push('&nbsp;');\n                            return;\n                        }\n                        value = text(node);\n                        if (!skip && supportsLeadingWhitespace) {\n                            parent = node.parentNode;\n                            previous = node.previousSibling;\n                            if (!previous) {\n                                previous = (dom.isInline(parent) ? parent : node).previousSibling;\n                            }\n                            if (!previous || previous.innerHTML === '' || dom.isBlock(previous)) {\n                                value = value.replace(/^[\\r\\n\\v\\f\\t ]+/, '');\n                            }\n                            value = value.replace(/ +/, ' ');\n                        }\n                        result.push(skipEncoding ? value : dom.encode(value, options));\n                    } else if (nodeType == 4) {\n                        result.push('<![CDATA[');\n                        result.push(node.data);\n                        result.push(']]>');\n                    } else if (nodeType == 8) {\n                        if (node.data.indexOf('[CDATA[') < 0) {\n                            result.push('<!--');\n                            result.push(node.data);\n                            result.push('-->');\n                        } else {\n                            result.push('<!');\n                            result.push(node.data);\n                            result.push('>');\n                        }\n                    }\n                }\n                function textOnly(root) {\n                    var childrenCount = root.childNodes.length;\n                    var textChild = childrenCount && root.firstChild.nodeType == 3;\n                    return textChild && (childrenCount == 1 || childrenCount == 2 && dom.insignificant(root.lastChild));\n                }\n                function runCustom() {\n                    if ($.isFunction(options.custom)) {\n                        result = options.custom(result) || result;\n                    }\n                }\n                if (textOnly(root)) {\n                    result = dom.encode(text(root.firstChild).replace(/[\\r\\n\\v\\f\\t ]+/, ' '), options);\n                    runCustom();\n                    return result;\n                }\n                children(root);\n                result = result.join('');\n                runCustom();\n                if (result.replace(brRe, '').replace(emptyPRe, '') === '') {\n                    return '';\n                }\n                return result;\n            }\n        };\n        extend(Editor, { Serializer: Serializer });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/components', ['editor/serializer'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, DropDownList = kendo.ui.DropDownList, dom = kendo.ui.editor.Dom;\n        var SelectBox = DropDownList.extend({\n            init: function (element, options) {\n                var that = this;\n                DropDownList.fn.init.call(that, element, options);\n                if (kendo.support.mobileOS.ios) {\n                    this._initSelectOverlay();\n                    this.bind('dataBound', $.proxy(this._initSelectOverlay, this));\n                }\n                that.text(that.options.title);\n                that.element.attr('title', that.options.title);\n                that.wrapper.attr('title', that.options.title);\n                that.bind('open', function () {\n                    if (that.options.autoSize) {\n                        var list = that.list, listWidth;\n                        list.css({\n                            whiteSpace: 'nowrap',\n                            width: 'auto'\n                        });\n                        listWidth = list.width();\n                        if (listWidth > 0) {\n                            listWidth += 20;\n                        } else {\n                            listWidth = that._listWidth;\n                        }\n                        list.css('width', listWidth + kendo.support.scrollbar());\n                        that._listWidth = listWidth;\n                    }\n                });\n            },\n            options: {\n                name: 'SelectBox',\n                index: -1\n            },\n            _initSelectOverlay: function () {\n                var selectBox = this;\n                var value = selectBox.value();\n                var view = this.dataSource.view();\n                var item;\n                var html = '';\n                var encode = kendo.htmlEncode;\n                for (var i = 0; i < view.length; i++) {\n                    item = view[i];\n                    html += '<option value=\\'' + encode(item.value) + '\\'';\n                    if (item.value == value) {\n                        html += ' selected';\n                    }\n                    html += '>' + encode(item.text) + '</option>';\n                }\n                var select = $('<select class=\\'k-select-overlay\\'>' + html + '</select>');\n                var wrapper = $(this.element).closest('.k-widget');\n                wrapper.next('.k-select-overlay').remove();\n                select.insertAfter(wrapper);\n                select.on('change', function () {\n                    selectBox.value(this.value);\n                    selectBox.trigger('change');\n                });\n            },\n            value: function (value) {\n                var that = this, result = DropDownList.fn.value.call(that, value);\n                if (value === undefined) {\n                    return result;\n                }\n                if (!DropDownList.fn.value.call(that)) {\n                    that.text(that.options.title);\n                }\n            },\n            decorate: function (body) {\n                var that = this, dataSource = that.dataSource, items = dataSource.data(), i, tag, className, style;\n                if (body) {\n                    that.list.css('background-color', dom.getEffectiveBackground($(body)));\n                }\n                for (i = 0; i < items.length; i++) {\n                    tag = items[i].tag || 'span';\n                    className = items[i].className;\n                    style = dom.inlineStyle(body, tag, { className: className });\n                    style = style.replace(/\"/g, '\\'');\n                    items[i].style = style + ';display:inline-block';\n                }\n                dataSource.trigger('change');\n            }\n        });\n        kendo.ui.plugin(SelectBox);\n        kendo.ui.editor.SelectBox = SelectBox;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/range', ['editor/components'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, browser = kendo.support.browser, dom = Editor.Dom, findNodeIndex = dom.findNodeIndex, isDataNode = dom.isDataNode, findClosestAncestor = dom.findClosestAncestor, getNodeLength = dom.getNodeLength, normalize = dom.normalize;\n        var SelectionUtils = {\n            selectionFromWindow: function (window) {\n                if (!('getSelection' in window)) {\n                    return new W3CSelection(window.document);\n                }\n                return window.getSelection();\n            },\n            selectionFromRange: function (range) {\n                var rangeDocument = RangeUtils.documentFromRange(range);\n                return SelectionUtils.selectionFromDocument(rangeDocument);\n            },\n            selectionFromDocument: function (document) {\n                return SelectionUtils.selectionFromWindow(dom.windowFromDocument(document));\n            }\n        };\n        var W3CRange = Class.extend({\n            init: function (doc) {\n                $.extend(this, {\n                    ownerDocument: doc,\n                    startContainer: doc,\n                    endContainer: doc,\n                    commonAncestorContainer: doc,\n                    startOffset: 0,\n                    endOffset: 0,\n                    collapsed: true\n                });\n            },\n            setStart: function (node, offset) {\n                this.startContainer = node;\n                this.startOffset = offset;\n                updateRangeProperties(this);\n                fixIvalidRange(this, true);\n            },\n            setEnd: function (node, offset) {\n                this.endContainer = node;\n                this.endOffset = offset;\n                updateRangeProperties(this);\n                fixIvalidRange(this, false);\n            },\n            setStartBefore: function (node) {\n                this.setStart(node.parentNode, findNodeIndex(node));\n            },\n            setStartAfter: function (node) {\n                this.setStart(node.parentNode, findNodeIndex(node) + 1);\n            },\n            setEndBefore: function (node) {\n                this.setEnd(node.parentNode, findNodeIndex(node));\n            },\n            setEndAfter: function (node) {\n                this.setEnd(node.parentNode, findNodeIndex(node) + 1);\n            },\n            selectNode: function (node) {\n                this.setStartBefore(node);\n                this.setEndAfter(node);\n            },\n            selectNodeContents: function (node) {\n                this.setStart(node, 0);\n                this.setEnd(node, node[node.nodeType === 1 ? 'childNodes' : 'nodeValue'].length);\n            },\n            collapse: function (toStart) {\n                var that = this;\n                if (toStart) {\n                    that.setEnd(that.startContainer, that.startOffset);\n                } else {\n                    that.setStart(that.endContainer, that.endOffset);\n                }\n            },\n            deleteContents: function () {\n                var that = this, range = that.cloneRange();\n                if (that.startContainer != that.commonAncestorContainer) {\n                    that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n                }\n                that.collapse(true);\n                (function deleteSubtree(iterator) {\n                    while (iterator.next()) {\n                        if (iterator.hasPartialSubtree()) {\n                            deleteSubtree(iterator.getSubtreeIterator());\n                        } else {\n                            iterator.remove();\n                        }\n                    }\n                }(new RangeIterator(range)));\n            },\n            cloneContents: function () {\n                var document = RangeUtils.documentFromRange(this);\n                return function cloneSubtree(iterator) {\n                    var node, frag = document.createDocumentFragment();\n                    while (node = iterator.next()) {\n                        node = node.cloneNode(!iterator.hasPartialSubtree());\n                        if (iterator.hasPartialSubtree()) {\n                            node.appendChild(cloneSubtree(iterator.getSubtreeIterator()));\n                        }\n                        frag.appendChild(node);\n                    }\n                    return frag;\n                }(new RangeIterator(this));\n            },\n            extractContents: function () {\n                var that = this, range = that.cloneRange();\n                if (that.startContainer != that.commonAncestorContainer) {\n                    that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n                }\n                that.collapse(true);\n                var document = RangeUtils.documentFromRange(that);\n                return function extractSubtree(iterator) {\n                    var node, frag = document.createDocumentFragment();\n                    while (node = iterator.next()) {\n                        if (iterator.hasPartialSubtree()) {\n                            node = node.cloneNode(false);\n                            node.appendChild(extractSubtree(iterator.getSubtreeIterator()));\n                        } else {\n                            iterator.remove(that.originalRange);\n                        }\n                        frag.appendChild(node);\n                    }\n                    return frag;\n                }(new RangeIterator(range));\n            },\n            insertNode: function (node) {\n                var that = this;\n                if (isDataNode(that.startContainer)) {\n                    if (that.startOffset != that.startContainer.nodeValue.length) {\n                        dom.splitDataNode(that.startContainer, that.startOffset);\n                    }\n                    dom.insertAfter(node, that.startContainer);\n                } else {\n                    dom.insertAt(that.startContainer, node, that.startOffset);\n                }\n                that.setStart(that.startContainer, that.startOffset);\n            },\n            cloneRange: function () {\n                return $.extend(new W3CRange(this.ownerDocument), {\n                    startContainer: this.startContainer,\n                    endContainer: this.endContainer,\n                    commonAncestorContainer: this.commonAncestorContainer,\n                    startOffset: this.startOffset,\n                    endOffset: this.endOffset,\n                    collapsed: this.collapsed,\n                    originalRange: this\n                });\n            },\n            toString: function () {\n                var startNodeName = this.startContainer.nodeName, endNodeName = this.endContainer.nodeName;\n                return [\n                    startNodeName == '#text' ? this.startContainer.nodeValue : startNodeName,\n                    '(',\n                    this.startOffset,\n                    ') : ',\n                    endNodeName == '#text' ? this.endContainer.nodeValue : endNodeName,\n                    '(',\n                    this.endOffset,\n                    ')'\n                ].join('');\n            }\n        });\n        W3CRange.fromNode = function (node) {\n            return new W3CRange(node.ownerDocument);\n        };\n        function compareBoundaries(start, end, startOffset, endOffset) {\n            if (start == end) {\n                return endOffset - startOffset;\n            }\n            var container = end;\n            while (container && container.parentNode != start) {\n                container = container.parentNode;\n            }\n            if (container) {\n                return findNodeIndex(container) - startOffset;\n            }\n            container = start;\n            while (container && container.parentNode != end) {\n                container = container.parentNode;\n            }\n            if (container) {\n                return endOffset - findNodeIndex(container) - 1;\n            }\n            var root = dom.commonAncestor(start, end);\n            var startAncestor = start;\n            while (startAncestor && startAncestor.parentNode != root) {\n                startAncestor = startAncestor.parentNode;\n            }\n            if (!startAncestor) {\n                startAncestor = root;\n            }\n            var endAncestor = end;\n            while (endAncestor && endAncestor.parentNode != root) {\n                endAncestor = endAncestor.parentNode;\n            }\n            if (!endAncestor) {\n                endAncestor = root;\n            }\n            if (startAncestor == endAncestor) {\n                return 0;\n            }\n            return findNodeIndex(endAncestor) - findNodeIndex(startAncestor);\n        }\n        function fixIvalidRange(range, toStart) {\n            function isInvalidRange(range) {\n                try {\n                    return compareBoundaries(range.startContainer, range.endContainer, range.startOffset, range.endOffset) < 0;\n                } catch (ex) {\n                    return true;\n                }\n            }\n            if (isInvalidRange(range)) {\n                if (toStart) {\n                    range.commonAncestorContainer = range.endContainer = range.startContainer;\n                    range.endOffset = range.startOffset;\n                } else {\n                    range.commonAncestorContainer = range.startContainer = range.endContainer;\n                    range.startOffset = range.endOffset;\n                }\n                range.collapsed = true;\n            }\n        }\n        function updateRangeProperties(range) {\n            range.collapsed = range.startContainer == range.endContainer && range.startOffset == range.endOffset;\n            var node = range.startContainer;\n            while (node && node != range.endContainer && !dom.isAncestorOf(node, range.endContainer)) {\n                node = node.parentNode;\n            }\n            range.commonAncestorContainer = node;\n        }\n        var RangeIterator = Class.extend({\n            init: function (range) {\n                $.extend(this, {\n                    range: range,\n                    _current: null,\n                    _next: null,\n                    _end: null\n                });\n                if (range.collapsed) {\n                    return;\n                }\n                var root = range.commonAncestorContainer;\n                this._next = range.startContainer == root && !isDataNode(range.startContainer) ? range.startContainer.childNodes[range.startOffset] : findClosestAncestor(root, range.startContainer);\n                this._end = range.endContainer == root && !isDataNode(range.endContainer) ? range.endContainer.childNodes[range.endOffset] : findClosestAncestor(root, range.endContainer).nextSibling;\n            },\n            hasNext: function () {\n                return !!this._next;\n            },\n            next: function () {\n                var that = this, current = that._current = that._next;\n                that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n                if (isDataNode(that._current)) {\n                    if (that.range.endContainer == that._current) {\n                        current = current.cloneNode(true);\n                        current.deleteData(that.range.endOffset, current.length - that.range.endOffset);\n                    }\n                    if (that.range.startContainer == that._current) {\n                        current = current.cloneNode(true);\n                        current.deleteData(0, that.range.startOffset);\n                    }\n                }\n                return current;\n            },\n            traverse: function (callback) {\n                var that = this, current;\n                function next() {\n                    that._current = that._next;\n                    that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n                    return that._current;\n                }\n                while (current = next()) {\n                    if (that.hasPartialSubtree()) {\n                        that.getSubtreeIterator().traverse(callback);\n                    } else {\n                        callback(current);\n                    }\n                }\n                return current;\n            },\n            remove: function (originalRange) {\n                var that = this, inStartContainer = that.range.startContainer == that._current, inEndContainer = that.range.endContainer == that._current, start, end, delta;\n                if (isDataNode(that._current) && (inStartContainer || inEndContainer)) {\n                    start = inStartContainer ? that.range.startOffset : 0;\n                    end = inEndContainer ? that.range.endOffset : that._current.length;\n                    delta = end - start;\n                    if (originalRange && (inStartContainer || inEndContainer)) {\n                        if (that._current == originalRange.startContainer && start <= originalRange.startOffset) {\n                            originalRange.startOffset -= delta;\n                        }\n                        if (that._current == originalRange.endContainer && end <= originalRange.endOffset) {\n                            originalRange.endOffset -= delta;\n                        }\n                    }\n                    that._current.deleteData(start, delta);\n                } else {\n                    var parent = that._current.parentNode;\n                    if (originalRange && (that.range.startContainer == parent || that.range.endContainer == parent)) {\n                        var nodeIndex = findNodeIndex(that._current);\n                        if (parent == originalRange.startContainer && nodeIndex <= originalRange.startOffset) {\n                            originalRange.startOffset -= 1;\n                        }\n                        if (parent == originalRange.endContainer && nodeIndex < originalRange.endOffset) {\n                            originalRange.endOffset -= 1;\n                        }\n                    }\n                    dom.remove(that._current);\n                }\n            },\n            hasPartialSubtree: function () {\n                return !isDataNode(this._current) && (dom.isAncestorOrSelf(this._current, this.range.startContainer) || dom.isAncestorOrSelf(this._current, this.range.endContainer));\n            },\n            getSubtreeIterator: function () {\n                return new RangeIterator(this.getSubRange());\n            },\n            getSubRange: function () {\n                var that = this, subRange = that.range.cloneRange();\n                subRange.selectNodeContents(that._current);\n                if (dom.isAncestorOrSelf(that._current, that.range.startContainer)) {\n                    subRange.setStart(that.range.startContainer, that.range.startOffset);\n                }\n                if (dom.isAncestorOrSelf(that._current, that.range.endContainer)) {\n                    subRange.setEnd(that.range.endContainer, that.range.endOffset);\n                }\n                return subRange;\n            }\n        });\n        var W3CSelection = Class.extend({\n            init: function (doc) {\n                this.ownerDocument = doc;\n                this.rangeCount = 1;\n            },\n            addRange: function (range) {\n                var textRange = this.ownerDocument.body.createTextRange();\n                adoptContainer(textRange, range, false);\n                adoptContainer(textRange, range, true);\n                textRange.select();\n            },\n            removeAllRanges: function () {\n                var selection = this.ownerDocument.selection;\n                if (selection.type != 'None') {\n                    selection.empty();\n                }\n            },\n            getRangeAt: function () {\n                var textRange, range = new W3CRange(this.ownerDocument), selection = this.ownerDocument.selection, element, commonAncestor;\n                try {\n                    textRange = selection.createRange();\n                    element = textRange.item ? textRange.item(0) : textRange.parentElement();\n                    if (element.ownerDocument != this.ownerDocument) {\n                        return range;\n                    }\n                } catch (ex) {\n                    return range;\n                }\n                if (selection.type == 'Control') {\n                    range.selectNode(textRange.item(0));\n                } else {\n                    commonAncestor = textRangeContainer(textRange);\n                    adoptEndPoint(textRange, range, commonAncestor, true);\n                    adoptEndPoint(textRange, range, commonAncestor, false);\n                    if (range.startContainer.nodeType == 9) {\n                        range.setStart(range.endContainer, range.startOffset);\n                    }\n                    if (range.endContainer.nodeType == 9) {\n                        range.setEnd(range.startContainer, range.endOffset);\n                    }\n                    if (textRange.compareEndPoints('StartToEnd', textRange) === 0) {\n                        range.collapse(false);\n                    }\n                    var startContainer = range.startContainer, endContainer = range.endContainer, body = this.ownerDocument.body;\n                    if (!range.collapsed && range.startOffset === 0 && range.endOffset == getNodeLength(range.endContainer) && !(startContainer == endContainer && isDataNode(startContainer) && startContainer.parentNode == body)) {\n                        var movedStart = false, movedEnd = false;\n                        while (findNodeIndex(startContainer) === 0 && startContainer == startContainer.parentNode.firstChild && startContainer != body) {\n                            startContainer = startContainer.parentNode;\n                            movedStart = true;\n                        }\n                        while (findNodeIndex(endContainer) == getNodeLength(endContainer.parentNode) - 1 && endContainer == endContainer.parentNode.lastChild && endContainer != body) {\n                            endContainer = endContainer.parentNode;\n                            movedEnd = true;\n                        }\n                        if (startContainer == body && endContainer == body && movedStart && movedEnd) {\n                            range.setStart(startContainer, 0);\n                            range.setEnd(endContainer, getNodeLength(body));\n                        }\n                    }\n                }\n                return range;\n            }\n        });\n        function textRangeContainer(textRange) {\n            var left = textRange.duplicate(), right = textRange.duplicate();\n            left.collapse(true);\n            right.collapse(false);\n            return dom.commonAncestor(textRange.parentElement(), left.parentElement(), right.parentElement());\n        }\n        function adoptContainer(textRange, range, start) {\n            var container = range[start ? 'startContainer' : 'endContainer'], offset = range[start ? 'startOffset' : 'endOffset'], textOffset = 0, isData = isDataNode(container), anchorNode = isData ? container : container.childNodes[offset] || null, anchorParent = isData ? container.parentNode : container, doc = range.ownerDocument, cursor = doc.body.createTextRange(), cursorNode;\n            if (container.nodeType == 3 || container.nodeType == 4) {\n                textOffset = offset;\n            }\n            if (!anchorParent) {\n                anchorParent = doc.body;\n            }\n            if (anchorParent.nodeName.toLowerCase() == 'img') {\n                cursor.moveToElementText(anchorParent);\n                cursor.collapse(false);\n                textRange.setEndPoint(start ? 'StartToStart' : 'EndToStart', cursor);\n            } else {\n                cursorNode = anchorParent.insertBefore(dom.create(doc, 'a'), anchorNode);\n                cursor.moveToElementText(cursorNode);\n                dom.remove(cursorNode);\n                cursor[start ? 'moveStart' : 'moveEnd']('character', textOffset);\n                cursor.collapse(false);\n                textRange.setEndPoint(start ? 'StartToStart' : 'EndToStart', cursor);\n            }\n        }\n        function adoptEndPoint(textRange, range, commonAncestor, start) {\n            var cursorNode = dom.create(range.ownerDocument, 'a'), cursor = textRange.duplicate(), comparison = start ? 'StartToStart' : 'StartToEnd', result, parent, target, previous, next, args, index, appended = false;\n            cursorNode.innerHTML = '\\uFEFF';\n            cursor.collapse(start);\n            parent = cursor.parentElement();\n            if (!dom.isAncestorOrSelf(commonAncestor, parent)) {\n                parent = commonAncestor;\n            }\n            do {\n                if (appended) {\n                    parent.insertBefore(cursorNode, cursorNode.previousSibling);\n                } else {\n                    parent.appendChild(cursorNode);\n                    appended = true;\n                }\n                cursor.moveToElementText(cursorNode);\n            } while ((result = cursor.compareEndPoints(comparison, textRange)) > 0 && cursorNode.previousSibling);\n            target = cursorNode.nextSibling;\n            if (result == -1 && isDataNode(target)) {\n                cursor.setEndPoint(start ? 'EndToStart' : 'EndToEnd', textRange);\n                dom.remove(cursorNode);\n                args = [\n                    target,\n                    cursor.text.length\n                ];\n            } else {\n                previous = !start && cursorNode.previousSibling;\n                next = start && cursorNode.nextSibling;\n                if (isDataNode(next)) {\n                    args = [\n                        next,\n                        0\n                    ];\n                } else if (isDataNode(previous)) {\n                    args = [\n                        previous,\n                        previous.length\n                    ];\n                } else {\n                    index = findNodeIndex(cursorNode);\n                    if (parent.nextSibling && index == parent.childNodes.length - 1) {\n                        args = [\n                            parent.nextSibling,\n                            0\n                        ];\n                    } else {\n                        args = [\n                            parent,\n                            index\n                        ];\n                    }\n                }\n                dom.remove(cursorNode);\n            }\n            range[start ? 'setStart' : 'setEnd'].apply(range, args);\n        }\n        var RangeEnumerator = Class.extend({\n            init: function (range) {\n                this.enumerate = function () {\n                    var nodes = [];\n                    function visit(node) {\n                        if (dom.is(node, 'img') || node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == '\\uFEFF')) {\n                            nodes.push(node);\n                        } else {\n                            node = node.firstChild;\n                            while (node) {\n                                visit(node);\n                                node = node.nextSibling;\n                            }\n                        }\n                    }\n                    new RangeIterator(range).traverse(visit);\n                    return nodes;\n                };\n            }\n        });\n        var ImmutablesRangeIterator = RangeIterator.extend({\n            hasPartialSubtree: function () {\n                var immutable = Editor.Immutables && Editor.Immutables.immutable;\n                return immutable && !immutable(this._current) && RangeIterator.fn.hasPartialSubtree.call(this);\n            },\n            getSubtreeIterator: function () {\n                return new ImmutablesRangeIterator(this.getSubRange());\n            }\n        });\n        var ImmutablesRangeEnumerator = Class.extend({\n            init: function (range) {\n                this.enumerate = function () {\n                    var nodes = [];\n                    var immutable = Editor.Immutables && Editor.Immutables.immutable;\n                    function visit(node) {\n                        if (immutable && !immutable(node)) {\n                            if (dom.is(node, 'img') || node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == '\\uFEFF')) {\n                                nodes.push(node);\n                            } else {\n                                node = node.firstChild;\n                                while (node) {\n                                    visit(node);\n                                    node = node.nextSibling;\n                                }\n                            }\n                        }\n                    }\n                    new ImmutablesRangeIterator(range).traverse(visit);\n                    return nodes;\n                };\n            }\n        });\n        var RestorePoint = Class.extend({\n            init: function (range, body, options) {\n                var that = this;\n                that.range = range;\n                that.rootNode = RangeUtils.documentFromRange(range);\n                that.body = body || that.getEditable(range);\n                if (dom.name(that.body) != 'body') {\n                    that.rootNode = that.body;\n                }\n                that.startContainer = that.nodeToPath(range.startContainer);\n                that.endContainer = that.nodeToPath(range.endContainer);\n                that.startOffset = that.offset(range.startContainer, range.startOffset);\n                that.endOffset = that.offset(range.endContainer, range.endOffset);\n                that.immutables = options && options.immutables;\n                if (that.immutables) {\n                    that.serializedImmutables = Editor.Immutables.removeImmutables(that.body);\n                }\n                that.html = that.body.innerHTML;\n                if (that.immutables && !that.serializedImmutables.empty) {\n                    Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n                }\n            },\n            index: function (node) {\n                var result = 0, lastType = node.nodeType;\n                while (node = node.previousSibling) {\n                    var nodeType = node.nodeType;\n                    if (nodeType != 3 || lastType != nodeType) {\n                        result++;\n                    }\n                    lastType = nodeType;\n                }\n                return result;\n            },\n            getEditable: function (range) {\n                var root = range.commonAncestorContainer;\n                while (root && (root.nodeType == 3 || root.attributes && (!root.attributes.contentEditable || root.attributes.contentEditable.nodeValue.toLowerCase() == 'false'))) {\n                    root = root.parentNode;\n                }\n                return root;\n            },\n            restoreHtml: function () {\n                var that = this;\n                dom.removeChildren(that.body);\n                that.body.innerHTML = that.html;\n                if (that.immutables && !that.serializedImmutables.empty) {\n                    Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n                }\n            },\n            offset: function (node, value) {\n                if (node.nodeType == 3) {\n                    while ((node = node.previousSibling) && node.nodeType == 3) {\n                        value += node.nodeValue.length;\n                    }\n                }\n                return value;\n            },\n            nodeToPath: function (node) {\n                var path = [];\n                while (node != this.rootNode) {\n                    path.push(this.index(node));\n                    node = node.parentNode;\n                }\n                return path;\n            },\n            toRangePoint: function (range, start, path, denormalizedOffset) {\n                var node = this.rootNode, length = path.length, offset = denormalizedOffset;\n                while (length--) {\n                    node = node.childNodes[path[length]];\n                }\n                while (node && node.nodeType == 3 && node.nodeValue.length < offset) {\n                    offset -= node.nodeValue.length;\n                    node = node.nextSibling;\n                }\n                if (node && offset >= 0) {\n                    range[start ? 'setStart' : 'setEnd'](node, offset);\n                }\n            },\n            toRange: function () {\n                var that = this, result = that.range.cloneRange();\n                that.toRangePoint(result, true, that.startContainer, that.startOffset);\n                that.toRangePoint(result, false, that.endContainer, that.endOffset);\n                return result;\n            }\n        });\n        var Marker = Class.extend({\n            init: function () {\n                this.caret = null;\n            },\n            addCaret: function (range) {\n                var that = this;\n                var caret = that.caret = dom.create(RangeUtils.documentFromRange(range), 'span', { className: 'k-marker' });\n                range.insertNode(caret);\n                dom.stripBomNode(caret.previousSibling);\n                dom.stripBomNode(caret.nextSibling);\n                range.selectNode(caret);\n                return caret;\n            },\n            removeCaret: function (range) {\n                var that = this, previous = that.caret.previousSibling, startOffset = 0;\n                if (previous) {\n                    startOffset = isDataNode(previous) ? previous.nodeValue.length : findNodeIndex(previous);\n                }\n                var container = that.caret.parentNode;\n                var containerIndex = previous ? findNodeIndex(previous) : 0;\n                dom.remove(that.caret);\n                normalize(container);\n                var node = container.childNodes[containerIndex];\n                if (isDataNode(node)) {\n                    range.setStart(node, startOffset);\n                } else if (node) {\n                    var textNode = dom.lastTextNode(node);\n                    if (textNode) {\n                        range.setStart(textNode, textNode.nodeValue.length);\n                    } else {\n                        range[previous ? 'setStartAfter' : 'setStartBefore'](node);\n                    }\n                } else {\n                    if (!browser.msie && !container.innerHTML) {\n                        container.innerHTML = '<br _moz_dirty=\"\" />';\n                    }\n                    range.selectNodeContents(container);\n                }\n                range.collapse(true);\n            },\n            add: function (range, expand) {\n                var that = this;\n                var collapsed = range.collapsed && !RangeUtils.isExpandable(range);\n                var doc = RangeUtils.documentFromRange(range);\n                if (expand && range.collapsed) {\n                    that.addCaret(range);\n                    range = RangeUtils.expand(range);\n                }\n                var rangeBoundary = range.cloneRange();\n                rangeBoundary.collapse(false);\n                that.end = dom.create(doc, 'span', { className: 'k-marker' });\n                rangeBoundary.insertNode(that.end);\n                rangeBoundary = range.cloneRange();\n                rangeBoundary.collapse(true);\n                that.start = that.end.cloneNode(true);\n                rangeBoundary.insertNode(that.start);\n                that._removeDeadMarkers(that.start, that.end);\n                if (collapsed) {\n                    var bom = doc.createTextNode('\\uFEFF');\n                    dom.insertAfter(bom.cloneNode(), that.start);\n                    dom.insertBefore(bom, that.end);\n                }\n                normalize(range.commonAncestorContainer);\n                range.setStartBefore(that.start);\n                range.setEndAfter(that.end);\n                return range;\n            },\n            _removeDeadMarkers: function (start, end) {\n                if (start.previousSibling && start.previousSibling.nodeValue == '\\uFEFF') {\n                    dom.remove(start.previousSibling);\n                }\n                if (end.nextSibling && end.nextSibling.nodeValue == '\\uFEFF') {\n                    dom.remove(end.nextSibling);\n                }\n            },\n            _normalizedIndex: function (node) {\n                var index = findNodeIndex(node);\n                var pointer = node;\n                while (pointer.previousSibling) {\n                    if (pointer.nodeType == 3 && pointer.previousSibling.nodeType == 3) {\n                        index--;\n                    }\n                    pointer = pointer.previousSibling;\n                }\n                return index;\n            },\n            remove: function (range) {\n                var that = this, start = that.start, end = that.end, shouldNormalizeStart, shouldNormalizeEnd, shouldNormalize;\n                normalize(range.commonAncestorContainer);\n                while (!start.nextSibling && start.parentNode) {\n                    start = start.parentNode;\n                }\n                while (!end.previousSibling && end.parentNode) {\n                    end = end.parentNode;\n                }\n                shouldNormalizeStart = start.previousSibling && start.previousSibling.nodeType == 3 && (start.nextSibling && start.nextSibling.nodeType == 3);\n                shouldNormalizeEnd = end.previousSibling && end.previousSibling.nodeType == 3 && (end.nextSibling && end.nextSibling.nodeType == 3);\n                shouldNormalize = shouldNormalizeStart && shouldNormalizeEnd;\n                start = start.nextSibling;\n                end = end.previousSibling;\n                var isBomSelected = start === end && dom.isBom(start);\n                if (isBomSelected && start.length > 1) {\n                    start.nodeValue = start.nodeValue.charAt(0);\n                }\n                var collapsed = isBomSelected;\n                var collapsedToStart = false;\n                if (start == that.end) {\n                    collapsedToStart = !!that.start.previousSibling;\n                    start = end = that.start.previousSibling || that.end.nextSibling;\n                    collapsed = true;\n                }\n                dom.remove(that.start);\n                dom.remove(that.end);\n                if (!start || !end) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    range.collapse(true);\n                    return;\n                }\n                var startOffset = collapsed ? isDataNode(start) ? start.nodeValue.length : start.childNodes.length : 0;\n                var endOffset = isDataNode(end) ? end.nodeValue.length : end.childNodes.length;\n                if (start.nodeType == 3) {\n                    while (start.previousSibling && start.previousSibling.nodeType == 3) {\n                        start = start.previousSibling;\n                        startOffset += start.nodeValue.length;\n                    }\n                }\n                if (end.nodeType == 3) {\n                    while (end.previousSibling && end.previousSibling.nodeType == 3) {\n                        end = end.previousSibling;\n                        endOffset += end.nodeValue.length;\n                    }\n                }\n                var startParent = start.parentNode;\n                var endParent = end.parentNode;\n                var startIndex = this._normalizedIndex(start);\n                var endIndex = this._normalizedIndex(end);\n                normalize(startParent);\n                if (start.nodeType == 3) {\n                    start = startParent.childNodes[startIndex];\n                }\n                normalize(endParent);\n                if (end.nodeType == 3) {\n                    end = endParent.childNodes[endIndex];\n                }\n                if (collapsed) {\n                    if (start.nodeType == 3) {\n                        range.setStart(start, startOffset);\n                    } else {\n                        range[collapsedToStart ? 'setStartAfter' : 'setStartBefore'](start);\n                    }\n                    range.collapse(true);\n                } else {\n                    if (start.nodeType == 3) {\n                        range.setStart(start, startOffset);\n                    } else {\n                        range.setStartBefore(start);\n                    }\n                    if (end.nodeType == 3) {\n                        range.setEnd(end, endOffset);\n                    } else {\n                        range.setEndAfter(end);\n                    }\n                }\n                if (that.caret) {\n                    that.removeCaret(range);\n                }\n            }\n        });\n        var boundary = /[\\u0009-\\u000d]|\\u0020|\\u00a0|\\ufeff|\\.|,|;|:|!|\\(|\\)|\\?/;\n        var RangeUtils = {\n            nodes: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    nodes = RangeUtils.textNodes(range);\n                    if (!nodes.length) {\n                        nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                    }\n                }\n                return nodes;\n            },\n            textNodes: function (range) {\n                return new RangeEnumerator(range).enumerate();\n            },\n            editableTextNodes: function (range) {\n                var nodes = [], immutableParent = Editor.Immutables && Editor.Immutables.immutableParent;\n                if (immutableParent && !immutableParent(range.commonAncestorContainer)) {\n                    nodes = new ImmutablesRangeEnumerator(range).enumerate();\n                }\n                return nodes;\n            },\n            documentFromRange: function (range) {\n                var startContainer = range.startContainer;\n                return startContainer.nodeType == 9 ? startContainer : startContainer.ownerDocument;\n            },\n            createRange: function (document) {\n                if (browser.msie && browser.version < 9) {\n                    return new W3CRange(document);\n                }\n                return document.createRange();\n            },\n            selectRange: function (range) {\n                var image = RangeUtils.image(range);\n                if (image) {\n                    range.setStartAfter(image);\n                    range.setEndAfter(image);\n                }\n                var selection = SelectionUtils.selectionFromRange(range);\n                selection.removeAllRanges();\n                selection.addRange(range);\n            },\n            stringify: function (range) {\n                return kendo.format('{0}:{1} - {2}:{3}', dom.name(range.startContainer), range.startOffset, dom.name(range.endContainer), range.endOffset);\n            },\n            split: function (range, node, trim) {\n                function partition(start) {\n                    var partitionRange = range.cloneRange();\n                    partitionRange.collapse(start);\n                    partitionRange[start ? 'setStartBefore' : 'setEndAfter'](node);\n                    var contents = partitionRange.extractContents();\n                    if (trim) {\n                        contents = dom.trim(contents);\n                    }\n                    dom[start ? 'insertBefore' : 'insertAfter'](contents, node);\n                }\n                partition(true);\n                partition(false);\n            },\n            mapAll: function (range, map) {\n                var nodes = [];\n                new RangeIterator(range).traverse(function (node) {\n                    var mapped = map(node);\n                    if (mapped && $.inArray(mapped, nodes) < 0) {\n                        nodes.push(mapped);\n                    }\n                });\n                return nodes;\n            },\n            getAll: function (range, predicate) {\n                var selector = predicate;\n                if (typeof predicate == 'string') {\n                    predicate = function (node) {\n                        return dom.is(node, selector);\n                    };\n                }\n                return RangeUtils.mapAll(range, function (node) {\n                    if (predicate(node)) {\n                        return node;\n                    }\n                });\n            },\n            getMarkers: function (range) {\n                return RangeUtils.getAll(range, function (node) {\n                    return node.className == 'k-marker';\n                });\n            },\n            image: function (range) {\n                var nodes = RangeUtils.getAll(range, 'img');\n                if (nodes.length == 1) {\n                    return nodes[0];\n                }\n            },\n            isStartOf: function (originalRange, node) {\n                if (originalRange.startOffset !== 0) {\n                    return false;\n                }\n                var range = originalRange.cloneRange();\n                while (range.startOffset === 0 && range.startContainer != node) {\n                    var index = dom.findNodeIndex(range.startContainer);\n                    var parent = range.startContainer.parentNode;\n                    while (index > 0 && parent[index - 1] && dom.insignificant(parent[index - 1])) {\n                        index--;\n                    }\n                    range.setStart(parent, index);\n                }\n                return range.startOffset === 0 && range.startContainer == node;\n            },\n            isEndOf: function (originalRange, node) {\n                var range = originalRange.cloneRange();\n                range.collapse(false);\n                var start = range.startContainer;\n                if (dom.isDataNode(start) && range.startOffset == dom.getNodeLength(start)) {\n                    range.setStart(start.parentNode, dom.findNodeIndex(start) + 1);\n                    range.collapse(true);\n                }\n                range.setEnd(node, dom.getNodeLength(node));\n                var nodes = [];\n                function visit(node) {\n                    if (!dom.insignificant(node) && !(dom.isDataNode(node) && /^[\\ufeff]*$/.test(node.nodeValue))) {\n                        nodes.push(node);\n                    }\n                }\n                new RangeIterator(range).traverse(visit);\n                return !nodes.length;\n            },\n            wrapSelectedElements: function (range) {\n                var startEditable = dom.editableParent(range.startContainer);\n                var endEditable = dom.editableParent(range.endContainer);\n                while (range.startOffset === 0 && range.startContainer != startEditable) {\n                    range.setStart(range.startContainer.parentNode, dom.findNodeIndex(range.startContainer));\n                }\n                function isEnd(offset, container) {\n                    var length = dom.getNodeLength(container);\n                    if (offset == length) {\n                        return true;\n                    }\n                    for (var i = offset; i < length; i++) {\n                        if (!dom.insignificant(container.childNodes[i])) {\n                            return false;\n                        }\n                    }\n                    return true;\n                }\n                while (isEnd(range.endOffset, range.endContainer) && range.endContainer != endEditable) {\n                    range.setEnd(range.endContainer.parentNode, dom.findNodeIndex(range.endContainer) + 1);\n                }\n                return range;\n            },\n            expand: function (range) {\n                var result = range.cloneRange();\n                var startContainer = result.startContainer.childNodes[result.startOffset === 0 ? 0 : result.startOffset - 1];\n                var endContainer = result.endContainer.childNodes[result.endOffset];\n                if (!isDataNode(startContainer) || !isDataNode(endContainer)) {\n                    return result;\n                }\n                var beforeCaret = startContainer.nodeValue;\n                var afterCaret = endContainer.nodeValue;\n                if (!beforeCaret || !afterCaret) {\n                    return result;\n                }\n                var startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n                var endOffset = afterCaret.search(boundary);\n                if (!startOffset || !endOffset) {\n                    return result;\n                }\n                endOffset = endOffset == -1 ? afterCaret.length : endOffset;\n                startOffset = startOffset == -1 ? 0 : beforeCaret.length - startOffset;\n                result.setStart(startContainer, startOffset);\n                result.setEnd(endContainer, endOffset);\n                return result;\n            },\n            isExpandable: function (range) {\n                var node = range.startContainer;\n                var rangeDocument = RangeUtils.documentFromRange(range);\n                if (node == rangeDocument || node == rangeDocument.body) {\n                    return false;\n                }\n                var result = range.cloneRange();\n                var value = node.nodeValue;\n                if (!value) {\n                    return false;\n                }\n                var beforeCaret = value.substring(0, result.startOffset);\n                var afterCaret = value.substring(result.startOffset);\n                var startOffset = 0, endOffset = 0;\n                if (beforeCaret) {\n                    startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n                }\n                if (afterCaret) {\n                    endOffset = afterCaret.search(boundary);\n                }\n                return startOffset && endOffset;\n            }\n        };\n        extend(Editor, {\n            SelectionUtils: SelectionUtils,\n            W3CRange: W3CRange,\n            RangeIterator: RangeIterator,\n            W3CSelection: W3CSelection,\n            RangeEnumerator: RangeEnumerator,\n            RestorePoint: RestorePoint,\n            Marker: Marker,\n            RangeUtils: RangeUtils\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/immutables', ['editor/range'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, Editor = kendo.ui.editor, dom = Editor.Dom, template = kendo.template, RangeUtils = Editor.RangeUtils, complexBlocks = [\n                'ul',\n                'ol',\n                'tbody',\n                'thead',\n                'table'\n            ], toolsToBeUpdated = [\n                'bold',\n                'italic',\n                'underline',\n                'strikethrough',\n                'superscript',\n                'subscript',\n                'forecolor',\n                'backcolor',\n                'fontname',\n                'fontsize',\n                'createlink',\n                'unlink',\n                'autolink',\n                'addcolumnleft',\n                'addcolumnright',\n                'addrowabove',\n                'addrowbelow',\n                'deleterow',\n                'deletecolumn',\n                'mergecells',\n                'formatting',\n                'cleanformatting'\n            ], IMMUTABALE = 'k-immutable', IMMUTABALE_MARKER_SELECTOR = '[' + IMMUTABALE + ']', IMMUTABLE_SELECTOR = '[contenteditable=\\'false\\']';\n        var rootCondition = function (node) {\n            return $(node).is('body,.k-editor');\n        };\n        var immutable = function (node) {\n            return node.getAttribute && node.getAttribute('contenteditable') == 'false';\n        };\n        var immutableParent = function (node) {\n            return dom.closestBy(node, immutable, rootCondition);\n        };\n        var expandImmutablesIn = function (range) {\n            var startImmutableParent = immutableParent(range.startContainer);\n            var endImmutableParent = immutableParent(range.endContainer);\n            if (startImmutableParent || endImmutableParent) {\n                if (startImmutableParent) {\n                    range.setStartBefore(startImmutableParent);\n                }\n                if (endImmutableParent) {\n                    range.setEndAfter(endImmutableParent);\n                }\n            }\n        };\n        var immutablesContext = function (range) {\n            if (immutableParent(range.commonAncestorContainer)) {\n                return true;\n            } else if (immutableParent(range.startContainer) || immutableParent(range.endContainer)) {\n                var editableNodes = RangeUtils.editableTextNodes(range);\n                if (editableNodes.length === 0) {\n                    return true;\n                }\n            }\n            return false;\n        };\n        var randomId = function (length) {\n            var result = '';\n            var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n            for (var i = length || 10; i > 0; --i) {\n                result += chars.charAt(Math.round(Math.random() * (chars.length - 1)));\n            }\n            return result;\n        };\n        var removeImmutables = function (root) {\n            var serializedImmutables = { empty: true }, nodeName, id, serialized;\n            $(root).find(IMMUTABLE_SELECTOR).each(function (i, node) {\n                nodeName = dom.name(node);\n                id = randomId();\n                serialized = '<' + nodeName + ' ' + IMMUTABALE + '=\\'' + id + '\\'></' + nodeName + '>';\n                serializedImmutables[id] = {\n                    node: node,\n                    style: $(node).attr('style')\n                };\n                serializedImmutables.empty = false;\n                $(node).replaceWith(serialized);\n            });\n            return serializedImmutables;\n        };\n        var restoreImmutables = function (root, serializedImmutables) {\n            var id, immutable;\n            $(root).find(IMMUTABALE_MARKER_SELECTOR).each(function (i, node) {\n                id = node.getAttribute(IMMUTABALE);\n                immutable = serializedImmutables[id];\n                $(node).replaceWith(immutable.node);\n                if (immutable.style != $(immutable.node).attr('style')) {\n                    $(immutable.node).removeAttr('style').attr('style', immutable.style);\n                }\n            });\n        };\n        var deletingKey = function (keyCode) {\n            var keys = kendo.keys;\n            return keyCode === keys.BACKSPACE || keyCode == keys.DELETE;\n        };\n        var updateToolOptions = function (tool) {\n            var options = tool ? tool.options : undefined;\n            if (options && options.finder) {\n                options.finder._initOptions({ immutables: true });\n            }\n        };\n        var Immutables = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                this.serializedImmutables = {};\n                this.options = $.extend({}, editor && editor.options && editor.options.immutables);\n                var tools = editor.toolbar.tools;\n                updateToolOptions(tools.justifyLeft);\n                updateToolOptions(tools.justifyCenter);\n                updateToolOptions(tools.justifyRight);\n                updateToolOptions(tools.justifyFull);\n            },\n            serialize: function (node) {\n                var result = this._toHtml(node), id;\n                if (result.indexOf(IMMUTABALE) === -1) {\n                    id = this.randomId();\n                    result = result.replace(/>/, ' ' + IMMUTABALE + '=\"' + id + '\">');\n                } else {\n                    id = result.match(/k-immutable\\s*=\\s*['\"](.*)['\"]/)[1];\n                }\n                this.serializedImmutables[id] = node;\n                return result;\n            },\n            _toHtml: function (node) {\n                var serialization = this.options.serialization;\n                var serializationType = typeof serialization;\n                var nodeName;\n                switch (serializationType) {\n                case 'string':\n                    return template(serialization)(node);\n                case 'function':\n                    return serialization(node);\n                default:\n                    nodeName = dom.name(node);\n                    return '<' + nodeName + '></' + nodeName + '>';\n                }\n            },\n            deserialize: function (node) {\n                var that = this;\n                var deserialization = this.options.deserialization;\n                $(IMMUTABALE_MARKER_SELECTOR, node).each(function () {\n                    var id = this.getAttribute(IMMUTABALE);\n                    var immutable = that.serializedImmutables[id];\n                    if (kendo.isFunction(deserialization)) {\n                        deserialization(this, immutable);\n                    }\n                    $(this).replaceWith(immutable);\n                });\n                that.serializedImmutables = {};\n            },\n            randomId: function (length) {\n                return randomId(length);\n            },\n            keydown: function (e, range) {\n                var isDeleting = deletingKey(e.keyCode);\n                var shouldCancelEvent = isDeleting && this._cancelDeleting(e, range) || !isDeleting && this._cancelTyping(e, range);\n                if (shouldCancelEvent) {\n                    e.preventDefault();\n                    return true;\n                }\n            },\n            _cancelTyping: function (e, range) {\n                var editor = this.editor;\n                var keyboard = editor.keyboard;\n                return range.collapsed && !keyboard.typingInProgress && keyboard.isTypingKey(e) && immutablesContext(range);\n            },\n            _cancelDeleting: function (e, range) {\n                var keys = kendo.keys;\n                var backspace = e.keyCode === keys.BACKSPACE;\n                var del = e.keyCode == keys.DELETE;\n                if (!backspace && !del) {\n                    return false;\n                }\n                var cancelDeleting = false;\n                if (range.collapsed) {\n                    if (immutablesContext(range)) {\n                        return true;\n                    }\n                    var immutable = this.nextImmutable(range, del);\n                    if (immutable && backspace) {\n                        var closestSelectionLi = dom.closest(range.commonAncestorContainer, 'li');\n                        if (closestSelectionLi) {\n                            var closestImmutableLi = dom.closest(immutable, 'li');\n                            if (closestImmutableLi && closestImmutableLi !== closestSelectionLi) {\n                                return cancelDeleting;\n                            }\n                        }\n                    }\n                    if (immutable && !dom.tableCell(immutable)) {\n                        if (dom.parentOfType(immutable, complexBlocks) === dom.parentOfType(range.commonAncestorContainer, complexBlocks)) {\n                            while (immutable && immutable.parentNode.childNodes.length == 1) {\n                                immutable = immutable.parentNode;\n                            }\n                            if (dom.tableCell(immutable)) {\n                                return cancelDeleting;\n                            }\n                            this._removeImmutable(immutable, range);\n                        }\n                        cancelDeleting = true;\n                    }\n                }\n                return cancelDeleting;\n            },\n            nextImmutable: function (range, forwards) {\n                var commonContainer = range.commonAncestorContainer;\n                if (dom.isBom(commonContainer) || (forwards && RangeUtils.isEndOf(range, commonContainer) || !forwards && RangeUtils.isStartOf(range, commonContainer))) {\n                    var next = this._nextNode(commonContainer, forwards);\n                    if (next && dom.isBlock(next) && !immutableParent(next)) {\n                        while (next && next.children && next.children[forwards ? 0 : next.children.length - 1]) {\n                            next = next.children[forwards ? 0 : next.children.length - 1];\n                        }\n                    }\n                    return immutableParent(next);\n                }\n            },\n            _removeImmutable: function (immutable, range) {\n                var editor = this.editor;\n                var startRestorePoint = new Editor.RestorePoint(range, editor.body);\n                dom.remove(immutable);\n                Editor._finishUpdate(editor, startRestorePoint);\n            },\n            _nextNode: function (node, forwards) {\n                var sibling = forwards ? 'nextSibling' : 'previousSibling';\n                var current = node, next;\n                while (current && !next) {\n                    next = current[sibling];\n                    if (next && dom.isDataNode(next) && /^\\s|[\\ufeff]$/.test(next.nodeValue)) {\n                        current = next;\n                        next = current[sibling];\n                    }\n                    if (!next) {\n                        current = current.parentNode;\n                    }\n                }\n                return next;\n            }\n        });\n        Immutables.immutable = immutable;\n        Immutables.immutableParent = immutableParent;\n        Immutables.expandImmutablesIn = expandImmutablesIn;\n        Immutables.immutablesContext = immutablesContext;\n        Immutables.toolsToBeUpdated = toolsToBeUpdated;\n        Immutables.removeImmutables = removeImmutables;\n        Immutables.restoreImmutables = restoreImmutables;\n        Editor.Immutables = Immutables;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/command', ['editor/immutables'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, editorNS = kendo.ui.editor, dom = editorNS.Dom, RestorePoint = editorNS.RestorePoint, Marker = editorNS.Marker, extend = $.extend;\n        function finishUpdate(editor, startRestorePoint) {\n            var endRestorePoint = editor.selectionRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n            var command = new GenericCommand(startRestorePoint, endRestorePoint);\n            command.editor = editor;\n            editor.undoRedoStack.push(command);\n            return endRestorePoint;\n        }\n        var Command = Class.extend({\n            init: function (options) {\n                this.options = options;\n                this.restorePoint = new RestorePoint(options.range, options.body, { immutables: options.immutables });\n                this.marker = new Marker();\n                this.formatter = options.formatter;\n            },\n            getRange: function () {\n                return this.restorePoint.toRange();\n            },\n            lockRange: function (expand) {\n                return this.marker.add(this.getRange(), expand);\n            },\n            releaseRange: function (range) {\n                this.marker.remove(range);\n                this.editor.selectRange(range);\n            },\n            undo: function () {\n                var point = this.restorePoint;\n                point.restoreHtml();\n                this.editor.selectRange(point.toRange());\n            },\n            redo: function () {\n                this.exec();\n            },\n            createDialog: function (content, options) {\n                var editor = this.editor;\n                return $(content).appendTo(document.body).kendoWindow(extend({}, editor.options.dialogOptions, options)).closest('.k-window').toggleClass('k-rtl', kendo.support.isRtl(editor.wrapper)).end();\n            },\n            exec: function () {\n                var range = this.lockRange(true);\n                this.formatter.editor = this.editor;\n                this.formatter.toggle(range);\n                this.releaseRange(range);\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            expandImmutablesIn: function (range) {\n                if (this.immutables()) {\n                    kendo.ui.editor.Immutables.expandImmutablesIn(range);\n                    this.restorePoint = new RestorePoint(range, this.editor.body);\n                }\n            }\n        });\n        var GenericCommand = Class.extend({\n            init: function (startRestorePoint, endRestorePoint) {\n                this.body = startRestorePoint.body;\n                this.startRestorePoint = startRestorePoint;\n                this.endRestorePoint = endRestorePoint;\n            },\n            redo: function () {\n                dom.removeChildren(this.body);\n                this.body.innerHTML = this.endRestorePoint.html;\n                this.editor.selectRange(this.endRestorePoint.toRange());\n            },\n            undo: function () {\n                dom.removeChildren(this.body);\n                this.body.innerHTML = this.startRestorePoint.html;\n                this.editor.selectRange(this.startRestorePoint.toRange());\n            }\n        });\n        extend(editorNS, {\n            _finishUpdate: finishUpdate,\n            Command: Command,\n            GenericCommand: GenericCommand\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/toolbar', ['editor/range'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo;\n        var ui = kendo.ui;\n        var editorNS = ui.editor;\n        var Widget = ui.Widget;\n        var extend = $.extend;\n        var proxy = $.proxy;\n        var keys = kendo.keys;\n        var NS = '.kendoEditor';\n        var EditorUtils = editorNS.EditorUtils;\n        var ToolTemplate = editorNS.ToolTemplate;\n        var Tool = editorNS.Tool;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var OVERFLOWANCHOR = 'overflowAnchor';\n        var focusable = '.k-tool-group:visible a.k-tool:not(.k-state-disabled),' + '.k-tool.k-overflow-anchor:visible,' + '.k-tool-group:visible .k-widget.k-colorpicker,' + '.k-tool-group:visible .k-selectbox,' + '.k-tool-group:visible .k-dropdown,' + '.k-tool-group:visible .k-combobox .k-input';\n        var toolNamesByCssClass = {\n            'k-i-sup-script': 'superscript',\n            'k-i-sub-script': 'subscript',\n            'k-i-align-left': 'justifyLeft',\n            'k-i-align-center': 'justifyCenter',\n            'k-i-align-right': 'justifyRight',\n            'k-i-align-justify': 'justifyFull',\n            'k-i-list-unordered': 'insertUnorderedList',\n            'k-i-list-ordered': 'insertOrderedList',\n            'k-i-login': 'import',\n            'k-i-indent-increase': 'indent',\n            'k-i-indent-decrease': 'outdent',\n            'k-i-link-horizontal': 'createLink',\n            'k-i-unlink-horizontal': 'unlink',\n            'k-i-image': 'insertImage',\n            'k-i-file-add': 'insertFile',\n            'k-i-html': 'viewHtml',\n            'k-i-foreground-color': 'foreColor',\n            'k-i-paint': 'backColor',\n            'k-i-table-insert': 'createTable',\n            'k-i-table-column-insert-left': 'addColumnLeft',\n            'k-i-table-column-insert-right': 'addColumnRight',\n            'k-i-table-row-insert-above': 'addRowAbove',\n            'k-i-table-row-insert-below': 'addRowBelow',\n            'k-i-table-row-delete': 'deleteRow',\n            'k-i-table-column-delete': 'deleteColumn',\n            'k-i-table-properties': 'tableWizard',\n            'k-i-table-wizard': 'tableWizardInsert',\n            'k-i-clear-css': 'cleanFormatting'\n        };\n        var OverflowAnchorTool = Tool.extend({\n            initialize: function (ui, options) {\n                ui.attr({ unselectable: 'on' });\n                var toolbar = options.editor.toolbar;\n                ui.attr('aria-controls', options.editor.element.attr('id')).on('click', $.proxy(function () {\n                    this.overflowPopup.toggle();\n                }, toolbar));\n            },\n            options: { name: OVERFLOWANCHOR },\n            command: $.noop,\n            update: $.noop,\n            destroy: $.noop\n        });\n        EditorUtils.registerTool(OVERFLOWANCHOR, new OverflowAnchorTool({\n            key: '',\n            ctrl: true,\n            template: new ToolTemplate({ template: EditorUtils.overflowAnchorTemplate })\n        }));\n        var Toolbar = Widget.extend({\n            init: function (element, options) {\n                var that = this;\n                options = extend({}, options, { name: 'EditorToolbar' });\n                Widget.fn.init.call(that, element, options);\n                if (options.popup) {\n                    that._initPopup();\n                }\n                if (options.resizable && options.resizable.toolbar) {\n                    that._resizeHandler = kendo.onResize(function () {\n                        that.resize(true);\n                    });\n                    that.element.addClass('k-toolbar-resizable');\n                }\n            },\n            events: ['execute'],\n            groups: {\n                basic: [\n                    'bold',\n                    'italic',\n                    'underline',\n                    'strikethrough'\n                ],\n                scripts: [\n                    'subscript',\n                    'superscript'\n                ],\n                alignment: [\n                    'justifyLeft',\n                    'justifyCenter',\n                    'justifyRight',\n                    'justifyFull'\n                ],\n                links: [\n                    'insertImage',\n                    'insertFile',\n                    'createLink',\n                    'unlink'\n                ],\n                lists: [\n                    'insertUnorderedList',\n                    'insertOrderedList',\n                    'indent',\n                    'outdent'\n                ],\n                tables: [\n                    'createTable',\n                    'addColumnLeft',\n                    'addColumnRight',\n                    'addRowAbove',\n                    'addRowBelow',\n                    'deleteRow',\n                    'deleteColumn'\n                ],\n                advanced: [\n                    'viewHtml',\n                    'cleanFormatting',\n                    'print',\n                    'pdf',\n                    'exportAs',\n                    'import'\n                ],\n                fonts: [\n                    'fontName',\n                    'fontSize'\n                ],\n                colors: [\n                    'foreColor',\n                    'backColor'\n                ]\n            },\n            overflowFlaseTools: [\n                'formatting',\n                'fontName',\n                'fontSize',\n                'foreColor',\n                'backColor',\n                'insertHtml'\n            ],\n            _initPopup: function () {\n                var that = this;\n                this.window = $(this.element).wrap('<div class=\\'editorToolbarWindow k-header\\' />').parent().prepend('<button class=\\'k-button k-bare k-editortoolbar-dragHandle\\'><span class=\\'k-icon k-i-handler-drag\\' /></button>').kendoWindow({\n                    title: false,\n                    resizable: false,\n                    draggable: { dragHandle: '.k-editortoolbar-dragHandle' },\n                    animation: {\n                        open: { effects: 'fade:in' },\n                        close: { effects: 'fade:out' }\n                    },\n                    minHeight: 42,\n                    visible: false,\n                    autoFocus: false,\n                    actions: [],\n                    dragend: function () {\n                        this._moved = true;\n                    }\n                }).on('mousedown', function (e) {\n                    if (!$(e.target).is('.k-icon')) {\n                        that.preventPopupHide = true;\n                    }\n                }).on('focusout', function () {\n                    that.options.editor.element.focusout();\n                }).data('kendoWindow');\n            },\n            _toggleOverflowStyles: function (element, show) {\n                element.find('> li').toggleClass('k-item k-state-default', show).find('.k-tool:not(.k-state-disabled),.k-overflow-button').toggleClass('k-overflow-button k-button', show);\n            },\n            _initOverflowPopup: function (ui) {\n                var that = this;\n                var popupTemplate = '<ul class=\\'k-editor-overflow-popup k-overflow-container k-list-container\\'></ul>';\n                that.overflowPopup = $(popupTemplate).appendTo('body').kendoPopup({\n                    anchor: ui,\n                    origin: 'bottom right',\n                    position: 'top right',\n                    copyAnchorStyles: false,\n                    open: function (e) {\n                        if (this.element.is(':empty')) {\n                            e.preventDefault();\n                        }\n                        that._toggleOverflowStyles(this.element, true);\n                        ui.attr('aria-expanded', true);\n                    },\n                    close: function () {\n                        ui.attr('aria-expanded', false);\n                    },\n                    activate: proxy(that.focusOverflowPopup, that)\n                }).data('kendoPopup');\n            },\n            items: function () {\n                var isResizable = this.options.resizable && this.options.resizable.toolbar, popup, result;\n                result = this.element.children().find('> *, select');\n                if (isResizable) {\n                    popup = this.overflowPopup;\n                    result = result.add(popup.element.children().find('> *'));\n                }\n                return result;\n            },\n            focused: function () {\n                return this.element.find('.k-state-focused').length > 0 || this.preventPopupHide || this.overflowPopup && this.overflowPopup.visible();\n            },\n            toolById: function (name) {\n                var id, tools = this.tools;\n                for (id in tools) {\n                    if (id.toLowerCase() == name) {\n                        return tools[id];\n                    }\n                }\n            },\n            toolGroupFor: function (toolName) {\n                var i, groups = this.groups;\n                if (this.isCustomTool(toolName)) {\n                    return 'custom';\n                }\n                for (i in groups) {\n                    if ($.inArray(toolName, groups[i]) >= 0) {\n                        return i;\n                    }\n                }\n            },\n            bindTo: function (editor) {\n                var that = this, window = that.window;\n                if (that._editor) {\n                    that._editor.unbind('select', proxy(that.resize, that));\n                }\n                that._editor = editor;\n                if (that.options.resizable && that.options.resizable.toolbar) {\n                    editor.options.tools.push(OVERFLOWANCHOR);\n                }\n                that.tools = that.expandTools(editor.options.tools);\n                that.render();\n                that.element.find('.k-combobox .k-input').keydown(function (e) {\n                    var combobox = $(this).closest('.k-combobox').data('kendoComboBox'), key = e.keyCode;\n                    if (key == keys.RIGHT || key == keys.LEFT) {\n                        combobox.close();\n                    } else if (key == keys.DOWN) {\n                        if (!combobox.dropDown.isOpened()) {\n                            e.stopImmediatePropagation();\n                            combobox.open();\n                        }\n                    }\n                });\n                that._attachEvents();\n                that.items().each(function initializeTool() {\n                    var toolName = that._toolName(this), tool = toolName !== 'moreVertical' ? that.tools[toolName] : that.tools.overflowAnchor, options = tool && tool.options, messages = editor.options.messages, description = options && options.tooltip || messages[toolName], ui = $(this);\n                    if (!tool || !tool.initialize) {\n                        return;\n                    }\n                    if (toolName == 'fontSize' || toolName == 'fontName') {\n                        var inheritText = messages[toolName + 'Inherit'];\n                        ui.find('input').val(inheritText).end().find('span.k-input').text(inheritText).end();\n                    }\n                    tool.initialize(ui, {\n                        title: that._appendShortcutSequence(description, tool),\n                        editor: that._editor\n                    });\n                    ui.closest('.k-widget', that.element).addClass('k-editor-widget');\n                    ui.closest('.k-colorpicker', that.element).next('.k-colorpicker').addClass('k-editor-widget');\n                });\n                editor.bind('select', proxy(that.resize, that));\n                that.update();\n                if (window) {\n                    window.wrapper.css({\n                        top: '',\n                        left: '',\n                        width: ''\n                    });\n                }\n            },\n            show: function () {\n                var that = this, window = that.window, editorOptions = that.options.editor, wrapper, editorElement, editorOffset, browser = kendo.support.browser;\n                if (window) {\n                    wrapper = window.wrapper;\n                    editorElement = editorOptions.element;\n                    if (!wrapper.is(':visible') || !that.window.options.visible) {\n                        if (!wrapper[0].style.width) {\n                            wrapper.width(this._getWindowWidth());\n                        }\n                        if (!window._moved) {\n                            editorOffset = editorElement.offset();\n                            wrapper.css({\n                                top: Math.max(0, parseInt(editorOffset.top, 10) - outerHeight(wrapper) - parseInt(that.window.element.css('padding-bottom'), 10)),\n                                left: Math.max(0, parseInt(editorOffset.left, 10))\n                            });\n                        }\n                        if ((browser.msie || browser.edge) && that._overlaps(editorElement)) {\n                            setTimeout(function () {\n                                window.open();\n                            }, 0);\n                        } else {\n                            window.open();\n                        }\n                    }\n                }\n            },\n            _getWindowWidth: function () {\n                var that = this, wrapper = that.window.wrapper, editorElement = that.options.editor.element;\n                return outerWidth(editorElement) - parseInt(wrapper.css('border-left-width'), 10) - parseInt(wrapper.css('border-right-width'), 10);\n            },\n            _overlaps: function (box) {\n                var toolbarWrapper = this.window.wrapper, toolbarWrapperOffset = toolbarWrapper.offset(), toolbarWrapperLeft = toolbarWrapperOffset.left, toolbarWrapperTop = toolbarWrapperOffset.top, boxOffset = box.offset(), boxOffsetLeft = boxOffset.left, boxOffsetTop = boxOffset.top;\n                return !(boxOffsetLeft + box.width() < toolbarWrapperLeft || boxOffsetLeft > toolbarWrapperLeft + toolbarWrapper.width() || boxOffsetTop + box.height() < toolbarWrapperTop || boxOffsetTop > toolbarWrapperTop + toolbarWrapper.height());\n            },\n            hide: function () {\n                if (this.window) {\n                    this.window.close();\n                }\n            },\n            focus: function () {\n                var TABINDEX = 'tabIndex';\n                var element = this.element;\n                var tabIndex = this._editor.element.attr(TABINDEX);\n                element.attr(TABINDEX, tabIndex || 0).focus().find(focusable).first().focus();\n                if (!tabIndex && tabIndex !== 0) {\n                    element.removeAttr(TABINDEX);\n                }\n            },\n            focusOverflowPopup: function () {\n                var TABINDEX = 'tabIndex';\n                var element = this.overflowPopup.element;\n                var tabIndex = this._editor.element.attr(TABINDEX);\n                element.closest('.k-animation-container').addClass('k-overflow-wrapper');\n                element.attr(TABINDEX, tabIndex || 0).find(focusable).first().focus();\n                if (!tabIndex && tabIndex !== 0) {\n                    element.removeAttr(TABINDEX);\n                }\n            },\n            _appendShortcutSequence: function (localizedText, tool) {\n                if (!tool.key) {\n                    return localizedText;\n                }\n                var res = localizedText + ' (';\n                if (tool.ctrl) {\n                    res += 'Ctrl + ';\n                }\n                if (tool.shift) {\n                    res += 'Shift + ';\n                }\n                if (tool.alt) {\n                    res += 'Alt + ';\n                }\n                res += tool.key + ')';\n                return res;\n            },\n            _nativeTools: [\n                'insertLineBreak',\n                'insertParagraph',\n                'redo',\n                'undo',\n                'autoLink'\n            ],\n            tools: {},\n            isCustomTool: function (toolName) {\n                return !(toolName in kendo.ui.Editor.defaultTools);\n            },\n            expandTools: function (tools) {\n                var currentTool, i, nativeTools = this._nativeTools, options, defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools), result = {}, name;\n                for (i = 0; i < tools.length; i++) {\n                    currentTool = tools[i];\n                    name = currentTool.name;\n                    if ($.isPlainObject(currentTool)) {\n                        if (name && defaultTools[name]) {\n                            result[name] = extend({}, defaultTools[name]);\n                            extend(result[name].options, currentTool);\n                        } else {\n                            options = extend({\n                                cssClass: 'k-i-gear',\n                                type: 'button',\n                                title: ''\n                            }, currentTool);\n                            if (!options.name) {\n                                options.name = 'custom';\n                            }\n                            options.cssClass = 'k-' + options.name;\n                            if (!options.template && options.type == 'button') {\n                                options.template = editorNS.EditorUtils.buttonTemplate;\n                                options.title = options.title || options.tooltip;\n                            }\n                            result[name] = { options: options };\n                        }\n                    } else if (defaultTools[currentTool]) {\n                        result[currentTool] = defaultTools[currentTool];\n                    }\n                }\n                for (i = 0; i < nativeTools.length; i++) {\n                    if (!result[nativeTools[i]]) {\n                        result[nativeTools[i]] = defaultTools[nativeTools[i]];\n                    }\n                }\n                return result;\n            },\n            render: function () {\n                var that = this, tools = that.tools, options, template, toolElement, toolName, editorElement = that._editor.element, element = that.element.empty(), groupName, newGroupName, toolConfig = that._editor.options.tools, browser = kendo.support.browser, group, i, groupPosition = 0, resizable = that.options.resizable && that.options.resizable.toolbar, overflowFlaseTools = this.overflowFlaseTools;\n                function stringify(template) {\n                    var result;\n                    if (template.getHtml) {\n                        result = template.getHtml();\n                    } else {\n                        if (!$.isFunction(template)) {\n                            template = kendo.template(template);\n                        }\n                        result = template(options);\n                    }\n                    return $.trim(result);\n                }\n                function endGroup() {\n                    if (group.children().length) {\n                        if (resizable) {\n                            group.data('position', groupPosition);\n                            groupPosition++;\n                        }\n                        group.appendTo(element);\n                    }\n                }\n                function startGroup(toolName) {\n                    if (toolName !== OVERFLOWANCHOR) {\n                        group = $('<li class=\\'k-tool-group\\' role=\\'presentation\\' />');\n                        group.data('overflow', $.inArray(toolName, overflowFlaseTools) === -1 ? true : false);\n                    } else {\n                        group = $('<li class=\\'k-overflow-tools\\' />');\n                    }\n                }\n                element.empty();\n                if (toolConfig.length) {\n                    toolName = toolConfig[0].name || toolConfig[0];\n                }\n                startGroup(toolName, overflowFlaseTools);\n                for (i = 0; i < toolConfig.length; i++) {\n                    toolName = toolConfig[i].name || toolConfig[i];\n                    options = tools[toolName] && tools[toolName].options;\n                    if (!options && $.isPlainObject(toolName)) {\n                        options = toolName;\n                    }\n                    template = options && options.template;\n                    if (toolName == 'break') {\n                        endGroup();\n                        $('<li class=\\'k-row-break\\' />').appendTo(that.element);\n                        startGroup(toolName, overflowFlaseTools);\n                    }\n                    if (!template) {\n                        continue;\n                    }\n                    newGroupName = that.toolGroupFor(toolName);\n                    if (groupName != newGroupName || toolName == OVERFLOWANCHOR) {\n                        endGroup();\n                        startGroup(toolName, overflowFlaseTools);\n                        groupName = newGroupName;\n                    }\n                    if (toolName == OVERFLOWANCHOR) {\n                        template.options.title = that.options.messages.overflowAnchor;\n                    }\n                    template = stringify(template);\n                    toolElement = $(template).appendTo(group);\n                    if (newGroupName == 'custom') {\n                        endGroup();\n                        startGroup(toolName, overflowFlaseTools);\n                    }\n                    if (options.exec && toolElement.hasClass('k-tool')) {\n                        toolElement.click(proxy(options.exec, editorElement[0]));\n                    }\n                }\n                endGroup();\n                $(that.element).children(':has(> .k-tool)').addClass('k-button-group');\n                if (that.options.popup && browser.msie && browser.version < 9) {\n                    that.window.wrapper.find('*').attr('unselectable', 'on');\n                }\n                that.updateGroups();\n                if (resizable) {\n                    that._initOverflowPopup(that.element.find('.k-overflow-anchor'));\n                }\n                that.angular('compile', function () {\n                    return { elements: that.element };\n                });\n            },\n            updateGroups: function () {\n                $(this.element).children().each(function () {\n                    $(this).addClass('k-state-disabled');\n                    $(this).children().filter(function () {\n                        return !$(this).hasClass('k-state-disabled');\n                    }).removeClass('k-group-end').first().addClass('k-group-start').end().last().addClass('k-group-end').end().parent().removeClass('k-state-disabled').css('display', '');\n                });\n            },\n            decorateFrom: function (body) {\n                this.items().filter('.k-decorated').each(function () {\n                    var selectBox = $(this).data('kendoSelectBox');\n                    if (selectBox) {\n                        selectBox.decorate(body);\n                    }\n                });\n            },\n            destroy: function () {\n                Widget.fn.destroy.call(this);\n                var id, tools = this.tools;\n                for (id in tools) {\n                    if (tools[id].destroy) {\n                        tools[id].destroy();\n                    }\n                }\n                if (this.window) {\n                    this.window.destroy();\n                }\n                if (this._resizeHandler) {\n                    kendo.unbindResize(this._resizeHandler);\n                }\n                if (this.overflowPopup) {\n                    this.overflowPopup.destroy();\n                }\n            },\n            _attachEvents: function () {\n                var that = this, popupElement = that.overflowPopup ? that.overflowPopup.element : $([]);\n                that.attachToolsEvents(that.element.add(popupElement));\n            },\n            attachToolsEvents: function (element) {\n                var that = this, buttons = '[role=button].k-tool', enabledButtons = buttons + ':not(.k-state-disabled)', disabledButtons = buttons + '.k-state-disabled', dropdown = '.k-dropdown', colorpicker = '.k-colorpicker', editorTools = [\n                        buttons,\n                        dropdown,\n                        colorpicker\n                    ].join(',');\n                element.off(NS).on('mouseenter' + NS, enabledButtons, function () {\n                    $(this).addClass('k-state-hover');\n                }).on('mouseleave' + NS, enabledButtons, function () {\n                    $(this).removeClass('k-state-hover');\n                }).on('mousedown' + NS, editorTools, function (e) {\n                    e.preventDefault();\n                }).on('keydown' + NS, focusable, function (e) {\n                    var current = this;\n                    var resizable = that.options.resizable && that.options.resizable.toolbar;\n                    var direction = kendo.support.isRtl(that.element) ? -1 : 1;\n                    var focusableItems;\n                    var focusElement, currentContainer, keyCode = e.keyCode;\n                    function move(direction, container, constrain) {\n                        var tools = container.find(focusable);\n                        var index = tools.index(current) + direction;\n                        if (constrain) {\n                            index = Math.max(0, Math.min(tools.length - 1, index));\n                        }\n                        return tools[index];\n                    }\n                    if (keyCode == keys.RIGHT || keyCode == keys.LEFT) {\n                        if (!$(current).is('.k-dropdown')) {\n                            focusElement = move(keyCode == keys.RIGHT ? 1 * direction : -1 * direction, that.element, true);\n                        } else {\n                            focusElement = $(current);\n                        }\n                    } else if (resizable && (keyCode == keys.UP || keyCode == keys.DOWN)) {\n                        focusElement = move(keyCode == keys.DOWN ? 1 : -1, that.overflowPopup.element, true);\n                    } else if (keyCode == keys.HOME) {\n                        focusElement = that.element.find(focusable)[0];\n                        e.preventDefault();\n                    } else if (keyCode == keys.END) {\n                        focusableItems = that.element.find(focusable).filter(function () {\n                            return $(this).css('visibility') !== 'hidden';\n                        });\n                        focusElement = focusableItems[focusableItems.length - 1];\n                        e.preventDefault();\n                    } else if (keyCode == keys.ESC) {\n                        if (that.overflowPopup && that.overflowPopup.visible()) {\n                            that.overflowPopup.close();\n                        }\n                        focusElement = that._editor;\n                    } else if (keyCode == keys.TAB && !(e.ctrlKey || e.altKey)) {\n                        if (resizable) {\n                            currentContainer = $(current.parentElement).hasClass('k-overflow-tool-group') ? that.overflowPopup.element : that.element;\n                        } else {\n                            currentContainer = that.element;\n                        }\n                        if (e.shiftKey) {\n                            focusElement = move(-1, currentContainer);\n                        } else {\n                            focusElement = move(1, currentContainer);\n                            if (!focusElement || $(focusElement).closest('.k-overflow-tools').css('visibility') === 'hidden') {\n                                focusElement = that._editor;\n                            }\n                        }\n                    }\n                    if (focusElement) {\n                        e.preventDefault();\n                        focusElement.focus();\n                    }\n                    if ((keyCode === keys.ENTER || keyCode === keys.SPACEBAR) && $(current).is('a') && !$(current).attr('href')) {\n                        that._executeToolCommand(current, e);\n                    }\n                }).on('click' + NS, enabledButtons, function (e) {\n                    that._executeToolCommand(this, e);\n                }).on('click' + NS, disabledButtons, function (e) {\n                    e.preventDefault();\n                });\n            },\n            _executeToolCommand: function (toolElement, e) {\n                var that = this;\n                var button = $(toolElement);\n                e.preventDefault();\n                e.stopPropagation();\n                button.removeClass('k-state-hover');\n                if (!button.is('[data-popup]')) {\n                    that._editor.exec(that._toolName(toolElement));\n                }\n            },\n            _toolName: function (element) {\n                if (!element) {\n                    return;\n                }\n                var className = element.className;\n                if (/k-tool\\b/i.test(className)) {\n                    className = element.firstChild.className;\n                }\n                var tool = $.grep(className.split(' '), function (x) {\n                    return !/^k-(widget|tool|tool-icon|icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(x);\n                });\n                if (tool[0]) {\n                    var toolname = tool[0];\n                    if (toolNamesByCssClass[toolname]) {\n                        toolname = toolNamesByCssClass[toolname];\n                    }\n                    if (toolname.indexOf('k-i-') >= 0) {\n                        return kendo.toCamelCase(toolname.substring(toolname.indexOf('k-i-') + 4));\n                    } else {\n                        return toolname.substring(toolname.lastIndexOf('-') + 1);\n                    }\n                }\n                return 'custom';\n            },\n            refreshTools: function () {\n                var that = this, editor = that._editor, range = editor.getRange(), nodes = editorNS.RangeUtils.textNodes(range), immutables = editor.options.immutables, immutablesContext = that._immutablesContext(range);\n                nodes = editorNS.Dom.filterBy(nodes, editorNS.Dom.htmlIndentSpace, true);\n                if (!nodes.length) {\n                    nodes = [range.startContainer];\n                }\n                that.items().each(function () {\n                    var tool = that.tools[that._toolName(this)];\n                    if (tool) {\n                        var ui = $(this);\n                        if (tool.update) {\n                            tool.update(ui, nodes);\n                        }\n                        if (immutables) {\n                            that._updateImmutablesState(tool, ui, immutablesContext);\n                        }\n                    }\n                });\n                this.update();\n            },\n            _immutablesContext: function (range) {\n                if (this._editor.options.immutables) {\n                    if (range.collapsed) {\n                        return editorNS.Immutables.immutablesContext(range);\n                    } else {\n                        return editorNS.RangeUtils.editableTextNodes(range).length === 0;\n                    }\n                }\n            },\n            _updateImmutablesState: function (tool, ui, immutablesContext) {\n                var name = tool.name;\n                var uiElement = ui;\n                var trackImmutables = tool.options.trackImmutables;\n                if (trackImmutables === undefined) {\n                    trackImmutables = $.inArray(name, editorNS.Immutables.toolsToBeUpdated) > -1;\n                }\n                if (trackImmutables) {\n                    var display = immutablesContext ? 'none' : '';\n                    if (!ui.is('.k-tool')) {\n                        var uiData = ui.data();\n                        for (var key in uiData) {\n                            if (key.match(/^kendo[A-Z][a-zA-Z]*/)) {\n                                var widget = uiData[key];\n                                uiElement = widget.wrapper;\n                                break;\n                            }\n                        }\n                    }\n                    uiElement.css('display', display);\n                    var groupUi = uiElement.closest('li');\n                    if (groupUi.children(':visible').length === 0) {\n                        groupUi.css('display', display);\n                    }\n                }\n            },\n            update: function () {\n                this.updateGroups();\n            },\n            _resize: function (e) {\n                var containerWidth = e.width;\n                var resizable = this.options.resizable && this.options.resizable.toolbar;\n                var popup = this.overflowPopup;\n                var editorElement = this.options.editor.element;\n                var toolbarWindow = this.window;\n                this.refreshTools();\n                if (!resizable) {\n                    return;\n                }\n                if (toolbarWindow) {\n                    toolbarWindow.wrapper.width(this._getWindowWidth());\n                    if (!toolbarWindow._moved) {\n                        toolbarWindow.wrapper.css({ left: Math.max(0, parseInt(editorElement.offset().left, 10)) });\n                    }\n                }\n                if (popup.visible()) {\n                    popup.close(true);\n                }\n                this._refreshWidths();\n                this._shrink(containerWidth);\n                this._stretch(containerWidth);\n                this._toggleOverflowStyles(this.element, false);\n                this._toggleOverflowStyles(this.overflowPopup.element, true);\n                this.element.children('li.k-overflow-tools').css('visibility', popup.element.is(':empty') ? 'hidden' : 'visible');\n            },\n            _refreshWidths: function () {\n                this.element.children('li').each(function (idx, element) {\n                    var group = $(element);\n                    group.data('outerWidth', outerWidth(group, true));\n                });\n            },\n            _shrink: function (width) {\n                var group, visibleGroups;\n                if (width < this._groupsWidth()) {\n                    visibleGroups = this._visibleGroups().filter(':not(.k-overflow-tools)');\n                    for (var i = visibleGroups.length - 1; i >= 0; i--) {\n                        group = visibleGroups.eq(i);\n                        if (width > this._groupsWidth()) {\n                            break;\n                        } else {\n                            this._hideGroup(group);\n                        }\n                    }\n                }\n            },\n            _stretch: function (width) {\n                var group, hiddenGroups;\n                if (width > this._groupsWidth()) {\n                    hiddenGroups = this._hiddenGroups();\n                    for (var i = 0; i < hiddenGroups.length; i++) {\n                        group = hiddenGroups.eq(i);\n                        if (width < this._groupsWidth() || !this._showGroup(group, width)) {\n                            break;\n                        }\n                    }\n                }\n            },\n            _hiddenGroups: function () {\n                var popup = this.overflowPopup;\n                var hiddenGroups = this.element.children('li.k-tool-group').filter(':hidden');\n                hiddenGroups = hiddenGroups.add(popup.element.children('li'));\n                hiddenGroups.sort(function (a, b) {\n                    return $(a).data('position') > $(b).data('position') ? 1 : -1;\n                });\n                return hiddenGroups;\n            },\n            _visibleGroups: function () {\n                return this.element.children('li.k-tool-group, li.k-overflow-tools').filter(':visible');\n            },\n            _groupsWidth: function () {\n                var width = 0;\n                this._visibleGroups().each(function () {\n                    width += $(this).data('outerWidth');\n                });\n                return Math.ceil(width);\n            },\n            _hideGroup: function (group) {\n                if (group.data('overflow')) {\n                    var popup = this.overflowPopup;\n                    group.detach().prependTo(popup.element).addClass('k-overflow-tool-group');\n                } else {\n                    group.hide();\n                }\n            },\n            _showGroup: function (group, width) {\n                var position, previous;\n                if (group.length && width > this._groupsWidth() + group.data('outerWidth') && !group.hasClass('k-state-disabled')) {\n                    if (group.hasClass('k-overflow-tool-group')) {\n                        position = group.data('position');\n                        if (position === 0) {\n                            group.detach().prependTo(this.element);\n                        } else {\n                            previous = this.element.children().filter(function (idx, element) {\n                                return $(element).data('position') === position - 1;\n                            });\n                            group.detach().insertAfter(previous);\n                        }\n                        group.removeClass('k-overflow-tool-group');\n                    } else {\n                        group.show();\n                    }\n                    return true;\n                }\n                return false;\n            }\n        });\n        $.extend(editorNS, { Toolbar: Toolbar });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/viewhtml', ['editor/command'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, dom = Editor.Dom;\n        var ViewHtmlCommand = Command.extend({\n            init: function (options) {\n                var cmd = this;\n                cmd.options = options;\n                Command.fn.init.call(cmd, options);\n                cmd.attributes = null;\n                cmd.async = true;\n            },\n            exec: function () {\n                var that = this, editor = that.editor, options = editor.options, messages = editor.options.messages, dialog = $(kendo.template(ViewHtmlCommand.template)(messages)).appendTo(document.body), textarea = '.k-editor-textarea', content, comments;\n                options.serialization.immutables = editor.immutables;\n                comments = dom.getAllComments(editor.body);\n                content = EditorUtils.cacheComments(editor.value(), comments);\n                content = ViewHtmlCommand.indent(content);\n                content = EditorUtils.retrieveComments(content, comments);\n                options.serialization.immutables = undefined;\n                function apply(e) {\n                    options.deserialization.immutables = editor.immutables;\n                    editor.value(dialog.find(textarea).val());\n                    options.deserialization.immutables = undefined;\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                    editor.trigger('change');\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.data('kendoWindow').destroy();\n                    if (editor.immutables) {\n                        editor.immutables.serializedImmutables = {};\n                    }\n                    editor.focus();\n                }\n                this.createDialog(dialog, {\n                    title: messages.viewHtml,\n                    close: close,\n                    visible: false\n                }).find(textarea).val(content).end().find('.k-dialog-update').click(apply).end().find('.k-dialog-close').click(close).end().data('kendoWindow').center().open();\n                dialog.find(textarea).focus();\n            }\n        });\n        extend(ViewHtmlCommand, {\n            template: '<div class=\\'k-editor-dialog k-popup-edit-form k-viewhtml-dialog\\'>' + '<div class=\\'k-edit-form-container\\'></div>' + '<textarea class=\\'k-editor-textarea k-input\\'></textarea>' + '<div class=\\'k-edit-buttons k-state-default\\'>' + '<button class=\\'k-dialog-update k-button k-primary\\'>#: dialogUpdate #</button>' + '<button class=\\'k-dialog-close k-button\\'>#: dialogCancel #</button>' + '</div>' + '</div>' + '</div>',\n            indent: function (content) {\n                return content.replace(/<\\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi, '</$1>\\n').replace(/<(ul|ol)([^>]*)><li/gi, '<$1$2>\\n<li').replace(/<br \\/>/gi, '<br />\\n').replace(/\\n$/, '');\n            }\n        });\n        kendo.ui.editor.ViewHtmlCommand = ViewHtmlCommand;\n        Editor.EditorUtils.registerTool('viewHtml', new Tool({\n            command: ViewHtmlCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'View HTML'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/format', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, Tool = Editor.Tool, Command = Editor.Command, EditorUtils = Editor.EditorUtils;\n        var FormatCommand = Command.extend({\n            init: function (options) {\n                options.formatter = options.formatter();\n                var finder = options.formatter.finder;\n                if (finder && EditorUtils.formatByName('immutable', finder.format)) {\n                    finder._initOptions({ immutables: options.immutables });\n                }\n                Command.fn.init.call(this, options);\n            }\n        });\n        var FormatTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n            },\n            command: function (commandArguments) {\n                var that = this;\n                return new FormatCommand(extend(commandArguments, { formatter: that.options.formatter }));\n            },\n            update: function (ui, nodes) {\n                var isFormatted = this.options.finder.isFormatted(nodes);\n                ui.toggleClass('k-state-selected', isFormatted);\n                ui.attr('aria-pressed', isFormatted);\n            }\n        });\n        $.extend(Editor, {\n            FormatCommand: FormatCommand,\n            FormatTool: FormatTool\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/inlineformat', ['editor/plugins/format'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, Editor = kendo.ui.editor, formats = kendo.ui.Editor.fn.options.formats, EditorUtils = Editor.EditorUtils, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, extend = $.extend, registerTool = Editor.EditorUtils.registerTool, registerFormat = Editor.EditorUtils.registerFormat, MOUSEDOWN_NS = 'mousedown.kendoEditor', KEYDOWN_NS = 'keydown.kendoEditor', KMARKER = 'k-marker';\n        var InlineFormatFinder = Class.extend({\n            init: function (format) {\n                this.format = format;\n            },\n            numberOfSiblings: function (referenceNode) {\n                var textNodesCount = 0, elementNodesCount = 0, markerCount = 0, parentNode = referenceNode.parentNode, node;\n                for (node = parentNode.firstChild; node; node = node.nextSibling) {\n                    if (node != referenceNode) {\n                        if (node.className == KMARKER) {\n                            markerCount++;\n                        } else if (node.nodeType == 3) {\n                            textNodesCount++;\n                        } else {\n                            elementNodesCount++;\n                        }\n                    }\n                }\n                if (markerCount > 1 && parentNode.firstChild.className == KMARKER && parentNode.lastChild.className == KMARKER) {\n                    return 0;\n                } else {\n                    return elementNodesCount + textNodesCount;\n                }\n            },\n            findSuitable: function (sourceNode, skip) {\n                if (!skip && this.numberOfSiblings(sourceNode) > 0) {\n                    return null;\n                }\n                var node = sourceNode.parentNode;\n                var tags = this.format[0].tags;\n                while (!dom.ofType(node, tags)) {\n                    if (this.numberOfSiblings(node) > 0) {\n                        return null;\n                    }\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            findFormat: function (sourceNode) {\n                var format = this.format, attrEquals = dom.attrEquals, i, len, node, tags, attributes;\n                for (i = 0, len = format.length; i < len; i++) {\n                    node = sourceNode;\n                    tags = format[i].tags;\n                    attributes = format[i].attr;\n                    if (node && dom.ofType(node, tags) && attrEquals(node, attributes)) {\n                        return node;\n                    }\n                    while (node) {\n                        node = dom.parentOfType(node, tags);\n                        if (node && attrEquals(node, attributes)) {\n                            return node;\n                        }\n                    }\n                }\n                return null;\n            },\n            isFormatted: function (nodes) {\n                var i, len;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    if (this.findFormat(nodes[i])) {\n                        return true;\n                    }\n                }\n                return false;\n            }\n        });\n        var InlineFormatter = Class.extend({\n            init: function (format, values) {\n                this.finder = new InlineFormatFinder(format);\n                this.attributes = extend({}, format[0].attr, values);\n                this.tag = format[0].tags[0];\n            },\n            wrap: function (node) {\n                return dom.wrap(node, dom.create(node.ownerDocument, this.tag, this.attributes));\n            },\n            activate: function (range, nodes) {\n                if (this.finder.isFormatted(nodes)) {\n                    this.split(range);\n                    this.remove(nodes);\n                } else {\n                    this.apply(nodes);\n                }\n            },\n            toggle: function (range) {\n                var textNodes = this.immutables() ? RangeUtils.editableTextNodes : RangeUtils.textNodes;\n                var nodes = textNodes(range);\n                if (nodes.length > 0) {\n                    this.activate(range, nodes);\n                }\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            apply: function (nodes) {\n                var formatNodes = [];\n                var i, l, node, formatNode;\n                if (nodes.length > 1) {\n                    for (i = 0, l = nodes.length; i < l; i++) {\n                        node = nodes[i];\n                        formatNode = this.format(node, true);\n                        formatNodes.push(formatNode);\n                    }\n                } else {\n                    node = nodes[0];\n                    formatNode = this.format(node, false);\n                }\n                this.consolidate(formatNodes);\n            },\n            format: function (node, outerMostInline) {\n                var formatNode = this.finder.findSuitable(node);\n                var attributes = this.attributes;\n                var styleAttr = attributes ? attributes.style || {} : {};\n                if (formatNode) {\n                    if (dom.is(formatNode, 'font')) {\n                        if (styleAttr.color) {\n                            formatNode.removeAttribute('color');\n                        }\n                        if (styleAttr.fontName) {\n                            formatNode.removeAttribute('face');\n                        }\n                        if (styleAttr.fontSize) {\n                            formatNode.removeAttribute('size');\n                        }\n                    }\n                    dom.attr(formatNode, attributes);\n                } else {\n                    while (!dom.isBlock(node.parentNode) && node.parentNode.childNodes.length == 1 && node.parentNode.contentEditable !== 'true' && outerMostInline) {\n                        node = node.parentNode;\n                    }\n                    formatNode = this.wrap(node);\n                }\n                return formatNode;\n            },\n            remove: function (nodes) {\n                var i, l, formatNode;\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        if (this.attributes && this.attributes.style) {\n                            dom.unstyle(formatNode, this.attributes.style);\n                            if (!formatNode.style.cssText && !formatNode.attributes['class']) {\n                                dom.unwrap(formatNode);\n                            }\n                        } else {\n                            dom.unwrap(formatNode);\n                        }\n                    }\n                }\n            },\n            split: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                var l = nodes.length;\n                var i, formatNode;\n                if (l > 0) {\n                    for (i = 0; i < l; i++) {\n                        formatNode = this.finder.findFormat(nodes[i]);\n                        if (formatNode) {\n                            RangeUtils.split(range, formatNode, true);\n                        }\n                    }\n                }\n            },\n            consolidate: function (nodes) {\n                var node, last;\n                while (nodes.length > 1) {\n                    node = nodes.pop();\n                    last = nodes[nodes.length - 1];\n                    if (node.previousSibling && node.previousSibling.className == KMARKER) {\n                        last.appendChild(node.previousSibling);\n                    }\n                    if (node.tagName == last.tagName && node.previousSibling == last && node.style.cssText == last.style.cssText && node.className === last.className) {\n                        while (node.firstChild) {\n                            last.appendChild(node.firstChild);\n                        }\n                        dom.remove(node);\n                    }\n                }\n            }\n        });\n        var GreedyInlineFormatFinder = InlineFormatFinder.extend({\n            init: function (format, greedyProperty) {\n                this.format = format;\n                this.greedyProperty = greedyProperty;\n                InlineFormatFinder.fn.init.call(this, format);\n            },\n            getInlineCssValue: function (node) {\n                var attributes = node.attributes;\n                var trim = $.trim;\n                var i, l, attribute, name, attributeValue, css, pair, cssIndex, len;\n                var propertyAndValue, property, value;\n                if (!attributes) {\n                    return;\n                }\n                for (i = 0, l = attributes.length; i < l; i++) {\n                    attribute = attributes[i];\n                    name = attribute.nodeName;\n                    attributeValue = attribute.nodeValue;\n                    if (attribute.specified && name == 'style') {\n                        css = trim(attributeValue || node.style.cssText).split(';');\n                        for (cssIndex = 0, len = css.length; cssIndex < len; cssIndex++) {\n                            pair = css[cssIndex];\n                            if (pair.length) {\n                                propertyAndValue = pair.split(':');\n                                property = trim(propertyAndValue[0].toLowerCase());\n                                value = trim(propertyAndValue[1]);\n                                if (property != this.greedyProperty) {\n                                    continue;\n                                }\n                                return property.indexOf('color') >= 0 ? dom.toHex(value) : value;\n                            }\n                        }\n                    }\n                }\n            },\n            getFormatInner: function (node) {\n                var $node = $(dom.isDataNode(node) ? node.parentNode : node);\n                var parents = $node.parentsUntil('[contentEditable]').addBack().toArray().reverse();\n                var i, len, value;\n                for (i = 0, len = parents.length; i < len; i++) {\n                    value = this.greedyProperty == 'className' ? parents[i].className : this.getInlineCssValue(parents[i]);\n                    if (value) {\n                        return value;\n                    }\n                }\n                return 'inherit';\n            },\n            getFormat: function (nodes) {\n                var result = this.getFormatInner(nodes[0]), i, len;\n                for (i = 1, len = nodes.length; i < len; i++) {\n                    if (result != this.getFormatInner(nodes[i])) {\n                        return '';\n                    }\n                }\n                return result;\n            },\n            isFormatted: function (nodes) {\n                return this.getFormat(nodes) !== '';\n            }\n        });\n        var GreedyInlineFormatter = InlineFormatter.extend({\n            init: function (format, values, greedyProperty) {\n                InlineFormatter.fn.init.call(this, format, values);\n                this.values = values;\n                this.finder = new GreedyInlineFormatFinder(format, greedyProperty);\n                if (greedyProperty) {\n                    this.greedyProperty = kendo.toCamelCase(greedyProperty);\n                }\n            },\n            activate: function (range, nodes) {\n                var greedyProperty = this.greedyProperty;\n                var action = 'apply';\n                this.split(range);\n                if (greedyProperty && this.values.style[greedyProperty] == 'inherit') {\n                    action = 'remove';\n                }\n                this[action](nodes);\n            }\n        });\n        var InlineFormatTool = FormatTool.extend({\n            init: function (options) {\n                FormatTool.fn.init.call(this, extend(options, {\n                    finder: new InlineFormatFinder(options.format),\n                    formatter: function () {\n                        return new InlineFormatter(options.format);\n                    }\n                }));\n            }\n        });\n        var DelayedExecutionTool = Tool.extend({\n            update: function (ui, nodes) {\n                var list = ui.data(this.type);\n                list.close();\n                list.value(this.finder.getFormat(nodes));\n            }\n        });\n        var FontTool = DelayedExecutionTool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.type = kendo.support.browser.msie || kendo.support.touch ? 'kendoDropDownList' : 'kendoComboBox';\n                this.format = [{\n                        tags: [\n                            'span',\n                            'font'\n                        ]\n                    }];\n                this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n            },\n            command: function (commandArguments) {\n                var options = this.options, format = this.format, style = {};\n                return new Editor.FormatCommand(extend(commandArguments, {\n                    formatter: function () {\n                        style[options.domAttr] = commandArguments.value;\n                        return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                    }\n                }));\n            },\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor, options = this.options, toolName = options.name, dataSource, range, defaultValue = [];\n                if (options.defaultValue) {\n                    defaultValue = [{\n                            text: editor.options.messages[options.defaultValue[0].text],\n                            value: options.defaultValue[0].value\n                        }];\n                }\n                dataSource = defaultValue.concat(options.items ? options.items : editor.options[toolName] || []);\n                ui.attr({ title: initOptions.title });\n                ui[this.type]({\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    dataSource: dataSource,\n                    change: function () {\n                        editor._range = range;\n                        Tool.exec(editor, toolName, this.value());\n                    },\n                    close: function () {\n                        setTimeout(function () {\n                            editor._deleteSavedRange();\n                        }, 0);\n                    },\n                    highlightFirst: false\n                });\n                ui.closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n                var widget = ui.data(this.type);\n                widget.value('inherit');\n                widget.wrapper.on(MOUSEDOWN_NS, '.k-select,.k-input', function () {\n                    var newRange = editor.getRange();\n                    range = editor._containsRange(newRange) ? newRange : range;\n                }).on(KEYDOWN_NS, function (e) {\n                    if (e.keyCode === kendo.keys.ENTER) {\n                        editor._deleteSavedRange();\n                        e.preventDefault();\n                    }\n                });\n            }\n        });\n        var ColorTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.format = [{\n                        tags: [\n                            'span',\n                            'font'\n                        ]\n                    }];\n                this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n            },\n            options: { palette: 'websafe' },\n            update: function () {\n                this._widget.close();\n            },\n            command: function (commandArguments) {\n                var options = this.options, format = this.format, style = {};\n                return new Editor.FormatCommand(extend(commandArguments, {\n                    formatter: function () {\n                        style[options.domAttr] = commandArguments.value;\n                        return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                    }\n                }));\n            },\n            initialize: function (ui, initOptions) {\n                var that = this, editor = initOptions.editor, toolName = this.name, options = extend({}, ColorTool.fn.options, this.options), palette = options.palette, columns = options.columns;\n                ui = this._widget = new kendo.ui.ColorPicker(ui, {\n                    toolIcon: 'k-icon k-i-' + EditorUtils.getToolCssClass(options.name),\n                    palette: palette,\n                    columns: columns,\n                    change: function () {\n                        var color = ui.value();\n                        if (kendo.support.browser.msie && that.storedRange && that._inputFocused) {\n                            editor.selectRange(that.storedRange);\n                        }\n                        if (color) {\n                            Tool.exec(editor, toolName, color);\n                        }\n                        delete that.storedRange;\n                        delete that._inputFocused;\n                        editor.focus();\n                    },\n                    open: function (e) {\n                        var picker = e.sender;\n                        that.storedRange = editor.getRange();\n                        picker._popup.element.on(MOUSEDOWN_NS, function (e) {\n                            if (!$(e.target).is('input.k-color-value')) {\n                                e.preventDefault();\n                            }\n                        });\n                        if (!picker._popup.element.is('[unselectable=\\'on\\']')) {\n                            picker._popup.element.attr({ unselectable: 'on' }).find('*:not(input)').attr('unselectable', 'on').end().find('input').on('focus', function () {\n                                that._inputFocused = true;\n                            });\n                        }\n                    },\n                    close: function (e) {\n                        e.sender._popup.element.off(MOUSEDOWN_NS);\n                        if (kendo.support.browser.msie && that.storedRange && that._inputFocused) {\n                            editor.selectRange(that.storedRange);\n                        }\n                    },\n                    activate: function (e) {\n                        e.preventDefault();\n                        if (e.sender._value.toCssRgba() === 'rgba(255, 255, 255, 0)') {\n                            return;\n                        }\n                        ui.trigger('change');\n                    }\n                });\n                ui.wrapper.attr({\n                    title: initOptions.title,\n                    unselectable: 'on'\n                }).find('*:not(input)').attr('unselectable', 'on');\n                ui.value('transparent');\n            }\n        });\n        extend(Editor, {\n            InlineFormatFinder: InlineFormatFinder,\n            InlineFormatter: InlineFormatter,\n            DelayedExecutionTool: DelayedExecutionTool,\n            GreedyInlineFormatFinder: GreedyInlineFormatFinder,\n            GreedyInlineFormatter: GreedyInlineFormatter,\n            InlineFormatTool: InlineFormatTool,\n            FontTool: FontTool,\n            ColorTool: ColorTool\n        });\n        registerFormat('bold', [\n            {\n                tags: [\n                    'strong',\n                    'b'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { fontWeight: 'bold' } }\n            }\n        ]);\n        registerTool('bold', new InlineFormatTool({\n            key: 'B',\n            ctrl: true,\n            format: formats.bold,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Bold'\n            })\n        }));\n        registerFormat('italic', [\n            {\n                tags: [\n                    'em',\n                    'i'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { fontStyle: 'italic' } }\n            }\n        ]);\n        registerTool('italic', new InlineFormatTool({\n            key: 'I',\n            ctrl: true,\n            format: formats.italic,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Italic'\n            })\n        }));\n        registerFormat('underline', [\n            {\n                tags: ['span'],\n                attr: { style: { textDecoration: 'underline' } }\n            },\n            { tags: ['u'] }\n        ]);\n        registerTool('underline', new InlineFormatTool({\n            key: 'U',\n            ctrl: true,\n            format: formats.underline,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Underline'\n            })\n        }));\n        registerFormat('strikethrough', [\n            {\n                tags: [\n                    'del',\n                    'strike'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { textDecoration: 'line-through' } }\n            }\n        ]);\n        registerTool('strikethrough', new InlineFormatTool({\n            format: formats.strikethrough,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Strikethrough'\n            })\n        }));\n        registerFormat('superscript', [{ tags: ['sup'] }]);\n        registerTool('superscript', new InlineFormatTool({\n            format: formats.superscript,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Superscript'\n            })\n        }));\n        registerFormat('subscript', [{ tags: ['sub'] }]);\n        registerTool('subscript', new InlineFormatTool({\n            format: formats.subscript,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Subscript'\n            })\n        }));\n        registerTool('foreColor', new ColorTool({\n            cssAttr: 'color',\n            domAttr: 'color',\n            name: 'foreColor',\n            template: new ToolTemplate({\n                template: EditorUtils.colorPickerTemplate,\n                title: 'Color'\n            })\n        }));\n        registerTool('backColor', new ColorTool({\n            cssAttr: 'background-color',\n            domAttr: 'backgroundColor',\n            name: 'backColor',\n            template: new ToolTemplate({\n                template: EditorUtils.colorPickerTemplate,\n                title: 'Background Color'\n            })\n        }));\n        registerTool('fontName', new FontTool({\n            cssAttr: 'font-family',\n            domAttr: 'fontFamily',\n            name: 'fontName',\n            defaultValue: [{\n                    text: 'fontNameInherit',\n                    value: 'inherit'\n                }],\n            template: new ToolTemplate({\n                template: EditorUtils.comboBoxTemplate,\n                title: 'Font Name'\n            })\n        }));\n        registerTool('fontSize', new FontTool({\n            cssAttr: 'font-size',\n            domAttr: 'fontSize',\n            name: 'fontSize',\n            defaultValue: [{\n                    text: 'fontSizeInherit',\n                    value: 'inherit'\n                }],\n            template: new ToolTemplate({\n                template: EditorUtils.comboBoxTemplate,\n                title: 'Font Size'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/link', ['editor/plugins/inlineformat'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, InlineFormatter = Editor.InlineFormatter, InlineFormatFinder = Editor.InlineFormatFinder, textNodes = RangeUtils.textNodes, editableTextNodes = RangeUtils.editableTextNodes, registerTool = Editor.EditorUtils.registerTool, keys = kendo.keys;\n        var HTTP_PROTOCOL = 'http://';\n        var protocolRegExp = /^\\w*:\\/\\//;\n        var endLinkCharsRegExp = /[\\w\\/\\$\\-_\\*\\?]/i;\n        var LinkFormatFinder = Class.extend({\n            findSuitable: function (sourceNode) {\n                return dom.parentOfType(sourceNode, ['a']);\n            }\n        });\n        var LinkFormatter = Class.extend({\n            init: function () {\n                this.finder = new LinkFormatFinder();\n            },\n            apply: function (range, attributes) {\n                var nodes = this.immutables ? editableTextNodes(range) : textNodes(range);\n                var markers, doc, formatter, a, parent;\n                if (attributes.innerText) {\n                    doc = RangeUtils.documentFromRange(range);\n                    markers = RangeUtils.getMarkers(range);\n                    range.deleteContents();\n                    a = dom.create(doc, 'a', attributes);\n                    range.insertNode(a);\n                    parent = a.parentNode;\n                    if (dom.name(parent) == 'a') {\n                        dom.insertAfter(a, parent);\n                    }\n                    if (dom.emptyNode(parent)) {\n                        dom.remove(parent);\n                    }\n                    var ref = a;\n                    for (var i = 0; i < markers.length; i++) {\n                        dom.insertAfter(markers[i], ref);\n                        ref = markers[i];\n                    }\n                    if (markers.length) {\n                        dom.insertBefore(doc.createTextNode('\\uFEFF'), markers[1] || markers[0]);\n                        dom.insertAfter(doc.createTextNode('\\uFEFF'), markers[1] || markers[0]);\n                        range.setStartBefore(markers[0]);\n                        range.setEndAfter(markers[markers.length - 1]);\n                    }\n                } else {\n                    formatter = new InlineFormatter([{ tags: ['a'] }], attributes);\n                    formatter.finder = this.finder;\n                    formatter.apply(nodes);\n                }\n            }\n        });\n        var UnlinkCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                options.formatter = {\n                    toggle: function (range) {\n                        var nodes = that.immutables() ? editableTextNodes(range) : textNodes(range);\n                        new InlineFormatter([{ tags: ['a'] }]).remove(nodes);\n                    }\n                };\n                this.options = options;\n                Command.fn.init.call(this, options);\n            }\n        });\n        var LinkCommand = Command.extend({\n            init: function (options) {\n                var that;\n                this.options = options;\n                Command.fn.init.call(this, options);\n                this.formatter = new LinkFormatter();\n                if (!options.url) {\n                    this.attributes = null;\n                    this.async = true;\n                } else {\n                    this.exec = function () {\n                        this.formatter.immutables = that && that.immutables();\n                        this.formatter.apply(options.range, {\n                            href: options.url,\n                            innerText: options.text || options.url,\n                            target: options.target\n                        });\n                    };\n                }\n            },\n            _dialogTemplate: function () {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form\">' + '<div class=\"k-edit-form-container\">' + '<div class=\\'k-edit-label\\'>' + '<label for=\\'k-editor-link-url\\'>#: messages.linkWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'text\\' class=\\'k-textbox\\' id=\\'k-editor-link-url\\'>' + '</div>' + '<div class=\\'k-edit-label k-editor-link-text-row\\'>' + '<label for=\\'k-editor-link-text\\'>#: messages.linkText #</label>' + '</div>' + '<div class=\\'k-edit-field k-editor-link-text-row\\'>' + '<input type=\\'text\\' class=\\'k-textbox\\' id=\\'k-editor-link-text\\'>' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\\'k-editor-link-title\\'>#: messages.linkToolTip #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'text\\' class=\\'k-textbox\\' id=\\'k-editor-link-title\\'>' + '</div>' + '<div class=\\'k-edit-label\\'></div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'checkbox\\' class=\\'k-checkbox\\' id=\\'k-editor-link-target\\'>' + '<label for=\\'k-editor-link-target\\' class=\\'k-checkbox-label\\'>#: messages.linkOpenInNewWindow #</label>' + '</div>' + '<div class=\\'k-edit-buttons k-state-default\\'>' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>' + '</div>')({ messages: this.editor.options.messages });\n            },\n            exec: function () {\n                var messages = this.editor.options.messages;\n                this._initialText = '';\n                this._range = this.lockRange(true);\n                this.formatter.immutables = this.immutables();\n                var nodes = textNodes(this._range);\n                var a = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null;\n                var img = nodes.length && dom.name(nodes[0]) == 'img';\n                var dialog = this.createDialog(this._dialogTemplate(), {\n                    title: messages.createLink,\n                    close: proxy(this._close, this),\n                    visible: false\n                });\n                if (a) {\n                    this._range.selectNodeContents(a);\n                    nodes = textNodes(this._range);\n                }\n                this._initialText = this.linkText(nodes);\n                dialog.find('.k-dialog-insert').click(proxy(this._apply, this)).end().find('.k-dialog-close').click(proxy(this._close, this)).end().find('.k-edit-field input').keydown(proxy(this._keydown, this)).end().find('#k-editor-link-url').val(this.linkUrl(a)).end().find('#k-editor-link-text').val(this._initialText).end().find('#k-editor-link-title').val(a ? a.title : '').end().find('#k-editor-link-target').attr('checked', a ? a.target == '_blank' : false).end().find('.k-editor-link-text-row').toggle(!img);\n                this._dialog = dialog.data('kendoWindow').center().open();\n                $('#k-editor-link-url', dialog).focus().select();\n            },\n            _keydown: function (e) {\n                var keys = kendo.keys;\n                if (e.keyCode == keys.ENTER) {\n                    this._apply(e);\n                } else if (e.keyCode == keys.ESC) {\n                    this._close(e);\n                }\n            },\n            _apply: function (e) {\n                var element = this._dialog.element;\n                var href = $('#k-editor-link-url', element).val();\n                var title, text, target;\n                var textInput = $('#k-editor-link-text', element);\n                if (href && href != HTTP_PROTOCOL) {\n                    if (href.indexOf('@') > 0 && !/^(\\w+:)|(\\/\\/)/i.test(href)) {\n                        href = 'mailto:' + href;\n                    }\n                    this.attributes = { href: href };\n                    title = $('#k-editor-link-title', element).val();\n                    if (title) {\n                        this.attributes.title = title;\n                    }\n                    if (textInput.is(':visible')) {\n                        text = textInput.val();\n                        if (!text && !this._initialText) {\n                            this.attributes.innerText = href;\n                        } else if (text && text !== this._initialText) {\n                            this.attributes.innerText = dom.stripBom(text);\n                        }\n                    }\n                    target = $('#k-editor-link-target', element).is(':checked');\n                    this.attributes.target = target ? '_blank' : null;\n                    this.formatter.apply(this._range, this.attributes);\n                }\n                this._close(e);\n                if (this.change) {\n                    this.change();\n                }\n            },\n            _close: function (e) {\n                e.preventDefault();\n                this._dialog.destroy();\n                dom.windowFromDocument(RangeUtils.documentFromRange(this._range)).focus();\n                this.releaseRange(this._range);\n            },\n            linkUrl: function (anchor) {\n                if (anchor) {\n                    return anchor.getAttribute('href', 2);\n                }\n                return HTTP_PROTOCOL;\n            },\n            linkText: function (nodes) {\n                var text = '';\n                var i;\n                for (i = 0; i < nodes.length; i++) {\n                    text += nodes[i].nodeValue;\n                }\n                return dom.stripBom(text || '');\n            },\n            redo: function () {\n                var range = this.lockRange(true);\n                this.formatter.apply(range, this.attributes);\n                this.releaseRange(range);\n            }\n        });\n        var AutoLinkCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.formatter = new LinkFormatter();\n            },\n            exec: function () {\n                var detectedLink = this.detectLink();\n                if (!detectedLink) {\n                    return;\n                }\n                var range = this.getRange();\n                var linkMarker = new kendo.ui.editor.Marker();\n                var linkRange = range.cloneRange();\n                linkRange.setStart(detectedLink.start.node, detectedLink.start.offset);\n                linkRange.setEnd(detectedLink.end.node, detectedLink.end.offset);\n                range = this.lockRange();\n                linkMarker.add(linkRange);\n                this.formatter.apply(linkRange, { href: this._ensureWebProtocol(detectedLink.text) });\n                linkMarker.remove(linkRange);\n                this.releaseRange(range);\n            },\n            detectLink: function () {\n                var range = this.getRange();\n                var startNode = range.startContainer;\n                var startOffset = range.startOffset;\n                var prev = startNode.previousSibling;\n                if (!prev && (dom.isBom(startNode) && !startNode.nextSibling || !startOffset && dom.isDataNode(startNode))) {\n                    startNode = startNode.parentNode;\n                    startOffset = 0;\n                }\n                var traverser = new LeftDomTextTraverser({\n                    node: startNode,\n                    offset: startOffset,\n                    cancelAtNode: function (node) {\n                        return node && dom.name(node) === 'a';\n                    }\n                });\n                var detection = new DomTextLinkDetection(traverser);\n                return detection.detectLink();\n            },\n            changesContent: function () {\n                return !!this.detectLink();\n            },\n            _ensureWebProtocol: function (linkText) {\n                var hasProtocol = this._hasProtocolPrefix(linkText);\n                return hasProtocol ? linkText : this._prefixWithWebProtocol(linkText);\n            },\n            _hasProtocolPrefix: function (linkText) {\n                return protocolRegExp.test(linkText);\n            },\n            _prefixWithWebProtocol: function (linkText) {\n                return HTTP_PROTOCOL + linkText;\n            }\n        });\n        var UnlinkTool = Tool.extend({\n            init: function (options) {\n                this.options = options;\n                this.finder = new InlineFormatFinder([{ tags: ['a'] }]);\n                Tool.fn.init.call(this, $.extend(options, { command: UnlinkCommand }));\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                ui.addClass('k-state-disabled');\n            },\n            update: function (ui, nodes) {\n                ui.toggleClass('k-state-disabled', !this.finder.isFormatted(nodes)).removeClass('k-state-hover');\n            }\n        });\n        var DomTextLinkDetection = Class.extend({\n            init: function (traverser) {\n                this.traverser = traverser;\n                this.start = DomPos();\n                this.end = DomPos();\n                this.text = '';\n            },\n            detectLink: function () {\n                var node = this.traverser.node;\n                var offset = this.traverser.offset;\n                if (dom.isDataNode(node)) {\n                    var text = node.data.substring(0, offset);\n                    if (/\\s{2}$/.test(dom.stripBom(text))) {\n                        return;\n                    }\n                } else if (offset === 0) {\n                    var p = dom.closestEditableOfType(node, dom.blockElements);\n                    if (p && p.previousSibling) {\n                        this.traverser.init({ node: p.previousSibling });\n                    }\n                }\n                this.traverser.traverse($.proxy(this._detectEnd, this));\n                if (!this.end.blank()) {\n                    this.traverser = this.traverser.clone(this.end);\n                    this.traverser.traverse($.proxy(this._detectStart, this));\n                    if (!this._isLinkDetected()) {\n                        var puntuationOptions = this.traverser.extendOptions(this.start);\n                        var puntuationTraverser = new RightDomTextTraverser(puntuationOptions);\n                        puntuationTraverser.traverse($.proxy(this._skipStartPuntuation, this));\n                        if (!this._isLinkDetected()) {\n                            this.start = DomPos();\n                        }\n                    }\n                }\n                if (this.start.blank()) {\n                    return null;\n                } else {\n                    return {\n                        start: this.start,\n                        end: this.end,\n                        text: this.text\n                    };\n                }\n            },\n            _isLinkDetected: function () {\n                return protocolRegExp.test(this.text) || /^w{3}\\./i.test(this.text);\n            },\n            _detectEnd: function (text, node) {\n                var i = lastIndexOfRegExp(text, endLinkCharsRegExp);\n                if (i > -1) {\n                    this.end.node = node;\n                    this.end.offset = i + 1;\n                    return false;\n                }\n            },\n            _detectStart: function (text, node) {\n                var i = lastIndexOfRegExp(text, /\\s/);\n                var ii = i + 1;\n                this.text = text.substring(ii) + this.text;\n                this.start.node = node;\n                this.start.offset = ii;\n                if (i > -1) {\n                    return false;\n                }\n            },\n            _skipStartPuntuation: function (text, node, offset) {\n                var i = indexOfRegExp(text, /\\w/);\n                var ii = i;\n                if (i === -1) {\n                    ii = text.length;\n                }\n                this.text = this.text.substring(ii);\n                this.start.node = node;\n                this.start.offset = ii + (offset | 0);\n                if (i > -1) {\n                    return false;\n                }\n            }\n        });\n        function lastIndexOfRegExp(str, search) {\n            var i = str.length;\n            while (i-- && !search.test(str[i])) {\n            }\n            return i;\n        }\n        function indexOfRegExp(str, search) {\n            var r = search.exec(str);\n            return r ? r.index : -1;\n        }\n        var DomPos = function () {\n            return {\n                node: null,\n                offset: null,\n                blank: function () {\n                    return this.node === null && this.offset === null;\n                }\n            };\n        };\n        var DomTextTraverser = Class.extend({\n            init: function (options) {\n                this.node = options.node;\n                this.offset = options.offset === undefined ? dom.isDataNode(this.node) && this.node.length || 0 : options.offset;\n                this.cancelAtNode = options.cancelAtNode || this.cancelAtNode || $.noop;\n            },\n            traverse: function (callback) {\n                if (!callback) {\n                    return;\n                }\n                this.cancel = false;\n                this._traverse(callback, this.node, this.offset);\n            },\n            _traverse: function (callback, node, offset) {\n                if (!node || this.cancel) {\n                    return;\n                }\n                if (node.nodeType === 3) {\n                    var text = node.data;\n                    if (offset !== undefined) {\n                        text = this.subText(text, offset);\n                    }\n                    this.cancel = callback(text, node, offset) === false;\n                } else {\n                    var edgeNode = this.edgeNode(node);\n                    this.cancel = this.cancel || this.cancelAtNode(edgeNode);\n                    return this._traverse(callback, edgeNode);\n                }\n                var next = this.next(node);\n                if (!next) {\n                    var parent = node.parentNode;\n                    while (!next && dom.isInline(parent)) {\n                        next = this.next(parent);\n                        parent = parent.parentNode;\n                    }\n                }\n                this.cancel = this.cancel || this.cancelAtNode(next);\n                this._traverse(callback, next);\n            },\n            extendOptions: function (o) {\n                return $.extend({\n                    node: this.node,\n                    offset: this.offset,\n                    cancelAtNode: this.cancelAtNode\n                }, o || {});\n            },\n            edgeNode: function (node) {\n            },\n            next: function (node) {\n            },\n            subText: function (text, offset) {\n            }\n        });\n        var LeftDomTextTraverser = DomTextTraverser.extend({\n            subText: function (text, splitIndex) {\n                return text.substring(0, splitIndex);\n            },\n            next: function (node) {\n                return node.previousSibling;\n            },\n            edgeNode: function (node) {\n                return node.lastChild;\n            },\n            clone: function (options) {\n                var o = this.extendOptions(options);\n                return new LeftDomTextTraverser(o);\n            }\n        });\n        var RightDomTextTraverser = DomTextTraverser.extend({\n            subText: function (text, splitIndex) {\n                return text.substring(splitIndex);\n            },\n            next: function (node) {\n                return node.nextSibling;\n            },\n            edgeNode: function (node) {\n                return node.firstChild;\n            },\n            clone: function (options) {\n                var o = this.extendOptions(options);\n                return new RightDomTextTraverser(o);\n            }\n        });\n        extend(kendo.ui.editor, {\n            LinkFormatFinder: LinkFormatFinder,\n            LinkFormatter: LinkFormatter,\n            UnlinkCommand: UnlinkCommand,\n            LinkCommand: LinkCommand,\n            AutoLinkCommand: AutoLinkCommand,\n            UnlinkTool: UnlinkTool,\n            DomTextLinkDetection: DomTextLinkDetection,\n            LeftDomTextTraverser: LeftDomTextTraverser,\n            RightDomTextTraverser: RightDomTextTraverser\n        });\n        registerTool('createLink', new Tool({\n            key: 'K',\n            ctrl: true,\n            command: LinkCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Create Link'\n            })\n        }));\n        registerTool('unlink', new UnlinkTool({\n            key: 'K',\n            ctrl: true,\n            shift: true,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Remove Link'\n            })\n        }));\n        registerTool('autoLink', new Tool({\n            key: [\n                keys.ENTER,\n                keys.SPACEBAR\n            ],\n            keyPressCommand: true,\n            command: AutoLinkCommand\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/formatblock', ['editor/plugins/format'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, formats = kendo.ui.Editor.fn.options.formats, dom = Editor.Dom, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, EditorUtils = Editor.EditorUtils, registerTool = EditorUtils.registerTool, registerFormat = EditorUtils.registerFormat, RangeUtils = Editor.RangeUtils;\n        var BlockFormatFinder = Class.extend({\n            init: function (format) {\n                this.format = format;\n            },\n            contains: function (node, children) {\n                var i, len, child;\n                for (i = 0, len = children.length; i < len; i++) {\n                    child = children[i];\n                    if (!child || !dom.isAncestorOrSelf(node, child)) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            findSuitable: function (nodes) {\n                var format = this.format, suitable = [], i, len, candidate;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    for (var f = format.length - 1; f >= 0; f--) {\n                        candidate = dom.ofType(nodes[i], format[f].tags) ? nodes[i] : dom.closestEditableOfType(nodes[i], format[f].tags);\n                        if (candidate) {\n                            break;\n                        }\n                    }\n                    if (!candidate || candidate.contentEditable === 'true') {\n                        return [];\n                    }\n                    if ($.inArray(candidate, suitable) < 0) {\n                        suitable.push(candidate);\n                    }\n                }\n                this._resolveListsItems(suitable);\n                for (i = 0, len = suitable.length; i < len; i++) {\n                    if (this.contains(suitable[i], suitable)) {\n                        return [suitable[i]];\n                    }\n                }\n                return suitable;\n            },\n            _resolveListsItems: function (nodes) {\n                var i, node, wrapper;\n                for (i = 0; i < nodes.length; i++) {\n                    node = nodes[i];\n                    wrapper = dom.is(node, 'li') ? node : dom.wrapper(node);\n                    wrapper = wrapper && dom.list(wrapper) ? wrapper.children[0] : wrapper;\n                    if (dom.is(wrapper, 'li')) {\n                        node = nodes[i] = wrapper;\n                    }\n                }\n            },\n            findFormat: function (sourceNode) {\n                var format = this.format, i, len, node, tags, attributes;\n                var editableParent = dom.editableParent(sourceNode);\n                var immutables = this.options && this.options.immutables;\n                var ImmutablesNS = Editor.Immutables;\n                for (i = 0, len = format.length; i < len; i++) {\n                    node = sourceNode;\n                    tags = format[i].tags;\n                    attributes = format[i].attr;\n                    if (immutables && tags && tags[0] == 'immutable') {\n                        var immutable = ImmutablesNS.immutableParent(node);\n                        if (immutable && dom.attrEquals(immutable, attributes)) {\n                            return node;\n                        }\n                    }\n                    while (node && dom.isAncestorOf(editableParent, node)) {\n                        if (dom.ofType(node, tags) && dom.attrEquals(node, attributes)) {\n                            return node;\n                        }\n                        node = node.parentNode;\n                    }\n                }\n                return null;\n            },\n            getFormat: function (nodes) {\n                var that = this, findFormat = function (node) {\n                        return that.findFormat(dom.isDataNode(node) ? node.parentNode : node);\n                    }, result = findFormat(nodes[0]), i, len;\n                if (!result) {\n                    return '';\n                }\n                for (i = 1, len = nodes.length; i < len; i++) {\n                    if (result != findFormat(nodes[i])) {\n                        return '';\n                    }\n                }\n                return result.nodeName.toLowerCase();\n            },\n            isFormatted: function (nodes) {\n                for (var i = 0, len = nodes.length; i < len; i++) {\n                    if (!this.findFormat(nodes[i])) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n        });\n        var BlockFormatter = Class.extend({\n            init: function (format, values) {\n                this.format = format;\n                this.values = values;\n                this.finder = new BlockFormatFinder(format);\n            },\n            wrap: function (tag, attributes, nodes) {\n                var commonAncestor = nodes.length == 1 ? dom.blockParentOrBody(nodes[0]) : dom.commonAncestor.apply(null, nodes);\n                if (dom.isInline(commonAncestor)) {\n                    commonAncestor = dom.blockParentOrBody(commonAncestor);\n                }\n                var ancestors = dom.significantChildNodes(commonAncestor), position = dom.findNodeIndex(ancestors[0]), wrapper = dom.create(commonAncestor.ownerDocument, tag, attributes), i, ancestor;\n                for (i = 0; i < ancestors.length; i++) {\n                    ancestor = ancestors[i];\n                    if (dom.isBlock(ancestor)) {\n                        dom.attr(ancestor, attributes);\n                        if (wrapper.childNodes.length) {\n                            dom.insertBefore(wrapper, ancestor);\n                            wrapper = wrapper.cloneNode(false);\n                        }\n                        position = dom.findNodeIndex(ancestor) + 1;\n                        continue;\n                    }\n                    wrapper.appendChild(ancestor);\n                }\n                if (wrapper.firstChild) {\n                    dom.insertAt(commonAncestor, wrapper, position);\n                }\n            },\n            apply: function (nodes) {\n                var format, values = this.values;\n                function attributes(format) {\n                    return extend({}, format && format.attr, values);\n                }\n                this._handleImmutables(nodes, true);\n                var images = dom.filter('img', nodes);\n                var imageFormat = EditorUtils.formatByName('img', this.format);\n                var imageAttributes = attributes(imageFormat);\n                $.each(images, function () {\n                    dom.attr(this, imageAttributes);\n                });\n                if (images.length == nodes.length) {\n                    return;\n                }\n                var nonImages = dom.filter('img', nodes, true);\n                var formatNodes = this.finder.findSuitable(nonImages);\n                if (formatNodes.length) {\n                    for (var i = 0, len = formatNodes.length; i < len; i++) {\n                        format = EditorUtils.formatByName(dom.name(formatNodes[i]), this.format);\n                        dom.attr(formatNodes[i], attributes(format));\n                    }\n                } else {\n                    format = this.format[0];\n                    this.wrap(format.tags[0], attributes(format), nonImages);\n                }\n            },\n            _handleImmutables: function (nodes, applyFormatting) {\n                if (!this.immutables()) {\n                    return;\n                }\n                var immutableFormat = EditorUtils.formatByName('immutable', this.format);\n                if (!immutableFormat) {\n                    return;\n                }\n                var ImmutablesNS = Editor.Immutables;\n                var l = nodes.length - 1;\n                for (var i = l; i >= 0; i--) {\n                    var immutableParent = ImmutablesNS.immutableParent(nodes[i]);\n                    if (!immutableParent) {\n                        continue;\n                    }\n                    if (immutableParent !== nodes[i + 1]) {\n                        if (applyFormatting) {\n                            dom.attr(immutableParent, immutableFormat.attr);\n                        } else {\n                            dom.unstyle(immutableParent, immutableFormat.attr.style);\n                        }\n                    }\n                    nodes.splice(i, 1);\n                }\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            remove: function (nodes) {\n                var i, l, formatNode, namedFormat, name;\n                this._handleImmutables(nodes, false);\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        name = dom.name(formatNode);\n                        namedFormat = EditorUtils.formatByName(name, this.format);\n                        if (namedFormat.attr.style) {\n                            dom.unstyle(formatNode, namedFormat.attr.style);\n                        }\n                        if (namedFormat.attr.className) {\n                            dom.removeClass(formatNode, namedFormat.attr.className);\n                        }\n                    }\n                }\n            },\n            toggle: function (range) {\n                var that = this, nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n                if (that.finder.isFormatted(nodes)) {\n                    that.remove(nodes);\n                } else {\n                    that.apply(nodes);\n                }\n            }\n        });\n        var GreedyBlockFormatter = Class.extend({\n            init: function (format, values) {\n                var that = this;\n                that.format = format;\n                that.values = values;\n                that.finder = new BlockFormatFinder(format);\n            },\n            apply: function (nodes) {\n                var format = this.format;\n                var blocks = dom.blockParents(nodes);\n                var formatTag = format[0].tags[0];\n                var i, len, list, formatter, range;\n                var element;\n                var tagName;\n                var block;\n                var immutalbeParent;\n                if (blocks.length) {\n                    for (i = 0, len = blocks.length; i < len; i++) {\n                        block = blocks[i];\n                        immutalbeParent = this.immutables() && Editor.Immutables.immutableParent(block);\n                        if (!immutalbeParent) {\n                            tagName = dom.name(block);\n                            if (tagName == 'li') {\n                                list = block.parentNode;\n                                formatter = new Editor.ListFormatter(list.nodeName.toLowerCase(), formatTag);\n                                range = this.editor.createRange();\n                                range.selectNode(blocks[i]);\n                                formatter.toggle(range);\n                            } else if (formatTag && (tagName == 'td' || block.attributes.contentEditable)) {\n                                new BlockFormatter(format, this.values).apply(block.childNodes);\n                            } else {\n                                element = dom.changeTag(block, formatTag);\n                                dom.attr(element, format[0].attr);\n                            }\n                        }\n                    }\n                } else {\n                    var blockFormatter = new BlockFormatter(format, this.values);\n                    blockFormatter.editor = this.editor;\n                    blockFormatter.apply(nodes);\n                }\n            },\n            toggle: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    nodes = RangeUtils.textNodes(range);\n                    if (!nodes.length) {\n                        nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                    }\n                }\n                this.apply(nodes);\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            }\n        });\n        var BlockFormatTool = FormatTool.extend({\n            init: function (options) {\n                FormatTool.fn.init.call(this, extend(options, {\n                    finder: new BlockFormatFinder(options.format),\n                    formatter: function () {\n                        return new BlockFormatter(options.format);\n                    }\n                }));\n            }\n        });\n        extend(Editor, {\n            BlockFormatFinder: BlockFormatFinder,\n            BlockFormatter: BlockFormatter,\n            GreedyBlockFormatter: GreedyBlockFormatter,\n            BlockFormatTool: BlockFormatTool\n        });\n        var listElements = [\n            'ul',\n            'ol',\n            'li'\n        ];\n        registerFormat('justifyLeft', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'left' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        'float': 'left',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        'float': 'left',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'left',\n                        listStylePosition: ''\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyLeft', new BlockFormatTool({\n            format: formats.justifyLeft,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Left'\n            })\n        }));\n        registerFormat('justifyCenter', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'center' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'center',\n                        listStylePosition: 'inside'\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyCenter', new BlockFormatTool({\n            format: formats.justifyCenter,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Center'\n            })\n        }));\n        registerFormat('justifyRight', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'right' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        'float': 'right',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        'float': 'right',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'right',\n                        listStylePosition: 'inside'\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyRight', new BlockFormatTool({\n            format: formats.justifyRight,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Right'\n            })\n        }));\n        registerFormat('justifyFull', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'justify' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'justify',\n                        listStylePosition: ''\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyFull', new BlockFormatTool({\n            format: formats.justifyFull,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Full'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/lists', ['editor/plugins/formatblock'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, EditorUtils = Editor.EditorUtils, Command = Editor.Command, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, BlockFormatFinder = Editor.BlockFormatFinder, textNodes = RangeUtils.textNodes, registerTool = Editor.EditorUtils.registerTool;\n        var ListFormatFinder = BlockFormatFinder.extend({\n            init: function (tag) {\n                this.tag = tag;\n                var tags = this.tags = [\n                    tag == 'ul' ? 'ol' : 'ul',\n                    tag\n                ];\n                BlockFormatFinder.fn.init.call(this, [{ tags: tags }]);\n            },\n            isFormatted: function (nodes) {\n                var formatNodes = [];\n                var formatNode, i;\n                for (i = 0; i < nodes.length; i++) {\n                    formatNode = this.findFormat(nodes[i]);\n                    if (formatNode && dom.name(formatNode) == this.tag) {\n                        formatNodes.push(formatNode);\n                    }\n                }\n                if (formatNodes.length < 1) {\n                    return false;\n                }\n                if (formatNodes.length != nodes.length) {\n                    return false;\n                }\n                for (i = 0; i < formatNodes.length; i++) {\n                    if (formatNodes[i].parentNode != formatNode.parentNode) {\n                        break;\n                    }\n                    if (formatNodes[i] != formatNode) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            findSuitable: function (nodes) {\n                var candidate = this.findFormat(nodes[0]);\n                if (candidate && dom.name(candidate) == this.tag) {\n                    return candidate;\n                }\n                return null;\n            }\n        });\n        var ListFormatter = Class.extend({\n            init: function (tag, unwrapTag) {\n                var that = this;\n                that.finder = new ListFormatFinder(tag);\n                that.tag = tag;\n                that.unwrapTag = unwrapTag;\n            },\n            isList: function (node) {\n                return dom.list(node);\n            },\n            immutables: function () {\n                return this.editor && !!this.editor.options.immutables;\n            },\n            wrap: function (list, nodes) {\n                var li = dom.create(list.ownerDocument, 'li'), i, node, isImmutable = this.immutables() ? Editor.Immutables.immutable : $.noop;\n                for (i = 0; i < nodes.length; i++) {\n                    node = nodes[i];\n                    if (dom.is(node, 'li')) {\n                        list.appendChild(node);\n                        continue;\n                    }\n                    if (this.isList(node)) {\n                        while (node.firstChild) {\n                            list.appendChild(node.firstChild);\n                        }\n                        continue;\n                    }\n                    if (dom.is(node, 'td')) {\n                        while (node.firstChild) {\n                            li.appendChild(node.firstChild);\n                        }\n                        list.appendChild(li);\n                        node.appendChild(list);\n                        list = list.cloneNode(false);\n                        li = li.cloneNode(false);\n                        continue;\n                    }\n                    li.appendChild(node);\n                    if (dom.isBlock(node)) {\n                        list.appendChild(li);\n                        if (!isImmutable(node)) {\n                            dom.unwrap(node);\n                        }\n                        li = li.cloneNode(false);\n                    }\n                }\n                if (li.firstChild) {\n                    list.appendChild(li);\n                }\n            },\n            containsAny: function (parent, nodes) {\n                for (var i = 0; i < nodes.length; i++) {\n                    if (dom.isAncestorOrSelf(parent, nodes[i])) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            suitable: function (candidate, nodes) {\n                if (candidate.className == 'k-marker') {\n                    var sibling = candidate.nextSibling;\n                    if (sibling && dom.isBlock(sibling)) {\n                        return false;\n                    }\n                    sibling = candidate.previousSibling;\n                    if (sibling && dom.isBlock(sibling)) {\n                        return false;\n                    }\n                }\n                return this.containsAny(candidate, nodes) || dom.isInline(candidate) || candidate.nodeType == 3;\n            },\n            _parentLists: function (node) {\n                var editable = dom.closestEditable(node);\n                return $(node).parentsUntil(editable, 'ul,ol');\n            },\n            split: function (range) {\n                var nodes = textNodes(range);\n                var start, end, parents;\n                if (nodes.length) {\n                    start = dom.parentOfType(nodes[0], ['li']);\n                    end = dom.parentOfType(nodes[nodes.length - 1], ['li']);\n                    range.setStartBefore(start);\n                    range.setEndAfter(end);\n                    for (var i = 0, l = nodes.length; i < l; i++) {\n                        var formatNode = this.finder.findFormat(nodes[i]);\n                        if (formatNode) {\n                            parents = this._parentLists(formatNode);\n                            if (parents.length) {\n                                RangeUtils.split(range, parents.last()[0], true);\n                            } else {\n                                RangeUtils.split(range, formatNode, true);\n                            }\n                        }\n                    }\n                }\n            },\n            merge: function (tag, formatNode) {\n                var prev = formatNode.previousSibling, next;\n                while (prev && (prev.className == 'k-marker' || prev.nodeType == 3 && dom.isWhitespace(prev))) {\n                    prev = prev.previousSibling;\n                }\n                if (prev && dom.name(prev) == tag) {\n                    while (formatNode.firstChild) {\n                        prev.appendChild(formatNode.firstChild);\n                    }\n                    dom.remove(formatNode);\n                    formatNode = prev;\n                }\n                next = formatNode.nextSibling;\n                while (next && (next.className == 'k-marker' || next.nodeType == 3 && dom.isWhitespace(next))) {\n                    next = next.nextSibling;\n                }\n                if (next && dom.name(next) == tag) {\n                    while (formatNode.lastChild) {\n                        next.insertBefore(formatNode.lastChild, next.firstChild);\n                    }\n                    dom.remove(formatNode);\n                }\n            },\n            breakable: function (node) {\n                return node != node.ownerDocument.body && !/table|tbody|tr|td/.test(dom.name(node)) && !node.attributes.contentEditable;\n            },\n            applyOnSection: function (section, nodes) {\n                var tag = this.tag;\n                var commonAncestor = dom.closestSplittableParent(nodes);\n                var ancestors = [];\n                var formatNode = this.finder.findSuitable(nodes);\n                if (!formatNode) {\n                    formatNode = new ListFormatFinder(tag == 'ul' ? 'ol' : 'ul').findSuitable(nodes);\n                }\n                var childNodes;\n                if (/table|tbody/.test(dom.name(commonAncestor))) {\n                    childNodes = $.map(nodes, function (node) {\n                        return dom.parentOfType(node, ['td']);\n                    });\n                } else {\n                    childNodes = dom.significantChildNodes(commonAncestor);\n                    if ($.grep(childNodes, dom.isBlock).length) {\n                        childNodes = $.grep(childNodes, $.proxy(function (node) {\n                            return this.containsAny(node, nodes);\n                        }, this));\n                    }\n                    if (!childNodes.length) {\n                        childNodes = nodes;\n                    }\n                }\n                function pushAncestor() {\n                    ancestors.push(this);\n                }\n                for (var i = 0; i < childNodes.length; i++) {\n                    var child = childNodes[i];\n                    var suitable = (!formatNode || !dom.isAncestorOrSelf(formatNode, child)) && this.suitable(child, nodes);\n                    if (!suitable) {\n                        continue;\n                    }\n                    if (formatNode && this.isList(child)) {\n                        $.each(child.children, pushAncestor);\n                        dom.remove(child);\n                    } else {\n                        ancestors.push(child);\n                    }\n                }\n                if (ancestors.length == childNodes.length && this.breakable(commonAncestor)) {\n                    ancestors = [commonAncestor];\n                }\n                if (!formatNode) {\n                    formatNode = dom.create(commonAncestor.ownerDocument, tag);\n                    if (dom.isBlock(ancestors[0])) {\n                        dom.mergeAttributes(ancestors[0], formatNode);\n                    }\n                    dom.insertBefore(formatNode, ancestors[0]);\n                }\n                this.wrap(formatNode, ancestors);\n                while (dom.isBom(formatNode.nextSibling)) {\n                    dom.remove(formatNode.nextSibling);\n                }\n                if (!dom.is(formatNode, tag)) {\n                    dom.changeTag(formatNode, tag);\n                }\n                this.merge(tag, formatNode);\n            },\n            apply: function (nodes) {\n                var i = 0, sections = [], lastSection, lastNodes, section, node, l = nodes.length, immutableParent = this.immutables() ? Editor.Immutables.immutableParent : $.noop;\n                function addLastSection() {\n                    if (lastSection) {\n                        sections.push({\n                            section: lastSection,\n                            nodes: lastNodes\n                        });\n                    }\n                }\n                for (i = 0; i < l; i++) {\n                    node = immutableParent(nodes[i]) || nodes[i];\n                    section = dom.closestEditable(node, [\n                        'td',\n                        'body'\n                    ]);\n                    if (!lastSection || section != lastSection) {\n                        addLastSection();\n                        lastNodes = [node];\n                        lastSection = section;\n                    } else {\n                        lastNodes.push(node);\n                    }\n                }\n                addLastSection();\n                for (i = 0; i < sections.length; i++) {\n                    this.applyOnSection(sections[i].section, sections[i].nodes);\n                }\n            },\n            unwrap: function (ul) {\n                var fragment = ul.ownerDocument.createDocumentFragment(), unwrapTag = this.unwrapTag, parents, li, p, child;\n                for (li = ul.firstChild; li; li = li.nextSibling) {\n                    p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                    while (li.firstChild) {\n                        child = li.firstChild;\n                        if (dom.isBlock(child)) {\n                            if (p.firstChild) {\n                                fragment.appendChild(p);\n                                p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                            }\n                            fragment.appendChild(child);\n                        } else {\n                            p.appendChild(child);\n                        }\n                    }\n                    if (p.firstChild) {\n                        fragment.appendChild(p);\n                    }\n                }\n                parents = this._parentLists(ul);\n                if (parents[0]) {\n                    dom.insertAfter(fragment, parents.last()[0]);\n                    parents.last().remove();\n                } else {\n                    dom.insertAfter(fragment, ul);\n                }\n                dom.remove(ul);\n            },\n            remove: function (nodes) {\n                var formatNode;\n                for (var i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        this.unwrap(formatNode);\n                    }\n                }\n            },\n            toggle: function (range) {\n                var that = this, nodes = textNodes(range), ancestor = range.commonAncestorContainer;\n                if (!nodes.length) {\n                    range.selectNodeContents(ancestor);\n                    nodes = textNodes(range);\n                    if (!nodes.length) {\n                        var text = ancestor.ownerDocument.createTextNode('');\n                        range.startContainer.appendChild(text);\n                        nodes = [text];\n                        range.selectNode(text.parentNode);\n                    }\n                }\n                nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n                if (that.finder.isFormatted(nodes)) {\n                    that.split(range);\n                    that.remove(nodes);\n                } else {\n                    that.apply(nodes);\n                }\n            }\n        });\n        var ListCommand = Command.extend({\n            init: function (options) {\n                options.formatter = new ListFormatter(options.tag);\n                Command.fn.init.call(this, options);\n            }\n        });\n        var ListTool = FormatTool.extend({\n            init: function (options) {\n                this.options = options;\n                FormatTool.fn.init.call(this, extend(options, { finder: new ListFormatFinder(options.tag) }));\n            },\n            command: function (commandArguments) {\n                return new ListCommand(extend(commandArguments, { tag: this.options.tag }));\n            }\n        });\n        extend(Editor, {\n            ListFormatFinder: ListFormatFinder,\n            ListFormatter: ListFormatter,\n            ListCommand: ListCommand,\n            ListTool: ListTool\n        });\n        registerTool('insertUnorderedList', new ListTool({\n            tag: 'ul',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert unordered list'\n            })\n        }));\n        registerTool('insertOrderedList', new ListTool({\n            tag: 'ol',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert ordered list'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/formatting', ['editor/plugins/inlineformat'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Editor = kendo.ui.editor, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, DelayedExecutionTool = Editor.DelayedExecutionTool, Command = Editor.Command, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, registerTool = EditorUtils.registerTool;\n        var FormattingTool = DelayedExecutionTool.extend({\n            init: function (options) {\n                var that = this;\n                Tool.fn.init.call(that, kendo.deepExtend({}, that.options, options));\n                that.type = 'kendoSelectBox';\n                that.finder = {\n                    getFormat: function () {\n                        return '';\n                    }\n                };\n            },\n            options: {\n                items: [\n                    {\n                        text: 'Paragraph',\n                        value: 'p'\n                    },\n                    {\n                        text: 'Quotation',\n                        value: 'blockquote'\n                    },\n                    {\n                        text: 'Heading 1',\n                        value: 'h1'\n                    },\n                    {\n                        text: 'Heading 2',\n                        value: 'h2'\n                    },\n                    {\n                        text: 'Heading 3',\n                        value: 'h3'\n                    },\n                    {\n                        text: 'Heading 4',\n                        value: 'h4'\n                    },\n                    {\n                        text: 'Heading 5',\n                        value: 'h5'\n                    },\n                    {\n                        text: 'Heading 6',\n                        value: 'h6'\n                    }\n                ],\n                width: 110\n            },\n            toFormattingItem: function (item) {\n                var value = item.value;\n                if (!value) {\n                    return item;\n                }\n                if (item.tag || item.className) {\n                    return item;\n                }\n                var dot = value.indexOf('.');\n                if (dot === 0) {\n                    item.className = value.substring(1);\n                } else if (dot == -1) {\n                    item.tag = value;\n                } else {\n                    item.tag = value.substring(0, dot);\n                    item.className = value.substring(dot + 1);\n                }\n                return item;\n            },\n            command: function (args) {\n                var that = this;\n                var item = args.value;\n                item = this.toFormattingItem(item);\n                return new Editor.FormatCommand({\n                    range: args.range,\n                    formatter: function () {\n                        var formatter, tags = (item.tag || item.context || 'span').split(','), format = [{\n                                    tags: tags,\n                                    attr: { className: item.className || '' }\n                                }];\n                        if ($.inArray(tags[0], dom.inlineElements) >= 0) {\n                            formatter = new Editor.GreedyInlineFormatter(format);\n                        } else {\n                            formatter = new Editor.GreedyBlockFormatter(format);\n                        }\n                        formatter.editor = that.editor;\n                        return formatter;\n                    }\n                });\n            },\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor;\n                var options = this.options;\n                var toolName = options.name;\n                var that = this;\n                that.editor = editor;\n                ui.width(options.width);\n                ui.kendoSelectBox({\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    dataSource: options.items || editor.options[toolName],\n                    title: editor.options.messages[toolName],\n                    autoSize: true,\n                    change: function () {\n                        var dataItem = this.dataItem();\n                        if (dataItem) {\n                            Tool.exec(editor, toolName, dataItem.toJSON());\n                        }\n                    },\n                    dataBound: function () {\n                        var i, items = this.dataSource.data();\n                        for (i = 0; i < items.length; i++) {\n                            items[i] = that.toFormattingItem(items[i]);\n                        }\n                    },\n                    highlightFirst: false,\n                    template: kendo.template('<span unselectable=\"on\" style=\"display:block;#=(data.style||\"\")#\">#:data.text#</span>')\n                });\n                ui.addClass('k-decorated').closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n            },\n            getFormattingValue: function (items, nodes) {\n                for (var i = 0; i < items.length; i++) {\n                    var item = items[i];\n                    var tag = item.tag || item.context || '';\n                    var className = item.className ? '.' + item.className : '';\n                    var selector = tag + className;\n                    var element = $(nodes[0]).closest(selector)[0];\n                    if (!element) {\n                        continue;\n                    }\n                    if (nodes.length == 1) {\n                        return item.value;\n                    }\n                    for (var n = 1; n < nodes.length; n++) {\n                        if (!$(nodes[n]).closest(selector)[0]) {\n                            break;\n                        } else if (n == nodes.length - 1) {\n                            return item.value;\n                        }\n                    }\n                }\n                return '';\n            },\n            update: function (ui, nodes) {\n                var selectBox = $(ui).data(this.type);\n                if (!selectBox) {\n                    return;\n                }\n                var dataSource = selectBox.dataSource, items = dataSource.data(), i, context, ancestor = dom.commonAncestor.apply(null, nodes);\n                if (ancestor != dom.closestEditable(ancestor) && this._ancestor == ancestor) {\n                    return;\n                } else {\n                    this._ancestor = ancestor;\n                }\n                for (i = 0; i < items.length; i++) {\n                    context = items[i].context;\n                    items[i].visible = !context || !!$(ancestor).closest(context).length;\n                }\n                dataSource.filter([{\n                        field: 'visible',\n                        operator: 'eq',\n                        value: true\n                    }]);\n                DelayedExecutionTool.fn.update.call(this, ui, nodes);\n                selectBox.value(this.getFormattingValue(dataSource.view(), nodes));\n                selectBox.wrapper.toggleClass('k-state-disabled', !dataSource.view().length);\n            },\n            destroy: function () {\n                this._ancestor = null;\n            }\n        });\n        var CleanFormatCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(true);\n                this.tagsToClean = this.options.remove || 'strong,em,span,sup,sub,del,b,i,u,font'.split(',');\n                RangeUtils.wrapSelectedElements(range);\n                var nodes = RangeUtils.mapAll(range, function (node) {\n                    return node;\n                });\n                for (var c = nodes.length - 1; c >= 0; c--) {\n                    var node = nodes[c];\n                    if (!this.immutableParent(node)) {\n                        this.clean(node);\n                    }\n                }\n                this.releaseRange(range);\n            },\n            clean: function (node) {\n                if (!node || dom.isMarker(node)) {\n                    return;\n                }\n                var name = dom.name(node);\n                if (name == 'ul' || name == 'ol') {\n                    var listFormatter = new Editor.ListFormatter(name);\n                    var prev = node.previousSibling;\n                    var next = node.nextSibling;\n                    listFormatter.unwrap(node);\n                    for (; prev && prev != next; prev = prev.nextSibling) {\n                        this.clean(prev);\n                    }\n                } else if (name == 'blockquote') {\n                    dom.changeTag(node, 'p');\n                } else if (node.nodeType == 1 && !dom.insignificant(node)) {\n                    for (var i = node.childNodes.length - 1; i >= 0; i--) {\n                        this.clean(node.childNodes[i]);\n                    }\n                    node.removeAttribute('style');\n                    node.removeAttribute('class');\n                } else {\n                    unwrapListItem(node);\n                }\n                if ($.inArray(name, this.tagsToClean) > -1) {\n                    dom.unwrap(node);\n                }\n            },\n            immutableParent: function (node) {\n                return this.immutables() && Editor.Immutables.immutableParent(node);\n            }\n        });\n        function unwrapListItem(node) {\n            var li = dom.closestEditableOfType(node, ['li']);\n            if (li) {\n                var listFormatter = new Editor.ListFormatter(dom.name(li.parentNode));\n                var range = kendo.ui.editor.W3CRange.fromNode(node);\n                range.selectNode(li);\n                listFormatter.toggle(range);\n            }\n        }\n        $.extend(Editor, {\n            FormattingTool: FormattingTool,\n            CleanFormatCommand: CleanFormatCommand\n        });\n        registerTool('formatting', new FormattingTool({\n            template: new ToolTemplate({\n                template: EditorUtils.dropDownListTemplate,\n                title: 'Format'\n            })\n        }));\n        registerTool('cleanFormatting', new Tool({\n            command: CleanFormatCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Clean formatting'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/image', [\n        'kendo.imagebrowser',\n        'editor/command'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, Command = Editor.Command, keys = kendo.keys, KEDITORIMAGEURL = '#k-editor-image-url', KEDITORIMAGETITLE = '#k-editor-image-title', KEDITORIMAGEWIDTH = '#k-editor-image-width', KEDITORIMAGEHEIGHT = '#k-editor-image-height';\n        var ImageCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                Command.fn.init.call(that, options);\n                that.async = true;\n                that.attributes = {};\n            },\n            insertImage: function (img, range) {\n                var attributes = this.attributes;\n                var doc = RangeUtils.documentFromRange(range);\n                if (attributes.src && attributes.src != 'http://') {\n                    var removeIEAttributes = function () {\n                        setTimeout(function () {\n                            if (!attributes.width) {\n                                img.removeAttribute('width');\n                            }\n                            if (!attributes.height) {\n                                img.removeAttribute('height');\n                            }\n                            img.removeAttribute('complete');\n                        });\n                    };\n                    if (!img) {\n                        img = dom.create(doc, 'img', attributes);\n                        img.onload = img.onerror = removeIEAttributes;\n                        range.deleteContents();\n                        range.insertNode(img);\n                        if (!img.nextSibling) {\n                            dom.insertAfter(doc.createTextNode('\\uFEFF'), img);\n                        }\n                        removeIEAttributes();\n                        range.setStartAfter(img);\n                        range.setEndAfter(img);\n                        RangeUtils.selectRange(range);\n                        return true;\n                    } else {\n                        img.onload = img.onerror = removeIEAttributes;\n                        dom.attr(img, attributes);\n                        removeIEAttributes();\n                    }\n                }\n                return false;\n            },\n            _dialogTemplate: function (showBrowser) {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form\">' + '<div class=\"k-edit-form-container\">' + '<div class=\"k-edit-form-content\">' + '# if (showBrowser) { #' + '<div class=\"k-filebrowser k-imagebrowser\"></div>' + '# } #' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-url\">#: messages.imageWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-textbox\" id=\"k-editor-image-url\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-title\">#: messages.imageAltText #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-textbox\" id=\"k-editor-image-title\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-width\">#: messages.imageWidth #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-textbox\" id=\"k-editor-image-width\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-height\">#: messages.imageHeight #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-textbox\" id=\"k-editor-image-height\">' + '</div>' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>' + '</div>')({\n                    messages: this.editor.options.messages,\n                    showBrowser: showBrowser\n                });\n            },\n            redo: function () {\n                var that = this, range = that.lockRange();\n                if (!that.insertImage(RangeUtils.image(range), range)) {\n                    that.releaseRange(range);\n                }\n            },\n            exec: function () {\n                var that = this, range = that.lockRange(), applied = false, img = RangeUtils.image(range), imageWidth = img && img.getAttribute('width') || '', imageHeight = img && img.getAttribute('height') || '', dialog, isIE = kendo.support.browser.msie, options = that.editor.options, messages = options.messages, imageBrowser = options.imageBrowser, showBrowser = !!(kendo.ui.ImageBrowser && imageBrowser && imageBrowser.transport && imageBrowser.transport.read !== undefined), dialogOptions = {\n                        title: messages.insertImage,\n                        visible: false,\n                        resizable: showBrowser\n                    };\n                this.expandImmutablesIn(range);\n                function apply(e) {\n                    var element = dialog.element, w = parseInt(element.find(KEDITORIMAGEWIDTH).val(), 10), h = parseInt(element.find(KEDITORIMAGEHEIGHT).val(), 10);\n                    that.attributes = {\n                        src: element.find(KEDITORIMAGEURL).val().replace(/ /g, '%20'),\n                        alt: element.find(KEDITORIMAGETITLE).val()\n                    };\n                    that.attributes.width = null;\n                    that.attributes.height = null;\n                    if (!isNaN(w) && w > 0) {\n                        that.attributes.width = w;\n                    }\n                    if (!isNaN(h) && h > 0) {\n                        that.attributes.height = h;\n                    }\n                    applied = that.insertImage(img, range);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.destroy();\n                    dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                    if (!applied) {\n                        that.releaseRange(range);\n                    }\n                }\n                function keyDown(e) {\n                    if (e.keyCode == keys.ENTER) {\n                        apply(e);\n                    } else if (e.keyCode == keys.ESC) {\n                        close(e);\n                    }\n                }\n                dialogOptions.close = close;\n                if (showBrowser) {\n                    dialogOptions.width = 750;\n                }\n                dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions).toggleClass('k-filebrowser-dialog', showBrowser).find('.k-dialog-insert').click(apply).end().find('.k-dialog-close').click(close).end().find('.k-edit-field input').keydown(keyDown).end().find(KEDITORIMAGEURL).val(img ? img.getAttribute('src', 2) : 'http://').end().find(KEDITORIMAGETITLE).val(img ? img.alt : '').end().find(KEDITORIMAGEWIDTH).val(imageWidth).end().find(KEDITORIMAGEHEIGHT).val(imageHeight).end().data('kendoWindow');\n                var element = dialog.element;\n                if (showBrowser) {\n                    this._imageBrowser = new kendo.ui.ImageBrowser(element.find('.k-imagebrowser'), extend({}, imageBrowser));\n                    this._imageBrowser.bind('change', function (ev) {\n                        if (ev.selected.get('type') === 'f') {\n                            element.find(KEDITORIMAGEURL).val(this.value());\n                        }\n                    });\n                    this._imageBrowser.bind('apply', apply);\n                }\n                if (isIE) {\n                    var dialogHeight = element.closest('.k-window').height();\n                    element.css('max-height', dialogHeight);\n                }\n                dialog.center().open();\n                element.find(KEDITORIMAGEURL).focus().select();\n            }\n        });\n        kendo.ui.editor.ImageCommand = ImageCommand;\n        registerTool('insertImage', new Editor.Tool({\n            command: ImageCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert Image'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/import', ['editor/main'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, loadingOverlay = '<div contenteditable=\"false\" class=\"k-loading-mask\" style=\"width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;\"><div class=\"k-loading-image\"></div><div class=\"k-loading-color\"></div></div>';\n        var ImportCommand = Command.extend({\n            exec: function () {\n                (this.editor._uploadWidget || this._initializeUploadWidget()).element.click();\n            },\n            _initializeUploadWidget: function () {\n                var cmd = this;\n                var editor = cmd.editor;\n                var importOptions = editor.options['import'];\n                var upload = $('<input id=\"editorImport\" name=\"files\" type=\"file\" />').kendoUpload({\n                    success: proxy(cmd._onUploadSuccess, cmd),\n                    progress: proxy(cmd._onUploadProgress, cmd),\n                    select: proxy(cmd._onUploadSelect, cmd),\n                    error: proxy(cmd._onUploadError, cmd),\n                    complete: proxy(cmd._onUploadComplete, cmd),\n                    showFileList: false,\n                    multiple: false,\n                    async: {\n                        saveUrl: importOptions.proxyUrl,\n                        autoUpload: true,\n                        saveField: 'file'\n                    },\n                    validation: {\n                        allowedExtensions: importOptions.allowedExtensions,\n                        maxFileSize: importOptions.maxFileSize\n                    }\n                }).getKendoUpload();\n                editor._uploadWidget = upload;\n                return upload;\n            },\n            _onUploadComplete: function (ev) {\n                this._trigger('complete', ev);\n                ev.sender.clearAllFiles();\n                this._removeLoadingOverlay();\n            },\n            _onUploadSuccess: function (ev) {\n                this.editor.value(ev.response.html.replace(/<\\/?body>/gi, ''));\n                this._trigger('success', ev);\n            },\n            _onUploadProgress: function (ev) {\n                this._trigger('progress', ev);\n            },\n            _onUploadSelect: function (ev) {\n                this._trigger('select', ev);\n                if (!ev.files[0].validationErrors) {\n                    this._initLoadingOverlay();\n                }\n            },\n            _onUploadError: function (ev) {\n                this._trigger('error', ev);\n            },\n            _trigger: function (eventType, uploadEvent) {\n                var editor = this.editor;\n                var importOptions = editor.options['import'];\n                if (typeof importOptions[eventType] === 'function') {\n                    importOptions[eventType].call(editor, uploadEvent);\n                }\n            },\n            _initLoadingOverlay: function () {\n                var editable = this.editor.body;\n                if (Editor.Dom.is(editable, 'body')) {\n                    this._iframeWrapper = this._container = this.editor.wrapper.find('iframe').parent().css({ position: 'relative' }).append(loadingOverlay);\n                } else {\n                    this._container = $(editable).append(loadingOverlay);\n                }\n                kendo.ui.progress(this._container, true);\n            },\n            _removeLoadingOverlay: function () {\n                kendo.ui.progress(this._container, false);\n                $(this._iframeWrapper).css({ position: '' });\n                delete this._container;\n                delete this._iframeWrapper;\n            }\n        });\n        extend(Editor, { ImportCommand: ImportCommand });\n        registerTool('import', new Tool({\n            command: ImportCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Import'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/insert', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, editorNS = kendo.ui.editor, Command = editorNS.Command, GenericCommand = editorNS.GenericCommand, EditorUtils = editorNS.EditorUtils, registerTool = EditorUtils.registerTool, Tool = editorNS.Tool, ToolTemplate = editorNS.ToolTemplate, RestorePoint = editorNS.RestorePoint, extend = $.extend;\n        var InsertHtmlCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.managesUndoRedo = true;\n            },\n            exec: function () {\n                var editor = this.editor;\n                var options = this.options;\n                var range = options.range;\n                var body = editor.body;\n                var startRestorePoint = new RestorePoint(range, body);\n                var html = options.html || options.value || '';\n                editor.selectRange(range);\n                editor.clipboard.paste(html, options);\n                if (options.postProcess) {\n                    options.postProcess(editor, editor.getRange());\n                }\n                var genericCommand = new GenericCommand(startRestorePoint, new RestorePoint(editor.getRange(), body));\n                genericCommand.editor = editor;\n                editor.undoRedoStack.push(genericCommand);\n                editor.focus();\n            }\n        });\n        var InsertHtmlTool = Tool.extend({\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor, options = this.options, dataSource = options.items ? options.items : editor.options.insertHtml;\n                this._selectBox = new editorNS.SelectBox(ui, {\n                    dataSource: dataSource,\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    change: function () {\n                        Tool.exec(editor, 'insertHtml', this.value());\n                    },\n                    title: editor.options.messages.insertHtml,\n                    highlightFirst: false\n                });\n            },\n            command: function (commandArguments) {\n                return new InsertHtmlCommand(commandArguments);\n            },\n            update: function (ui) {\n                var selectbox = ui.data('kendoSelectBox') || ui.find('select').data('kendoSelectBox');\n                selectbox.close();\n                selectbox.value(selectbox.options.title);\n            }\n        });\n        extend(editorNS, {\n            InsertHtmlCommand: InsertHtmlCommand,\n            InsertHtmlTool: InsertHtmlTool\n        });\n        registerTool('insertHtml', new InsertHtmlTool({\n            template: new ToolTemplate({\n                template: EditorUtils.dropDownListTemplate,\n                title: 'Insert HTML',\n                initialValue: 'Insert HTML'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/export', ['editor/main'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, defaultExportAsItems = [\n                {\n                    text: 'Docx',\n                    value: 'docx'\n                },\n                {\n                    text: 'Rtf',\n                    value: 'rtf'\n                },\n                {\n                    text: 'Pdf',\n                    value: 'pdf'\n                },\n                {\n                    text: 'Html',\n                    value: 'html'\n                },\n                {\n                    text: 'Plain Text',\n                    value: 'txt'\n                }\n            ];\n        var ExportAsCommand = Command.extend({\n            init: function (options) {\n                var cmd = this;\n                cmd.options = options;\n                Command.fn.init.call(cmd, options);\n                cmd.attributes = null;\n                cmd.exportType = options.exportType;\n            },\n            exec: function () {\n                var cmd = this;\n                var range = this.lockRange(true);\n                cmd.postToProxy();\n                cmd.releaseRange(range);\n            },\n            postToProxy: function () {\n                this.generateForm().appendTo('body').submit().remove();\n            },\n            generateForm: function () {\n                var cmd = this;\n                var exportAsOptions = cmd.editor.options.exportAs;\n                var form = $('<form>').attr({\n                    action: exportAsOptions && exportAsOptions.proxyURL || '',\n                    method: 'POST'\n                });\n                form.append([\n                    cmd.valueInput(),\n                    cmd.exportTypeInput(),\n                    cmd.fileNameInput()\n                ]);\n                return form;\n            },\n            valueInput: function () {\n                var editor = this.editor;\n                return $('<input>').attr({\n                    value: editor.encodedValue(),\n                    name: 'value',\n                    type: 'hidden'\n                });\n            },\n            exportTypeInput: function () {\n                var cmd = this;\n                return $('<input>').attr({\n                    value: cmd.exportType,\n                    name: 'exportType',\n                    type: 'hidden'\n                });\n            },\n            fileNameInput: function () {\n                var editor = this.editor;\n                var exportAsOptions = editor.options.exportAs;\n                var fileName = exportAsOptions && exportAsOptions.fileName || editor.element.attr('id') || 'editor';\n                return $('<input>').attr({\n                    value: fileName,\n                    name: 'fileName',\n                    type: 'hidden'\n                });\n            }\n        });\n        var ExportAsTool = Tool.extend({\n            init: function (options) {\n                var tool = this;\n                Tool.fn.init.call(tool, kendo.deepExtend({}, tool.options, options));\n                tool.type = 'kendoSelectBox';\n            },\n            options: {\n                items: defaultExportAsItems,\n                width: 115\n            },\n            command: function (args) {\n                var value = args.value;\n                return new Editor.ExportAsCommand({\n                    range: args.range,\n                    exportType: value.exportType\n                });\n            },\n            initialize: function (ui, initOptions) {\n                var tool = this;\n                var editor = initOptions.editor;\n                var options = tool.options;\n                var toolName = options.name;\n                var changeHandler = proxy(tool.changeHandler, tool);\n                var dataSource = options.items || editor.options[toolName];\n                dataSource.unshift({\n                    text: editor.options.messages[toolName],\n                    value: ''\n                });\n                tool.editor = editor;\n                ui.width(options.width);\n                ui.kendoSelectBox({\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    dataSource: dataSource,\n                    autoSize: true,\n                    change: changeHandler,\n                    open: function (e) {\n                        var sender = e.sender;\n                        sender.items()[0].style.display = 'none';\n                        sender.unbind('open');\n                    },\n                    highlightFirst: false,\n                    template: kendo.template('<span unselectable=\"on\" style=\"display:block;#=(data.style||\"\")#\">#:data.text#</span>')\n                });\n                ui.addClass('k-decorated').closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n            },\n            changeHandler: function (e) {\n                var sender = e.sender;\n                var dataItem = sender.dataItem();\n                var value = dataItem && dataItem.value;\n                this._exec(value);\n                sender.value('');\n            },\n            _exec: function (value) {\n                if (value) {\n                    Tool.exec(this.editor, this.options.name, { exportType: value });\n                }\n            },\n            destroy: function () {\n                this._ancestor = null;\n            }\n        });\n        extend(Editor, {\n            ExportAsTool: ExportAsTool,\n            ExportAsCommand: ExportAsCommand\n        });\n        registerTool('exportAs', new ExportAsTool({\n            template: new ToolTemplate({\n                template: EditorUtils.dropDownListTemplate,\n                title: 'Export As'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/indent', ['editor/plugins/formatblock'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, registerTool = EditorUtils.registerTool, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, blockElements = dom.blockElements, BlockFormatFinder = Editor.BlockFormatFinder, BlockFormatter = Editor.BlockFormatter;\n        function indent(node, value) {\n            var isRtl = $(node).css('direction') == 'rtl', indentDirection = isRtl ? 'Right' : 'Left', property = dom.name(node) != 'td' ? 'margin' + indentDirection : 'padding' + indentDirection;\n            if (value === undefined) {\n                return node.style[property] || 0;\n            } else {\n                if (value > 0) {\n                    node.style[property] = value + 'px';\n                } else {\n                    node.style[property] = '';\n                    if (!node.style.cssText) {\n                        node.removeAttribute('style');\n                    }\n                }\n            }\n        }\n        var IndentFormatter = Class.extend({\n            init: function () {\n                this.finder = new BlockFormatFinder([{ tags: dom.blockElements }]);\n            },\n            apply: function (nodes) {\n                nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n                var formatNodes = this.finder.findSuitable(nodes), targets = [], i, len, formatNode, parentList, sibling;\n                formatNodes = this.mapImmutables(formatNodes);\n                if (formatNodes.length) {\n                    for (i = 0, len = formatNodes.length; i < len; i++) {\n                        if (dom.is(formatNodes[i], 'li')) {\n                            if (!$(formatNodes[i]).index()) {\n                                targets.push(formatNodes[i].parentNode);\n                            } else if ($.inArray(formatNodes[i].parentNode, targets) < 0) {\n                                targets.push(formatNodes[i]);\n                            }\n                        } else {\n                            targets.push(formatNodes[i]);\n                        }\n                    }\n                    while (targets.length) {\n                        formatNode = targets.shift();\n                        if (dom.is(formatNode, 'li')) {\n                            parentList = formatNode.parentNode;\n                            sibling = $(formatNode).prev('li');\n                            var siblingList = sibling.find('ul,ol').last();\n                            var nestedList = $(formatNode).children('ul,ol')[0];\n                            if (nestedList && sibling[0]) {\n                                if (siblingList[0]) {\n                                    siblingList.append(formatNode);\n                                    siblingList.append($(nestedList).children());\n                                    dom.remove(nestedList);\n                                } else {\n                                    sibling.append(nestedList);\n                                    nestedList.insertBefore(formatNode, nestedList.firstChild);\n                                }\n                            } else {\n                                nestedList = sibling.children('ul,ol')[0];\n                                if (!nestedList) {\n                                    nestedList = dom.create(formatNode.ownerDocument, dom.name(parentList));\n                                    sibling.append(nestedList);\n                                }\n                                while (formatNode && formatNode.parentNode == parentList) {\n                                    nestedList.appendChild(formatNode);\n                                    formatNode = targets.shift();\n                                }\n                            }\n                        } else {\n                            var marginLeft = parseInt(indent(formatNode), 10) + 30;\n                            indent(formatNode, marginLeft);\n                            for (var targetIndex = 0; targetIndex < targets.length; targetIndex++) {\n                                if ($.contains(formatNode, targets[targetIndex])) {\n                                    targets.splice(targetIndex, 1);\n                                }\n                            }\n                        }\n                    }\n                } else {\n                    var formatter = new BlockFormatter([{ tags: ['p'] }], { style: { marginLeft: 30 } });\n                    formatter.apply(nodes);\n                }\n            },\n            mapImmutables: function (nodes) {\n                if (!this.immutables) {\n                    return nodes;\n                } else {\n                    var immutables = [];\n                    return $.map(nodes, function (node) {\n                        var immutable = Editor.Immutables.immutableParent(node);\n                        if (immutable) {\n                            if ($.inArray(immutable, immutables) === -1) {\n                                immutables.push(immutable);\n                            } else {\n                                return null;\n                            }\n                        }\n                        return immutable || node;\n                    });\n                }\n            },\n            remove: function (nodes) {\n                nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n                var formatNodes = this.finder.findSuitable(nodes), targetNode, i, len, list, listParent, siblings, formatNode, marginLeft;\n                formatNodes = this.mapImmutables(formatNodes);\n                for (i = 0, len = formatNodes.length; i < len; i++) {\n                    formatNode = $(formatNodes[i]);\n                    if (formatNode.is('li')) {\n                        list = formatNode.parent();\n                        listParent = list.parent();\n                        if (listParent.is('li,ul,ol') && !indent(list[0])) {\n                            if (targetNode && $.contains(targetNode, listParent[0])) {\n                                continue;\n                            }\n                            siblings = formatNode.nextAll('li');\n                            if (siblings.length) {\n                                $(list[0].cloneNode(false)).appendTo(formatNode).append(siblings);\n                            }\n                            if (listParent.is('li')) {\n                                formatNode.insertAfter(listParent);\n                            } else {\n                                formatNode.appendTo(listParent);\n                            }\n                            if (!list.children('li').length) {\n                                list.remove();\n                            }\n                            continue;\n                        } else {\n                            if (targetNode == list[0]) {\n                                continue;\n                            }\n                            targetNode = list[0];\n                        }\n                    } else {\n                        targetNode = formatNodes[i];\n                    }\n                    marginLeft = parseInt(indent(targetNode), 10) - 30;\n                    indent(targetNode, marginLeft);\n                }\n            }\n        });\n        var IndentCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                options.formatter = {\n                    toggle: $.proxy(function (range) {\n                        var indentFormatter = new IndentFormatter();\n                        indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                        indentFormatter.apply(RangeUtils.nodes(range));\n                    }, that)\n                };\n                Command.fn.init.call(this, options);\n            }\n        });\n        var OutdentCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                options.formatter = {\n                    toggle: $.proxy(function (range) {\n                        var indentFormatter = new IndentFormatter();\n                        indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                        indentFormatter.remove(RangeUtils.nodes(range));\n                    }, that)\n                };\n                Command.fn.init.call(this, options);\n            }\n        });\n        var OutdentTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.finder = new BlockFormatFinder([{ tags: blockElements }]);\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                $.extend(this.options, { immutables: options.editor && options.editor.options.immutables });\n                ui.addClass('k-state-disabled');\n            },\n            update: function (ui, nodes) {\n                var suitableNodes = this.finder.findSuitable(nodes), isOutdentable, listParentsCount, i, len, suitable, immutableParent;\n                for (i = 0, len = suitableNodes.length; i < len; i++) {\n                    suitable = suitableNodes[i];\n                    if (this.options.immutables) {\n                        immutableParent = Editor.Immutables.immutableParent(suitable);\n                        if (immutableParent) {\n                            suitable = immutableParent;\n                        }\n                    }\n                    isOutdentable = indent(suitable);\n                    if (!isOutdentable) {\n                        listParentsCount = $(suitable).parents('ul,ol').length;\n                        isOutdentable = dom.is(suitable, 'li') && (listParentsCount > 1 || indent(suitable.parentNode)) || dom.ofType(suitable, [\n                            'ul',\n                            'ol'\n                        ]) && listParentsCount > 0;\n                    }\n                    if (isOutdentable) {\n                        ui.removeClass('k-state-disabled');\n                        return;\n                    }\n                }\n                ui.addClass('k-state-disabled').removeClass('k-state-hover');\n            }\n        });\n        extend(Editor, {\n            IndentFormatter: IndentFormatter,\n            IndentCommand: IndentCommand,\n            OutdentCommand: OutdentCommand,\n            OutdentTool: OutdentTool\n        });\n        registerTool('indent', new Tool({\n            command: IndentCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Indent'\n            })\n        }));\n        registerTool('outdent', new OutdentTool({\n            command: OutdentCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Outdent'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/linebreak', ['editor/plugins/formatblock'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, extend = $.extend, editorNS = kendo.ui.editor, dom = editorNS.Dom, Command = editorNS.Command, Tool = editorNS.Tool, BlockFormatter = editorNS.BlockFormatter, normalize = dom.normalize, RangeUtils = editorNS.RangeUtils, registerTool = editorNS.EditorUtils.registerTool;\n        var ParagraphCommand = Command.extend({\n            init: function (options) {\n                this.options = options;\n                Command.fn.init.call(this, options);\n            },\n            _insertMarker: function (doc, range) {\n                var marker = dom.create(doc, 'a'), container;\n                marker.className = 'k-marker';\n                range.insertNode(marker);\n                if (!marker.parentNode) {\n                    container = range.commonAncestorContainer;\n                    container.innerHTML = '';\n                    container.appendChild(marker);\n                }\n                normalize(marker.parentNode);\n                return marker;\n            },\n            _moveFocus: function (range, candidate) {\n                if (dom.isEmpty(candidate)) {\n                    range.setStartBefore(candidate);\n                } else {\n                    range.selectNodeContents(candidate);\n                    var focusNode = RangeUtils.textNodes(range)[0];\n                    if (!focusNode) {\n                        while (candidate.childNodes.length && !dom.is(candidate.firstChild, 'br')) {\n                            candidate = candidate.firstChild;\n                        }\n                        focusNode = candidate;\n                    }\n                    if (dom.isEmpty(focusNode)) {\n                        range.setStartBefore(focusNode);\n                    } else {\n                        if (dom.emptyNode(focusNode)) {\n                            focusNode.innerHTML = '\\uFEFF';\n                        }\n                        var startNode = focusNode.firstChild || focusNode;\n                        if (dom.isDataNode(startNode)) {\n                            range.setStart(startNode, 0);\n                        } else {\n                            range.setStartBefore(startNode);\n                        }\n                    }\n                }\n            },\n            shouldTrim: function (range) {\n                var blocks = 'p,h1,h2,h3,h4,h5,h6'.split(','), startInBlock = dom.parentOfType(range.startContainer, blocks), endInBlock = dom.parentOfType(range.endContainer, blocks);\n                return startInBlock && !endInBlock || !startInBlock && endInBlock;\n            },\n            _blankAfter: function (node) {\n                while (node && (dom.isMarker(node) || dom.stripBom(node.nodeValue) === '')) {\n                    node = node.nextSibling;\n                }\n                return !node;\n            },\n            exec: function () {\n                var range = this.getRange(), doc = RangeUtils.documentFromRange(range), parent, previous, next, emptyParagraphContent = editorNS.emptyElementContent, paragraph, marker, li, heading, tableNode, rng, shouldTrim;\n                this.expandImmutablesIn(range);\n                shouldTrim = this.shouldTrim(range);\n                range.deleteContents();\n                marker = this._insertMarker(doc, range);\n                dom.stripBomNode(marker.previousSibling);\n                dom.stripBomNode(marker.nextSibling);\n                li = dom.closestEditableOfType(marker, ['li']);\n                heading = dom.closestEditableOfType(marker, 'h1,h2,h3,h4,h5,h6'.split(','));\n                tableNode = dom.is(marker.parentNode, 'table') && marker.parentNode;\n                if (li) {\n                    if (dom.emptyNode(li)) {\n                        paragraph = dom.create(doc, 'p');\n                        if (dom.next(li)) {\n                            rng = range.cloneRange();\n                            rng.selectNode(li);\n                            RangeUtils.split(rng, li.parentNode);\n                        }\n                        var br = $('br', li);\n                        if (br.length == 1) {\n                            br.remove();\n                        }\n                        var parentNode = li.parentNode;\n                        var parentChildrenLength = li.parentNode.children.length;\n                        var firstChild = parentChildrenLength > 1 && li.childNodes.length == 1 && li.children[0];\n                        dom.insertAfter(paragraph, parentNode);\n                        dom.remove(parentChildrenLength == 1 ? li.parentNode : li);\n                        if (firstChild && firstChild !== marker) {\n                            paragraph.appendChild(firstChild);\n                            paragraph.appendChild(marker);\n                        } else {\n                            paragraph.innerHTML = emptyParagraphContent;\n                        }\n                        next = paragraph;\n                    }\n                } else if (heading && this._blankAfter(marker)) {\n                    paragraph = this._insertParagraphAfter(heading);\n                    dom.remove(marker);\n                    next = paragraph;\n                } else if (tableNode) {\n                    paragraph = this._insertParagraphAfter(tableNode);\n                    dom.remove(marker);\n                    next = paragraph;\n                }\n                if (!next) {\n                    if (!(li || heading)) {\n                        new BlockFormatter([{ tags: ['p'] }]).apply([marker]);\n                    }\n                    range.selectNode(marker);\n                    parent = dom.parentOfType(marker, [li ? 'li' : heading ? dom.name(heading) : 'p']);\n                    RangeUtils.split(range, parent, shouldTrim);\n                    previous = parent.previousSibling;\n                    if (dom.is(previous, 'li') && previous.firstChild && !dom.is(previous.firstChild, 'br')) {\n                        previous = previous.firstChild;\n                    }\n                    next = parent.nextSibling;\n                    this.clean(previous, { links: true });\n                    this.clean(next, { links: true });\n                    if (dom.is(next, 'li') && next.firstChild && !dom.is(next.firstChild, 'br')) {\n                        next = next.firstChild;\n                    }\n                    dom.remove(parent);\n                    normalize(previous);\n                }\n                normalize(next);\n                this._moveFocus(range, next);\n                range.collapse(true);\n                dom.scrollTo(next, true);\n                RangeUtils.selectRange(range);\n            },\n            _insertParagraphAfter: function (node) {\n                var range = this.getRange();\n                var doc = RangeUtils.documentFromRange(range);\n                var emptyElementContent = editorNS.emptyElementContent;\n                var paragraph = dom.create(doc, 'p');\n                dom.insertAfter(paragraph, node);\n                paragraph.innerHTML = emptyElementContent;\n                return paragraph;\n            },\n            clean: function (node, options) {\n                var root = node;\n                if (node.firstChild && dom.is(node.firstChild, 'br')) {\n                    dom.remove(node.firstChild);\n                }\n                if (dom.isDataNode(node) && !node.nodeValue) {\n                    node = node.parentNode;\n                }\n                if (node) {\n                    var siblings = false;\n                    while (node.firstChild && node.firstChild.nodeType == 1) {\n                        siblings = siblings || dom.significantNodes(node.childNodes).length > 1;\n                        node = node.firstChild;\n                    }\n                    if (!dom.isEmpty(node) && /^\\s*$/.test(node.innerHTML) && !siblings) {\n                        $(root).find('.k-br').remove();\n                        node.innerHTML = editorNS.emptyElementContent;\n                    }\n                    if (options && options.links) {\n                        while (node != root) {\n                            if (dom.is(node, 'a') && dom.emptyNode(node)) {\n                                dom.unwrap(node);\n                                break;\n                            }\n                            node = node.parentNode;\n                        }\n                    }\n                }\n            }\n        });\n        var NewLineCommand = Command.extend({\n            init: function (options) {\n                this.options = options;\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var range = this.getRange();\n                this.expandImmutablesIn(range);\n                var br = dom.create(RangeUtils.documentFromRange(range), 'br');\n                var node = range.startContainer;\n                var filler;\n                var browser = kendo.support.browser;\n                var oldIE = browser.msie && browser.version < 11;\n                var tableNode = dom.is(node, 'table') && node;\n                range.deleteContents();\n                if (tableNode) {\n                    dom.insertAfter(br, tableNode);\n                } else {\n                    range.insertNode(br);\n                }\n                normalize(br.parentNode);\n                if (!oldIE && (!br.nextSibling || dom.isWhitespace(br.nextSibling))) {\n                    filler = br.cloneNode(true);\n                    filler.className = 'k-br';\n                    dom.insertAfter(filler, br);\n                }\n                range.setStartAfter(br);\n                range.collapse(true);\n                dom.scrollTo(br.nextSibling || br, true);\n                RangeUtils.selectRange(range);\n            }\n        });\n        extend(editorNS, {\n            ParagraphCommand: ParagraphCommand,\n            NewLineCommand: NewLineCommand\n        });\n        registerTool('insertLineBreak', new Tool({\n            key: 13,\n            shift: true,\n            command: NewLineCommand\n        }));\n        registerTool('insertParagraph', new Tool({\n            key: 13,\n            command: ParagraphCommand\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/file', [\n        'kendo.filebrowser',\n        'editor/plugins/link'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, Command = Editor.Command, LinkFormatter = Editor.LinkFormatter, textNodes = RangeUtils.textNodes, keys = kendo.keys, KEDITORFILEURL = '#k-editor-file-url', KEDITORFILETEXT = '#k-editor-file-text', KEDITORFILETITLE = '#k-editor-file-title';\n        var FileCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                Command.fn.init.call(that, options);\n                that.formatter = new LinkFormatter();\n                that.async = true;\n                that.attributes = {};\n            },\n            insertFile: function (file, range) {\n                var attributes = this.attributes;\n                var doc = RangeUtils.documentFromRange(range);\n                if (attributes.href && attributes.href != 'http://') {\n                    if (!file) {\n                        file = dom.create(doc, 'a', { href: attributes.href });\n                        file.innerHTML = attributes.innerHTML;\n                        file.title = attributes.title;\n                        range.deleteContents();\n                        range.insertNode(file);\n                        if (!file.nextSibling) {\n                            dom.insertAfter(doc.createTextNode('\\uFEFF'), file);\n                        }\n                        range.setStartAfter(file);\n                        range.setEndAfter(file);\n                        RangeUtils.selectRange(range);\n                        return true;\n                    } else {\n                        dom.attr(file, attributes);\n                    }\n                }\n                return false;\n            },\n            _dialogTemplate: function (showBrowser) {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form\">' + '<div class=\"k-edit-form-container\">' + '<div class=\"k-edit-form-content\">' + '# if (showBrowser) { #' + '<div class=\"k-filebrowser\"></div>' + '# } #' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-url\">#: messages.fileWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-textbox\" id=\"k-editor-file-url\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-text\">#: messages.fileText #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-textbox\" id=\"k-editor-file-text\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-title\">#: messages.fileTitle #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-textbox\" id=\"k-editor-file-title\">' + '</div>' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>' + '</div>')({\n                    messages: this.editor.options.messages,\n                    showBrowser: showBrowser\n                });\n            },\n            redo: function () {\n                var that = this, range = that.lockRange();\n                this.formatter.apply(range, this.attributes);\n                that.releaseRange(range);\n            },\n            exec: function () {\n                var that = this, range = that.lockRange(), nodes = textNodes(range), applied = false, file = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null, dialog, isIE = kendo.support.browser.msie, options = that.editor.options, messages = options.messages, fileBrowser = options.fileBrowser, showBrowser = !!(kendo.ui.FileBrowser && fileBrowser && fileBrowser.transport && fileBrowser.transport.read !== undefined), dialogOptions = {\n                        title: messages.insertFile,\n                        visible: false,\n                        resizable: showBrowser\n                    };\n                this.expandImmutablesIn(range);\n                function apply(e) {\n                    var element = dialog.element, href = element.find(KEDITORFILEURL).val().replace(/ /g, '%20'), innerHTML = element.find(KEDITORFILETEXT).val(), title = element.find(KEDITORFILETITLE).val();\n                    that.attributes = {\n                        href: href,\n                        innerHTML: innerHTML !== '' ? innerHTML : href,\n                        title: title\n                    };\n                    applied = that.insertFile(file, range);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.destroy();\n                    dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                    if (!applied) {\n                        that.releaseRange(range);\n                    }\n                }\n                function keyDown(e) {\n                    if (e.keyCode == keys.ENTER) {\n                        apply(e);\n                    } else if (e.keyCode == keys.ESC) {\n                        close(e);\n                    }\n                }\n                dialogOptions.close = close;\n                if (showBrowser) {\n                    dialogOptions.width = 750;\n                }\n                dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions).toggleClass('k-filebrowser-dialog', showBrowser).find('.k-dialog-insert').click(apply).end().find('.k-dialog-close').click(close).end().find('.k-edit-field input').keydown(keyDown).end().find(KEDITORFILEURL).val(file ? file.getAttribute('href', 2) : 'http://').end().find(KEDITORFILETEXT).val(file ? file.innerText : '').end().find(KEDITORFILETITLE).val(file ? file.title : '').end().data('kendoWindow');\n                var element = dialog.element;\n                if (showBrowser) {\n                    that._fileBrowser = new kendo.ui.FileBrowser(element.find('.k-filebrowser'), extend({}, fileBrowser));\n                    that._fileBrowser.bind('change', function (ev) {\n                        if (ev.selected.get('type') === 'f') {\n                            element.find(KEDITORFILEURL).val(this.value());\n                        }\n                    });\n                    that._fileBrowser.bind('apply', apply);\n                }\n                if (isIE) {\n                    var dialogHeight = element.closest('.k-window').height();\n                    element.css('max-height', dialogHeight);\n                }\n                dialog.center().open();\n                element.find(KEDITORFILEURL).focus().select();\n            }\n        });\n        kendo.ui.editor.FileCommand = FileCommand;\n        registerTool('insertFile', new Editor.Tool({\n            command: FileCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert File'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/tables', [\n        'editor/plugins/formatblock',\n        'editor/plugins/insert'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, Command = Editor.Command, NS = 'kendoEditor', ACTIVESTATE = 'k-state-active', SELECTEDSTATE = 'k-state-selected', Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, InsertHtmlCommand = Editor.InsertHtmlCommand, BlockFormatFinder = Editor.BlockFormatFinder, registerTool = Editor.EditorUtils.registerTool, getTouches = kendo.getTouches;\n        var template = kendo.template;\n        var columnTemplate = '<td style=\\'width:#=width#%;\\'>#=content#</td>';\n        var tableFormatFinder = new BlockFormatFinder([{ tags: ['table'] }]);\n        var TableCommand = InsertHtmlCommand.extend({\n            init: function (options) {\n                var o = $.extend({\n                    postProcess: this.postProcess,\n                    skipCleaners: true\n                }, options || {});\n                InsertHtmlCommand.fn.init.call(this, o);\n            },\n            _tableHtml: function (rows, columns) {\n                rows = rows || 1;\n                columns = columns || 1;\n                var columnHtml = template(columnTemplate)({\n                    width: 100 / columns,\n                    content: Editor.emptyTableCellContent\n                });\n                var rowHeight = 100 / rows;\n                return '<table class=\\'k-table\\' data-last>' + new Array(rows + 1).join('<tr style=\\'height:' + rowHeight + '%;\\'>' + new Array(columns + 1).join(columnHtml) + '</tr>') + '</table>';\n            },\n            postProcess: function (editor, range) {\n                var insertedTable = $('table[data-last]', editor.document).removeAttr('data-last');\n                range.setStart(insertedTable.find('td')[0], 0);\n                range.collapse(true);\n                editor.selectRange(range);\n            },\n            exec: function () {\n                var options = this.options;\n                options.html = this._tableHtml(options.rows, options.columns);\n                InsertHtmlCommand.fn.exec.call(this);\n            }\n        });\n        var PopupTool = Tool.extend({\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                var popup = $(this.options.popupTemplate).appendTo('body').kendoPopup({\n                    anchor: ui,\n                    copyAnchorStyles: false,\n                    open: proxy(this._open, this),\n                    activate: proxy(this._activate, this),\n                    close: proxy(this._close, this)\n                }).data('kendoPopup');\n                ui.click(proxy(this._toggle, this)).keydown(proxy(this._keydown, this));\n                var editor = this._editor = options.editor;\n                this._popup = popup;\n                var tableWizard = new Editor.TableWizardTool({\n                    template: new ToolTemplate({\n                        template: EditorUtils.tableWizardButtonTemplate,\n                        title: editor.options.messages.tableWizard\n                    }),\n                    command: Editor.TableWizardCommand,\n                    insertNewTable: true\n                });\n                registerTool('tableWizardInsert', tableWizard);\n                var twTool = $('<div class=\\'k-editor-toolbar\\'>' + tableWizard.options.template.getHtml() + '</div>');\n                twTool.appendTo(popup.element);\n                if (editor.toolbar) {\n                    editor.toolbar.attachToolsEvents(twTool);\n                }\n            },\n            popup: function () {\n                return this._popup;\n            },\n            _activate: $.noop,\n            _open: function () {\n                this._popup.options.anchor.addClass(ACTIVESTATE);\n            },\n            _close: function () {\n                this._popup.options.anchor.removeClass(ACTIVESTATE);\n            },\n            _keydown: function (e) {\n                var keys = kendo.keys;\n                var key = e.keyCode;\n                if (key == keys.DOWN && e.altKey) {\n                    this._popup.open();\n                } else if (key == keys.ESC) {\n                    this._popup.close();\n                }\n            },\n            _toggle: function (e) {\n                var button = $(e.target).closest('.k-tool');\n                if (!button.hasClass('k-state-disabled')) {\n                    this.popup().toggle();\n                }\n            },\n            update: function (ui) {\n                var popup = this.popup();\n                if (popup.wrapper && popup.wrapper.css('display') == 'block') {\n                    popup.close();\n                }\n                ui.removeClass('k-state-hover');\n            },\n            destroy: function () {\n                this._popup.destroy();\n            }\n        });\n        var InsertTableTool = PopupTool.extend({\n            init: function (options) {\n                this.cols = 8;\n                this.rows = 6;\n                PopupTool.fn.init.call(this, $.extend(options, {\n                    command: TableCommand,\n                    popupTemplate: '<div class=\\'k-ct-popup\\'>' + new Array(this.cols * this.rows + 1).join('<span class=\\'k-ct-cell k-state-disabled\\' />') + '<div class=\\'k-status\\'></div>' + '</div>'\n                }));\n            },\n            _activate: function () {\n                var that = this, element = that._popup.element, cells = element.find('.k-ct-cell'), firstCell = cells.eq(0), lastCell = cells.eq(cells.length - 1), start = kendo.getOffset(firstCell), end = kendo.getOffset(lastCell), cols = that.cols, rows = that.rows, cellWidth, cellHeight;\n                element.find('*').addBack().attr('unselectable', 'on');\n                end.left += lastCell[0].offsetWidth;\n                end.top += lastCell[0].offsetHeight;\n                cellWidth = (end.left - start.left) / cols;\n                cellHeight = (end.top - start.top) / rows;\n                function tableFromLocation(e) {\n                    var w = $(window);\n                    return {\n                        row: Math.floor((e.clientY + w.scrollTop() - start.top) / cellHeight) + 1,\n                        col: Math.floor((e.clientX + w.scrollLeft() - start.left) / cellWidth) + 1\n                    };\n                }\n                element.autoApplyNS(NS).on('mousemove', '.k-ct-cell', function (e) {\n                    that._setTableSize(tableFromLocation(e));\n                }).on('mouseleave', '.k-ct-cell', function () {\n                    that._setTableSize();\n                }).on('down', '.k-ct-cell', function (e) {\n                    e.preventDefault();\n                    var touch = getTouches(e)[0];\n                    that._exec(tableFromLocation(touch.location));\n                });\n            },\n            _valid: function (size) {\n                return size && size.row > 0 && size.col > 0 && size.row <= this.rows && size.col <= this.cols;\n            },\n            _exec: function (size) {\n                if (this._valid(size)) {\n                    this._editor.exec('createTable', {\n                        rows: size.row,\n                        columns: size.col\n                    });\n                    this._popup.close();\n                }\n            },\n            _setTableSize: function (size) {\n                var element = this._popup.element;\n                var status = element.find('.k-status');\n                var cells = element.find('.k-ct-cell');\n                var cols = this.cols;\n                var messages = this._editor.options.messages;\n                if (this._valid(size)) {\n                    status.text(kendo.format(messages.createTableHint, size.row, size.col));\n                    cells.each(function (i) {\n                        $(this).toggleClass(SELECTEDSTATE, i % cols < size.col && i / cols < size.row);\n                    });\n                } else {\n                    status.text(messages.createTable);\n                    cells.removeClass(SELECTEDSTATE);\n                }\n            },\n            _keydown: function (e) {\n                PopupTool.fn._keydown.call(this, e);\n                if (!this._popup.visible()) {\n                    return;\n                }\n                var keys = kendo.keys;\n                var key = e.keyCode;\n                var cells = this._popup.element.find('.k-ct-cell');\n                var focus = Math.max(cells.filter('.k-state-selected').last().index(), 0);\n                var selectedRows = Math.floor(focus / this.cols);\n                var selectedColumns = focus % this.cols;\n                var changed = false;\n                if (key == keys.DOWN && !e.altKey) {\n                    changed = true;\n                    selectedRows++;\n                } else if (key == keys.UP) {\n                    changed = true;\n                    selectedRows--;\n                } else if (key == keys.RIGHT) {\n                    changed = true;\n                    selectedColumns++;\n                } else if (key == keys.LEFT) {\n                    changed = true;\n                    selectedColumns--;\n                }\n                var tableSize = {\n                    row: Math.max(1, Math.min(this.rows, selectedRows + 1)),\n                    col: Math.max(1, Math.min(this.cols, selectedColumns + 1))\n                };\n                if (key == keys.ENTER) {\n                    this._exec(tableSize);\n                } else {\n                    this._setTableSize(tableSize);\n                }\n                if (changed) {\n                    e.preventDefault();\n                    e.stopImmediatePropagation();\n                }\n            },\n            _open: function () {\n                var messages = this._editor.options.messages;\n                PopupTool.fn._open.call(this);\n                this.popup().element.find('.k-status').text(messages.createTable).end().find('.k-ct-cell').removeClass(SELECTEDSTATE);\n            },\n            _close: function () {\n                PopupTool.fn._close.call(this);\n                this.popup().element.off('.' + NS);\n            }\n        });\n        var InsertRowCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(true), td = range.endContainer, cellCount, row, newRow;\n                while (dom.name(td) != 'td') {\n                    td = td.parentNode;\n                }\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    return;\n                }\n                row = td.parentNode;\n                cellCount = row.children.length;\n                newRow = row.cloneNode(true);\n                for (var i = 0; i < row.cells.length; i++) {\n                    newRow.cells[i].innerHTML = Editor.emptyTableCellContent;\n                }\n                if (this.options.position == 'before') {\n                    dom.insertBefore(newRow, row);\n                } else {\n                    dom.insertAfter(newRow, row);\n                }\n                this.releaseRange(range);\n            }\n        });\n        var InsertColumnCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(true), td = dom.closest(range.endContainer, 'td'), table = dom.closest(td, 'table'), columnIndex, i, rows = table.rows, cell, newCell, position = this.options.position;\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    return;\n                }\n                columnIndex = dom.findNodeIndex(td, true);\n                for (i = 0; i < rows.length; i++) {\n                    cell = rows[i].cells[columnIndex];\n                    newCell = cell.cloneNode();\n                    newCell.innerHTML = Editor.emptyTableCellContent;\n                    if (position == 'before') {\n                        dom.insertBefore(newCell, cell);\n                    } else {\n                        dom.insertAfter(newCell, cell);\n                    }\n                }\n                this.releaseRange(range);\n            }\n        });\n        var DeleteRowCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange();\n                var rows = RangeUtils.mapAll(range, function (node) {\n                    return $(node).closest('tr')[0];\n                });\n                var row = rows[0];\n                if (this.immutables() && Editor.Immutables.immutableParent(row)) {\n                    return;\n                }\n                var table = dom.closest(row, 'table');\n                var focusElement;\n                if (table.rows.length <= rows.length) {\n                    focusElement = dom.next(table);\n                    if (!focusElement || dom.insignificant(focusElement)) {\n                        focusElement = dom.prev(table);\n                    }\n                    dom.remove(table);\n                } else {\n                    for (var i = 0; i < rows.length; i++) {\n                        row = rows[i];\n                        dom.removeTextSiblings(row);\n                        focusElement = dom.next(row) || dom.prev(row);\n                        focusElement = focusElement.cells[0];\n                        dom.remove(row);\n                    }\n                }\n                if (focusElement) {\n                    range.setStart(focusElement, 0);\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n            }\n        });\n        var DeleteColumnCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(), td = dom.closest(range.endContainer, 'td'), table = dom.closest(td, 'table'), rows = table.rows, columnIndex = dom.findNodeIndex(td, true), columnCount = rows[0].cells.length, focusElement, i;\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    return;\n                }\n                if (columnCount == 1) {\n                    focusElement = dom.next(table);\n                    if (!focusElement || dom.insignificant(focusElement)) {\n                        focusElement = dom.prev(table);\n                    }\n                    dom.remove(table);\n                } else {\n                    dom.removeTextSiblings(td);\n                    focusElement = dom.next(td) || dom.prev(td);\n                    for (i = 0; i < rows.length; i++) {\n                        dom.remove(rows[i].cells[columnIndex]);\n                    }\n                }\n                if (focusElement) {\n                    range.setStart(focusElement, 0);\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n            }\n        });\n        var TableModificationTool = Tool.extend({\n            command: function (options) {\n                options = extend(options, this.options);\n                if (options.action == 'delete') {\n                    if (options.type == 'row') {\n                        return new DeleteRowCommand(options);\n                    } else {\n                        return new DeleteColumnCommand(options);\n                    }\n                } else {\n                    if (options.type == 'row') {\n                        return new InsertRowCommand(options);\n                    } else {\n                        return new InsertColumnCommand(options);\n                    }\n                }\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                ui.addClass('k-state-disabled');\n            },\n            update: function (ui, nodes) {\n                var isFormatted = !tableFormatFinder.isFormatted(nodes);\n                ui.toggleClass('k-state-disabled', isFormatted);\n            }\n        });\n        extend(kendo.ui.editor, {\n            PopupTool: PopupTool,\n            TableCommand: TableCommand,\n            InsertTableTool: InsertTableTool,\n            TableModificationTool: TableModificationTool,\n            InsertRowCommand: InsertRowCommand,\n            InsertColumnCommand: InsertColumnCommand,\n            DeleteRowCommand: DeleteRowCommand,\n            DeleteColumnCommand: DeleteColumnCommand\n        });\n        registerTool('createTable', new InsertTableTool({\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                popup: true,\n                title: 'Create table'\n            })\n        }));\n        registerTool('addColumnLeft', new TableModificationTool({\n            type: 'column',\n            position: 'before',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add column on the left'\n            })\n        }));\n        registerTool('addColumnRight', new TableModificationTool({\n            type: 'column',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add column on the right'\n            })\n        }));\n        registerTool('addRowAbove', new TableModificationTool({\n            type: 'row',\n            position: 'before',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add row above'\n            })\n        }));\n        registerTool('addRowBelow', new TableModificationTool({\n            type: 'row',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add row below'\n            })\n        }));\n        registerTool('deleteRow', new TableModificationTool({\n            type: 'row',\n            action: 'delete',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Delete row'\n            })\n        }));\n        registerTool('deleteColumn', new TableModificationTool({\n            type: 'column',\n            action: 'delete',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Delete column'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/clipboard', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, editorNS = kendo.ui.editor, RangeUtils = editorNS.RangeUtils, dom = editorNS.Dom, RestorePoint = editorNS.RestorePoint, Marker = editorNS.Marker, browser = kendo.support.browser, extend = $.extend;\n        var Clipboard = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                var pasteCleanup = editor.options.pasteCleanup;\n                this.cleaners = [\n                    new ScriptCleaner(pasteCleanup),\n                    new TabCleaner(pasteCleanup),\n                    new MSWordFormatCleaner(pasteCleanup),\n                    new WebkitFormatCleaner(pasteCleanup),\n                    new HtmlTagsCleaner(pasteCleanup),\n                    new HtmlAttrCleaner(pasteCleanup),\n                    new HtmlContentCleaner(pasteCleanup),\n                    new CustomCleaner(pasteCleanup)\n                ];\n            },\n            htmlToFragment: function (html) {\n                var editor = this.editor, doc = editor.document, container = dom.create(doc, 'div'), fragment = doc.createDocumentFragment();\n                container.innerHTML = html;\n                while (container.firstChild) {\n                    fragment.appendChild(container.firstChild);\n                }\n                return fragment;\n            },\n            isBlock: function (html) {\n                return /<(div|p|ul|ol|table|h[1-6])/i.test(html);\n            },\n            _startModification: function () {\n                var range;\n                var restorePoint;\n                var editor = this.editor;\n                if (this._inProgress) {\n                    return;\n                }\n                this._inProgress = true;\n                range = editor.getRange();\n                restorePoint = new RestorePoint(range, editor.body);\n                dom.persistScrollTop(editor.document);\n                return {\n                    range: range,\n                    restorePoint: restorePoint\n                };\n            },\n            _endModification: function (modificationInfo) {\n                editorNS._finishUpdate(this.editor, modificationInfo.restorePoint);\n                this.editor._selectionChange();\n                this._inProgress = false;\n            },\n            _contentModification: function (before, after) {\n                var that = this;\n                var editor = that.editor;\n                var modificationInfo = that._startModification();\n                if (!modificationInfo) {\n                    return;\n                }\n                before.call(that, editor, modificationInfo.range);\n                setTimeout(function () {\n                    after.call(that, editor, modificationInfo.range);\n                    that._endModification(modificationInfo);\n                });\n            },\n            _removeBomNodes: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                for (var i = 0; i < nodes.length; i++) {\n                    nodes[i].nodeValue = dom.stripBom(nodes[i].nodeValue) || nodes[i].nodeValue;\n                }\n            },\n            _onBeforeCopy: function (range) {\n                var marker = new Marker();\n                marker.add(range);\n                this._removeBomNodes(range);\n                marker.remove(range);\n                this.editor.selectRange(range);\n            },\n            oncopy: function () {\n                this._onBeforeCopy(this.editor.getRange());\n            },\n            oncut: function () {\n                this._onBeforeCopy(this.editor.getRange());\n                this._contentModification($.noop, $.noop);\n            },\n            _fileToDataURL: function (blob) {\n                var deferred = $.Deferred();\n                var reader = new FileReader();\n                if (!(blob instanceof window.File) && blob.getAsFile) {\n                    blob = blob.getAsFile();\n                }\n                reader.onload = $.proxy(deferred.resolve, deferred);\n                reader.readAsDataURL(blob);\n                return deferred.promise();\n            },\n            _triggerPaste: function (html, options) {\n                var args = { html: html || '' };\n                args.html = args.html.replace(/\\ufeff/g, '');\n                this.editor.trigger('paste', args);\n                this.paste(args.html, options || {});\n            },\n            _handleImagePaste: function (e) {\n                if (!('FileReader' in window) || browser.msie && browser.version > 10) {\n                    return;\n                }\n                var clipboardData = e.clipboardData || e.originalEvent.clipboardData || window.clipboardData || {};\n                var items = clipboardData.items || clipboardData.files;\n                return this._insertImages(items);\n            },\n            _insertImages: function (items) {\n                if (!items) {\n                    return;\n                }\n                var images = $.grep(items, function (item) {\n                    return /^image\\//i.test(item.type);\n                });\n                var html = $.grep(items, function (item) {\n                    return /^text\\/html/i.test(item.type);\n                });\n                if (html.length || !images.length) {\n                    return;\n                }\n                var modificationInfo = this._startModification();\n                if (!modificationInfo) {\n                    return;\n                }\n                $.when.apply($, $.map(images, this._fileToDataURL)).done($.proxy(function () {\n                    var results = Array.prototype.slice.call(arguments);\n                    var html = $.map(results, function (e) {\n                        return '<img src=\"' + e.target.result + '\" />';\n                    }).join('');\n                    this._triggerPaste(html);\n                    this._endModification(modificationInfo);\n                }, this));\n                return true;\n            },\n            onpaste: function (e) {\n                if (this.editor.body.contentEditable === 'false') {\n                    return;\n                }\n                if (this._handleImagePaste(e)) {\n                    e.preventDefault();\n                    return;\n                }\n                this.expandImmutablesIn();\n                this._contentModification(function beforePaste(editor, range) {\n                    var clipboardNode = dom.create(editor.document, 'div', {\n                        className: 'k-paste-container',\n                        innerHTML: '\\uFEFF'\n                    });\n                    var browser = kendo.support.browser;\n                    var body = editor.body;\n                    this._decoreateClipboardNode(clipboardNode, body);\n                    body.appendChild(clipboardNode);\n                    if (browser.webkit) {\n                        this._moveToCaretPosition(clipboardNode, range);\n                    }\n                    if (browser.msie && browser.version < 11) {\n                        e.preventDefault();\n                        var r = editor.createRange();\n                        r.selectNodeContents(clipboardNode);\n                        editor.selectRange(r);\n                        var textRange = editor.document.body.createTextRange();\n                        textRange.moveToElementText(clipboardNode);\n                        $(body).unbind('paste');\n                        textRange.execCommand('Paste');\n                        $(body).bind('paste', $.proxy(this.onpaste, this));\n                    } else {\n                        var clipboardRange = editor.createRange();\n                        clipboardRange.selectNodeContents(clipboardNode);\n                        editor.selectRange(clipboardRange);\n                    }\n                    range.deleteContents();\n                }, function afterPaste(editor, range) {\n                    var html = '', containers;\n                    editor.selectRange(range);\n                    containers = $(editor.body).children('.k-paste-container');\n                    containers.each(function () {\n                        var lastChild = this.lastChild;\n                        if (lastChild && dom.is(lastChild, 'br')) {\n                            dom.remove(lastChild);\n                        }\n                        html += this.innerHTML;\n                    });\n                    containers.remove();\n                    this._triggerPaste(html, { clean: true });\n                });\n            },\n            ondragover: function (e) {\n                if (browser.msie || browser.edge) {\n                    e.stopPropagation();\n                    e.preventDefault();\n                }\n            },\n            ondrop: function (e) {\n                if (!('FileReader' in window)) {\n                    return;\n                }\n                var dataTransfer = (e.originalEvent || e).dataTransfer || {};\n                var items = dataTransfer.items || dataTransfer.files;\n                if (this._insertImages(items)) {\n                    e.preventDefault();\n                }\n            },\n            _decoreateClipboardNode: function (node, body) {\n                if (!browser.msie && !browser.webkit) {\n                    return;\n                }\n                node = $(node);\n                node.css({\n                    borderWidth: '0px',\n                    width: '0px',\n                    height: '0px',\n                    overflow: 'hidden',\n                    margin: '0',\n                    padding: '0'\n                });\n                if (browser.msie) {\n                    var documentElement = $(body.ownerDocument.documentElement);\n                    node.css({\n                        fontVariant: 'normal',\n                        fontWeight: 'normal',\n                        lineSpacing: 'normal',\n                        lineHeight: 'normal',\n                        textDecoration: 'none'\n                    });\n                    var color = documentElement.css('color');\n                    if (color) {\n                        node.css('color', color);\n                    }\n                    var fontFamily = documentElement.css('fontFamily');\n                    if (fontFamily) {\n                        node.css('fontFamily', fontFamily);\n                    }\n                    var fontSize = documentElement.css('fontSize');\n                    if (fontSize) {\n                        node.css('fontSize', fontSize);\n                    }\n                }\n            },\n            _moveToCaretPosition: function (node, range) {\n                var that = this;\n                var body = that.editor.body;\n                var nodeOffset = dom.offset(node, body);\n                var caretOffset = that._caretOffset(range, body);\n                var translateX = caretOffset.left - nodeOffset.left;\n                var translateY = caretOffset.top - nodeOffset.top;\n                var translate = 'translate(' + translateX + 'px,' + translateY + 'px)';\n                $(node).css({\n                    '-webkit-transform': translate,\n                    'transform': translate\n                });\n            },\n            _caretOffset: function (range, body) {\n                var editor = this.editor;\n                var caret = dom.create(editor.document, 'span', { innerHTML: '\\uFEFF' });\n                var startContainer = range.startContainer;\n                var rangeChanged;\n                if (range.collapsed) {\n                    var isStartTextNode = dom.isDataNode(startContainer);\n                    if (isStartTextNode && (dom.isBom(startContainer) || range.startOffset === 0)) {\n                        dom.insertBefore(caret, startContainer);\n                    } else if (isStartTextNode && range.startOffset === startContainer.length) {\n                        dom.insertAfter(caret, startContainer);\n                    } else {\n                        range.insertNode(caret);\n                        rangeChanged = true;\n                    }\n                } else {\n                    startContainer = startContainer === body ? startContainer.childNodes[range.startOffset] : startContainer;\n                    dom.insertBefore(caret, startContainer);\n                }\n                var offset = dom.offset(caret, body);\n                var prev = caret.previousSibling;\n                var next = caret.nextSibling;\n                dom.remove(caret);\n                if (rangeChanged && dom.isDataNode(prev) && dom.isDataNode(next) && !dom.isBom(prev) && !dom.isBom(next)) {\n                    var prevLength = prev.length;\n                    next.data = prev.data + next.data;\n                    range.setStart(next, prevLength);\n                    dom.remove(prev);\n                    range.collapse(true);\n                    editor.selectRange(range);\n                }\n                return offset;\n            },\n            expandImmutablesIn: function (range) {\n                var editor = this.editor;\n                if (editor && editor.options.immutables) {\n                    var body = editor.body;\n                    range = range || editor.getRange();\n                    kendo.ui.editor.Immutables.expandImmutablesIn(range);\n                    if (range.startContainer === body && range.startOffset === 0) {\n                        var doc = body.ownerDocument;\n                        var bomNode = doc.createTextNode('\\uFEFF');\n                        body.insertBefore(bomNode, body.childNodes[0]);\n                        range.setStartBefore(bomNode);\n                    }\n                    editor.selectRange(range);\n                }\n            },\n            splittableParent: function (block, node) {\n                var parentNode, body;\n                if (block) {\n                    return dom.closestEditableOfType(node, [\n                        'p',\n                        'ul',\n                        'ol'\n                    ]) || node.parentNode;\n                }\n                parentNode = node.parentNode;\n                body = node.ownerDocument.body;\n                if (dom.isInline(parentNode)) {\n                    while (parentNode.parentNode != body && !dom.isBlock(parentNode.parentNode)) {\n                        parentNode = parentNode.parentNode;\n                    }\n                }\n                return parentNode;\n            },\n            paste: function (html, options) {\n                var editor = this.editor, i, l, childNodes;\n                this.expandImmutablesIn();\n                options = extend({\n                    clean: false,\n                    split: true\n                }, options);\n                if (!options.skipCleaners) {\n                    for (i = 0, l = this.cleaners.length; i < l; i++) {\n                        if (this.cleaners[i].applicable(html)) {\n                            html = this.cleaners[i].clean(html);\n                        }\n                    }\n                }\n                if (options.clean) {\n                    html = html.replace(/(<br>(\\s|&nbsp;)*)+(<\\/?(div|p|li|col|t))/gi, '$3');\n                    html = html.replace(/<(a|span)[^>]*><\\/\\1>/gi, '');\n                }\n                html = html.replace(/<(a|span|font)([^>]*)> <\\/\\1>/gi, '<$1$2>&nbsp;</$1>');\n                html = html.replace(/^<li/i, '<ul><li').replace(/li>$/g, 'li></ul>');\n                var block = this.isBlock(html);\n                editor.focus();\n                var range = editor.getRange();\n                range.deleteContents();\n                if (range.startContainer == editor.document) {\n                    range.selectNodeContents(editor.body);\n                }\n                var marker = new Marker();\n                var caret = marker.addCaret(range);\n                var parent = this.splittableParent(block, caret);\n                var unwrap = false;\n                var splittable = parent != editor.body && !dom.is(parent, 'td');\n                if (options.split && splittable && (block || dom.isInline(parent))) {\n                    range.selectNode(caret);\n                    RangeUtils.split(range, parent, true);\n                    unwrap = true;\n                }\n                var fragment = this.htmlToFragment(html);\n                if (fragment.firstChild && fragment.firstChild.className === 'k-paste-container') {\n                    var fragmentsHtml = [];\n                    for (i = 0, l = fragment.childNodes.length; i < l; i++) {\n                        fragmentsHtml.push(fragment.childNodes[i].innerHTML);\n                    }\n                    fragment = this.htmlToFragment(fragmentsHtml.join('<br />'));\n                }\n                childNodes = fragment.childNodes;\n                $(childNodes).filter('table').addClass('k-table').end().find('table').addClass('k-table');\n                $(childNodes).each(function (index, elm) {\n                    if (dom.isBlock(elm) && !dom.isSelfClosing(elm) && elm.innerHTML === '') {\n                        elm.appendChild(editor.document.createTextNode('\\uFEFF'));\n                    }\n                });\n                range.insertNode(fragment);\n                parent = this.splittableParent(block, caret);\n                if (unwrap) {\n                    while (caret.parentNode != parent) {\n                        dom.unwrap(caret.parentNode);\n                    }\n                    dom.unwrap(caret.parentNode);\n                }\n                dom.normalize(range.commonAncestorContainer);\n                caret.style.display = 'inline';\n                dom.restoreScrollTop(editor.document);\n                dom.scrollTo(caret);\n                marker.removeCaret(range);\n                var rangeEnd = range.commonAncestorContainer.parentNode;\n                if (range.collapsed && dom.name(rangeEnd) == 'tbody') {\n                    range.setStartAfter($(rangeEnd).closest('table')[0]);\n                    range.collapse(true);\n                }\n                var focusedTable = $(range.commonAncestorContainer.parentNode).closest('table');\n                if (focusedTable.get(0)) {\n                    var siblingNodes = focusedTable.parent().contents();\n                    var lastSiblingIndex = siblingNodes.length - 1;\n                    var lastSibling = siblingNodes.get(lastSiblingIndex);\n                    while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === ' ' || lastSibling.nodeValue === '')) {\n                        lastSiblingIndex -= 1;\n                        lastSibling = siblingNodes.get(lastSiblingIndex);\n                    }\n                    if (lastSibling === focusedTable.get(0)) {\n                        dom.insertAfter(dom.createEmptyNode(editor.document, 'p'), focusedTable[0]);\n                    }\n                }\n                editor.selectRange(range);\n            }\n        });\n        var Cleaner = Class.extend({\n            init: function (options) {\n                this.options = options || {};\n                this.replacements = [];\n            },\n            clean: function (html, customReplacements) {\n                var that = this, replacements = customReplacements || that.replacements, i, l;\n                for (i = 0, l = replacements.length; i < l; i += 2) {\n                    html = html.replace(replacements[i], replacements[i + 1]);\n                }\n                return html;\n            }\n        });\n        var ScriptCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.replacements = [\n                    /<(\\/?)script([^>]*)>/i,\n                    '<$1telerik:script$2>'\n                ];\n            },\n            applicable: function (html) {\n                return !this.options.none && /<script[^>]*>/i.test(html);\n            }\n        });\n        var TabCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                var replacement = ' ';\n                this.replacements = [\n                    /<span\\s+class=\"Apple-tab-span\"[^>]*>\\s*<\\/span>/gi,\n                    replacement,\n                    /\\t/gi,\n                    replacement,\n                    /&nbsp;&nbsp; &nbsp;/gi,\n                    replacement\n                ];\n            },\n            applicable: function (html) {\n                return /&nbsp;&nbsp; &nbsp;|class=\"?Apple-tab-span/i.test(html);\n            }\n        });\n        var MSWordFormatCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.junkReplacements = [\n                    /<\\?xml[^>]*>/gi,\n                    '',\n                    /<!--(.|\\n)*?-->/g,\n                    '',\n                    /&quot;/g,\n                    '\\'',\n                    /<o:p>&nbsp;<\\/o:p>/gi,\n                    '&nbsp;',\n                    /<\\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\\n)*?<\\/(meta|link|style|o:|v:|x:)[^>]*>)?/gi,\n                    '',\n                    /<\\/o>/g,\n                    ''\n                ];\n                this.replacements = this.junkReplacements.concat([\n                    /(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*/g,\n                    '$1',\n                    /<br><br>/g,\n                    '<BR><BR>',\n                    /<br>(?!\\n)/g,\n                    ' ',\n                    /<table([^>]*)>(\\s|&nbsp;)+<t/gi,\n                    '<table$1><t',\n                    /<tr[^>]*>(\\s|&nbsp;)*<\\/tr>/gi,\n                    '',\n                    /<tbody[^>]*>(\\s|&nbsp;)*<\\/tbody>/gi,\n                    '',\n                    /<table[^>]*>(\\s|&nbsp;)*<\\/table>/gi,\n                    '',\n                    /<BR><BR>/g,\n                    '<br>',\n                    /^\\s*(&nbsp;)+/gi,\n                    '',\n                    /(&nbsp;|<br[^>]*>)+\\s*$/gi,\n                    '',\n                    /mso-[^;\"]*;?/gi,\n                    '',\n                    /<(\\/?)b(\\s[^>]*)?>/gi,\n                    '<$1strong$2>',\n                    /<(\\/?)font(\\s[^>]*)?>/gi,\n                    this.convertFontMatch,\n                    /<(\\/?)i(\\s[^>]*)?>/gi,\n                    '<$1em$2>',\n                    /style=([\"|'])\\s*\\1/g,\n                    '',\n                    /(<br[^>]*>)?\\n/g,\n                    function ($0, $1) {\n                        return $1 ? $0 : ' ';\n                    }\n                ]);\n            },\n            convertFontMatch: function (match, closing, args) {\n                var faceRe = /face=['\"]([^'\"]+)['\"]/i;\n                var face = faceRe.exec(args);\n                var family = args && face && face[1];\n                if (closing) {\n                    return '</span>';\n                } else if (family) {\n                    return '<span style=\"font-family:' + family + '\">';\n                } else {\n                    return '<span>';\n                }\n            },\n            applicable: function (html) {\n                return /class=\"?Mso/i.test(html) || /style=\"[^\"]*mso-/i.test(html) || /urn:schemas-microsoft-com:office/.test(html);\n            },\n            stripEmptyAnchors: function (html) {\n                return html.replace(/<a([^>]*)>\\s*<\\/a>/gi, function (a, attributes) {\n                    if (!attributes || attributes.indexOf('href') < 0) {\n                        return '';\n                    }\n                    return a;\n                });\n            },\n            listType: function (p, listData) {\n                var html = p.innerHTML;\n                var text = dom.innerText(p);\n                var startingSymbol;\n                var matchSymbol = html.match(/^(?:<span [^>]*texhtml[^>]*>)?<span [^>]*(?:Symbol|Wingdings)[^>]*>([^<]+)/i);\n                var symbol = matchSymbol && matchSymbol[1];\n                var isNumber = /^[a-z\\d]/i.test(symbol);\n                var trimStartText = function (text) {\n                    return text.replace(/^(?:&nbsp;|[\\u00a0\\n\\r\\s])+/, '');\n                };\n                if (matchSymbol) {\n                    startingSymbol = true;\n                }\n                html = html.replace(/<\\/?\\w+[^>]*>/g, '').replace(/&nbsp;/g, '\\xA0');\n                if (!startingSymbol && /^[\\u2022\\u00b7\\u00a7\\u00d8o]\\u00a0+/.test(html) || startingSymbol && /^.\\u00a0+/.test(html) || symbol && !isNumber && listData) {\n                    return {\n                        tag: 'ul',\n                        style: this._guessUnorderedListStyle(trimStartText(text))\n                    };\n                }\n                if (/^\\s*\\w+[\\.\\)][\\u00a0 ]{2,}/.test(html)) {\n                    return {\n                        tag: 'ol',\n                        style: this._guessOrderedListStyle(trimStartText(text))\n                    };\n                }\n            },\n            _convertToLi: function (p) {\n                var content, name = dom.name(p);\n                if (p.childNodes.length == 1) {\n                    content = p.firstChild.nodeType === dom.nodeTypes.TEXT_NODE ? dom.innerText(p) : p.firstChild.innerHTML.replace(/^\\w+[\\.\\)](&nbsp;)+ /, '');\n                } else {\n                    dom.remove(p.firstChild);\n                    if (p.firstChild.nodeType == 3) {\n                        if (/^[ivxlcdm]+\\.$/i.test(p.firstChild.nodeValue)) {\n                            dom.remove(p.firstChild);\n                        }\n                    }\n                    if (/^(&nbsp;|\\s)+$/i.test(p.firstChild.innerHTML)) {\n                        dom.remove(p.firstChild);\n                    }\n                    if (name != 'p') {\n                        content = '<' + name + '>' + p.innerHTML + '</' + name + '>';\n                    } else {\n                        content = p.innerHTML;\n                    }\n                }\n                dom.remove(p);\n                return dom.create(document, 'li', { innerHTML: content });\n            },\n            _guessUnorderedListStyle: function (symbol) {\n                if (/^[\\u2022\\u00b7\\u00FC\\u00D8\\u002dv-]/.test(symbol)) {\n                    return null;\n                } else if (/^o/.test(symbol)) {\n                    return 'circle';\n                } else {\n                    return 'square';\n                }\n            },\n            _guessOrderedListStyle: function (symbol) {\n                var listType = null;\n                if (!/^\\d/.test(symbol)) {\n                    listType = (/^[a-z]/.test(symbol) ? 'lower-' : 'upper-') + (/^[ivxlcdm]/i.test(symbol) ? 'roman' : 'alpha');\n                }\n                return listType;\n            },\n            extractListLevels: function (html) {\n                var msoListRegExp = /style=['\"]?[^'\"]*?mso-list:\\s?[a-zA-Z]+(\\d+)\\s[a-zA-Z]+(\\d+)\\s(\\w+)/gi;\n                html = html.replace(msoListRegExp, function (match, list, level) {\n                    return kendo.format('data-list=\"{0}\" data-level=\"{1}\" {2}', list, level, match);\n                });\n                return html;\n            },\n            _createList: function (type, styleType) {\n                return dom.create(document, type, { style: { listStyleType: styleType } });\n            },\n            lists: function (placeholder) {\n                var blockChildren = $(placeholder).find(dom.blockElements.join(',')), lastMargin = -1, name, levels = {}, li, rootMargin, rootIndex, lastRootLi, isLastRootLi, rootList, i, p, type, margin, list, listData, acceptedNameTags = [\n                        'p',\n                        'h1',\n                        'h2',\n                        'h3',\n                        'h4',\n                        'h5',\n                        'h6'\n                    ], isParentTable = false;\n                for (i = 0; i < blockChildren.length; i++) {\n                    p = blockChildren[i];\n                    listData = $(p).data();\n                    var listIndex = listData.list;\n                    name = dom.name(p);\n                    isParentTable = !!$(p).parents('table').length;\n                    if (isParentTable) {\n                        continue;\n                    }\n                    var listType = this.listType(p, listData);\n                    type = listType && listType.tag;\n                    if (!type || acceptedNameTags.indexOf(name) < 0) {\n                        if (!p.innerHTML) {\n                            dom.remove(p);\n                        } else if (li && !isLastRootLi) {\n                            li.appendChild(p);\n                        }\n                        continue;\n                    }\n                    if (browser.msie) {\n                        continue;\n                    }\n                    margin = listData.level || parseFloat(p.style.marginLeft || 0);\n                    var levelType = type + listIndex;\n                    if (!levels[margin]) {\n                        levels[margin] = {};\n                    }\n                    if (!rootMargin || rootMargin < 0) {\n                        rootMargin = margin;\n                        rootIndex = listIndex;\n                        lastRootLi = $(placeholder).find('[data-list=\\'' + rootIndex + '\\']:last')[0];\n                        rootList = this._createList(type, listType.style);\n                        dom.insertBefore(rootList, p);\n                        lastMargin = margin;\n                        levels[margin][levelType] = rootList;\n                    }\n                    isLastRootLi = lastRootLi === p;\n                    list = levels[margin][levelType];\n                    if (margin > lastMargin || !list) {\n                        list = this._createList(type, listType.style);\n                        levels[margin][levelType] = list;\n                        li.appendChild(list);\n                    }\n                    li = this._convertToLi(p);\n                    list.appendChild(li);\n                    if (isLastRootLi) {\n                        rootMargin = lastMargin = -1;\n                    } else {\n                        lastMargin = margin;\n                    }\n                }\n            },\n            removeAttributes: function (element) {\n                var attributes = element.attributes, i = attributes.length;\n                while (i--) {\n                    if (dom.name(attributes[i]) != 'colspan') {\n                        element.removeAttributeNode(attributes[i]);\n                    }\n                }\n            },\n            createColGroup: function (row) {\n                var cells = row.cells;\n                var table = $(row).closest('table');\n                var colgroup = table.children('colgroup');\n                if (cells.length < 2) {\n                    return;\n                } else if (colgroup.length) {\n                    cells = colgroup.children();\n                    colgroup[0].parentNode.removeChild(colgroup[0]);\n                }\n                colgroup = $($.map(cells, function (cell) {\n                    var width = cell.width;\n                    if (width && parseInt(width, 10) !== 0) {\n                        return kendo.format('<col style=\"width:{0}px;\"/>', width);\n                    }\n                    return '<col />';\n                }).join(''));\n                if (!colgroup.is('colgroup')) {\n                    colgroup = $('<colgroup/>').append(colgroup);\n                }\n                colgroup.prependTo(table);\n            },\n            convertHeaders: function (row) {\n                var cells = row.cells, i, boldedCells = $.map(cells, function (cell) {\n                        var child = $(cell).children('p').children('strong')[0];\n                        if (child && dom.name(child) == 'strong') {\n                            return child;\n                        }\n                    });\n                if (boldedCells.length == cells.length) {\n                    for (i = 0; i < boldedCells.length; i++) {\n                        dom.unwrap(boldedCells[i]);\n                    }\n                    $(row).closest('table').find('colgroup').after('<thead></thead>').end().find('thead').append(row);\n                    for (i = 0; i < cells.length; i++) {\n                        dom.changeTag(cells[i], 'th');\n                    }\n                }\n            },\n            removeParagraphs: function (cells) {\n                var i, j, len, cell, paragraphs;\n                for (i = 0; i < cells.length; i++) {\n                    this.removeAttributes(cells[i]);\n                    cell = $(cells[i]);\n                    paragraphs = cell.children('p');\n                    for (j = 0, len = paragraphs.length; j < len; j++) {\n                        if (j < len - 1) {\n                            dom.insertAfter(dom.create(document, 'br'), paragraphs[j]);\n                        }\n                        dom.unwrap(paragraphs[j]);\n                    }\n                }\n            },\n            removeDefaultColors: function (spans) {\n                for (var i = 0; i < spans.length; i++) {\n                    if (/^\\s*color:\\s*[^;]*;?$/i.test(spans[i].style.cssText)) {\n                        dom.unwrap(spans[i]);\n                    }\n                }\n            },\n            tables: function (placeholder) {\n                var tables = $(placeholder).find('table'), that = this, rows, firstRow, longestRow, i, j;\n                for (i = 0; i < tables.length; i++) {\n                    rows = tables[i].rows;\n                    longestRow = firstRow = rows[0];\n                    for (j = 1; j < rows.length; j++) {\n                        if (rows[j].cells.length > longestRow.cells.length) {\n                            longestRow = rows[j];\n                        }\n                    }\n                    that.createColGroup(longestRow);\n                    that.convertHeaders(firstRow);\n                    that.removeAttributes(tables[i]);\n                    that.removeParagraphs(tables.eq(i).find('td,th'));\n                    that.removeDefaultColors(tables.eq(i).find('span'));\n                }\n            },\n            headers: function (placeholder) {\n                var titles = $(placeholder).find('p.MsoTitle');\n                for (var i = 0; i < titles.length; i++) {\n                    dom.changeTag(titles[i], 'h1');\n                }\n            },\n            removeFormatting: function (placeholder) {\n                $(placeholder).find('*').each(function () {\n                    $(this).css({\n                        fontSize: '',\n                        fontFamily: ''\n                    });\n                    if (!this.getAttribute('style') && !this.style.cssText) {\n                        this.removeAttribute('style');\n                    }\n                });\n            },\n            clean: function (html) {\n                var that = this, placeholder;\n                var filters = this.options;\n                if (filters.none) {\n                    html = Cleaner.fn.clean.call(that, html, this.junkReplacements);\n                    html = that.stripEmptyAnchors(html);\n                } else {\n                    html = filters.msConvertLists ? this.extractListLevels(html) : html;\n                    html = Cleaner.fn.clean.call(that, html);\n                    html = that.stripEmptyAnchors(html);\n                    placeholder = dom.create(document, 'div', { innerHTML: html });\n                    that.headers(placeholder);\n                    if (filters.msConvertLists) {\n                        that.lists(placeholder);\n                    }\n                    that.tables(placeholder);\n                    if (filters.msAllFormatting) {\n                        that.removeFormatting(placeholder);\n                    }\n                    html = placeholder.innerHTML.replace(/(<[^>]*)\\s+class=\"?[^\"\\s>]*\"?/gi, '$1');\n                }\n                return html;\n            }\n        });\n        var WebkitFormatCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.replacements = [\n                    /\\s+class=\"Apple-style-span[^\"]*\"/gi,\n                    '',\n                    /<(div|p|h[1-6])\\s+style=\"[^\"]*\"/gi,\n                    '<$1',\n                    /^<div>(.*)<\\/div>$/,\n                    '$1'\n                ];\n            },\n            applicable: function (html) {\n                return /class=\"?Apple-style-span|style=\"[^\"]*-webkit-nbsp-mode/i.test(html);\n            }\n        });\n        var DomCleaner = Cleaner.extend({\n            clean: function (html) {\n                var container = dom.create(document, 'div', { innerHTML: html });\n                container = this.cleanDom(container);\n                return container.innerHTML;\n            },\n            cleanDom: function (container) {\n                return container;\n            }\n        });\n        var HtmlTagsCleaner = DomCleaner.extend({\n            cleanDom: function (container) {\n                var tags = this.collectTags();\n                $(container).find(tags).each(function () {\n                    dom.unwrap(this);\n                });\n                return container;\n            },\n            collectTags: function () {\n                if (this.options.span) {\n                    return 'span';\n                }\n            },\n            applicable: function () {\n                return this.options.span;\n            }\n        });\n        var HtmlAttrCleaner = DomCleaner.extend({\n            cleanDom: function (container) {\n                var attributes = this.collectAttr();\n                var nodes = $(container).find('[' + attributes.join('],[') + ']');\n                nodes.removeAttr(attributes.join(' '));\n                return container;\n            },\n            collectAttr: function () {\n                if (this.options.css) {\n                    return [\n                        'class',\n                        'style'\n                    ];\n                }\n                return [];\n            },\n            applicable: function () {\n                return this.options.css;\n            }\n        });\n        var TextContainer = function () {\n            this.text = '';\n            this.add = function (text) {\n                this.text += text;\n            };\n        };\n        var HtmlTextLines = Class.extend({\n            init: function (separators) {\n                this.separators = separators || {\n                    text: ' ',\n                    line: '<br/>'\n                };\n                this.lines = [];\n                this.inlineBlockText = [];\n                this.resetLine();\n            },\n            appendText: function (text) {\n                if (text.nodeType === 3) {\n                    text = text.nodeValue;\n                }\n                this.textContainer.add(text);\n            },\n            appendInlineBlockText: function (text) {\n                this.inlineBlockText.push(text);\n            },\n            flashInlineBlockText: function () {\n                if (this.inlineBlockText.length) {\n                    this.appendText(this.inlineBlockText.join(' '));\n                    this.inlineBlockText = [];\n                }\n            },\n            endLine: function () {\n                this.flashInlineBlockText();\n                this.resetLine();\n            },\n            html: function () {\n                var separators = this.separators;\n                var result = '';\n                var lines = this.lines;\n                this.flashInlineBlockText();\n                for (var i = 0, il = lines.length, il1 = il - 1; i < il; i++) {\n                    var line = lines[i];\n                    for (var j = 0, jl = line.length, jl1 = jl - 1; j < jl; j++) {\n                        var text = line[j].text;\n                        result += text;\n                        if (j !== jl1) {\n                            result += separators.text;\n                        }\n                    }\n                    if (i !== il1) {\n                        result += separators.line;\n                    }\n                }\n                return result;\n            },\n            resetLine: function () {\n                this.textContainer = new TextContainer();\n                this.line = [];\n                this.line.push(this.textContainer);\n                this.lines.push(this.line);\n            }\n        });\n        var DomEnumerator = Class.extend({\n            init: function (callback) {\n                this.callback = callback;\n            },\n            enumerate: function (node) {\n                if (!node) {\n                    return;\n                }\n                var preventDown = this.callback(node);\n                var child = node.firstChild;\n                if (!preventDown && child) {\n                    this.enumerate(child);\n                }\n                this.enumerate(node.nextSibling);\n            }\n        });\n        var HtmlContentCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.hasText = false;\n                this.enumerator = new DomEnumerator($.proxy(this.buildText, this));\n            },\n            clean: function (html) {\n                var container = dom.create(document, 'div', { innerHTML: html });\n                return this.cleanDom(container);\n            },\n            cleanDom: function (container) {\n                this.separators = this.getDefaultSeparators();\n                this.htmlLines = new HtmlTextLines(this.separators);\n                this.enumerator.enumerate(container.firstChild);\n                this.hasText = false;\n                return this.htmlLines.html();\n            },\n            buildText: function (node) {\n                if (dom.isDataNode(node)) {\n                    if (dom.isEmptyspace(node)) {\n                        return;\n                    }\n                    this.htmlLines.appendText(node.nodeValue.replace('\\n', this.separators.line));\n                    this.hasText = true;\n                } else if (dom.isBlock(node) && this.hasText) {\n                    var action = this.actions[dom.name(node)] || this.actions.block;\n                    return action(this, node);\n                } else if (dom.isBr(node)) {\n                    this.htmlLines.appendText(this.separators.line);\n                }\n            },\n            applicable: function () {\n                var o = this.options;\n                return o.all || o.keepNewLines;\n            },\n            getDefaultSeparators: function () {\n                if (this.options.all) {\n                    return {\n                        text: ' ',\n                        line: ' '\n                    };\n                } else {\n                    return {\n                        text: ' ',\n                        line: '<br/>'\n                    };\n                }\n            },\n            actions: {\n                ul: $.noop,\n                ol: $.noop,\n                table: $.noop,\n                thead: $.noop,\n                tbody: $.noop,\n                td: function (cleaner, node) {\n                    var tdCleaner = new HtmlContentCleaner({ all: true });\n                    var cellText = tdCleaner.cleanDom(node);\n                    cleaner.htmlLines.appendInlineBlockText(cellText);\n                    return true;\n                },\n                block: function (cleaner) {\n                    cleaner.htmlLines.endLine();\n                }\n            }\n        });\n        var CustomCleaner = Cleaner.extend({\n            clean: function (html) {\n                return this.options.custom(html);\n            },\n            applicable: function () {\n                return typeof this.options.custom === 'function';\n            }\n        });\n        extend(editorNS, {\n            Clipboard: Clipboard,\n            Cleaner: Cleaner,\n            ScriptCleaner: ScriptCleaner,\n            TabCleaner: TabCleaner,\n            MSWordFormatCleaner: MSWordFormatCleaner,\n            WebkitFormatCleaner: WebkitFormatCleaner,\n            HtmlTagsCleaner: HtmlTagsCleaner,\n            HtmlAttrCleaner: HtmlAttrCleaner,\n            HtmlContentCleaner: HtmlContentCleaner,\n            HtmlTextLines: HtmlTextLines,\n            CustomCleaner: CustomCleaner\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/keyboard', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, editorNS = kendo.ui.editor, RangeUtils = editorNS.RangeUtils, dom = editorNS.Dom, RestorePoint = editorNS.RestorePoint, Marker = editorNS.Marker, browser = kendo.support.browser, br = '<br class=\"k-br\">', extend = $.extend;\n        var nodeTypes = dom.nodeTypes;\n        var PREVIOUS_SIBLING = 'previousSibling';\n        function selected(node, range) {\n            return range.startContainer === node && range.endContainer === node && range.startOffset === 0 && range.endOffset == node.childNodes.length;\n        }\n        function getSibling(node, direction, condition) {\n            var sibling = node ? node[direction] : null;\n            while (sibling && !condition(sibling)) {\n                sibling = sibling[direction];\n            }\n            return sibling;\n        }\n        var tableCells = 'td,th,caption';\n        var tableCellsWrappers = 'table,tbody,thead,tfoot,tr';\n        var tableElements = tableCellsWrappers + ',' + tableCells;\n        var inTable = function (range) {\n            return !range.collapsed && $(range.commonAncestorContainer).is(tableCellsWrappers);\n        };\n        var RemoveTableContent = Class.extend({\n            remove: function (range) {\n                var that = this;\n                var marker = new Marker();\n                marker.add(range, false);\n                var nodes = RangeUtils.getAll(range, function (node) {\n                    return $(node).is(tableElements);\n                });\n                var doc = RangeUtils.documentFromRange(range);\n                var start = marker.start;\n                var end = marker.end;\n                var cellsTypes = tableCells.split(',');\n                var startCell = dom.parentOfType(start, cellsTypes);\n                var endCell = dom.parentOfType(end, cellsTypes);\n                that._removeContent(start, startCell, true);\n                that._removeContent(end, endCell, false);\n                $(nodes).each(function (i, node) {\n                    node = $(node);\n                    (node.is(tableCells) ? node : node.find(tableCells)).each(function (j, cell) {\n                        cell.innerHTML = '&#65279;';\n                    });\n                });\n                if (startCell && !start.previousSibling) {\n                    dom.insertBefore(doc.createTextNode('\\uFEFF'), start);\n                }\n                if (endCell && !end.nextSibling) {\n                    dom.insertAfter(doc.createTextNode('\\uFEFF'), end);\n                }\n                if (startCell) {\n                    range.setStartBefore(start);\n                } else if (nodes[0]) {\n                    startCell = $(nodes[0]);\n                    startCell = startCell.is(tableCells) ? startCell : startCell.find(tableCells).first();\n                    if (startCell.length) {\n                        range.setStart(startCell.get(0), 0);\n                    }\n                }\n                range.collapse(true);\n                dom.remove(start);\n                dom.remove(end);\n            },\n            _removeContent: function (start, top, forwards) {\n                if (top) {\n                    var sibling = forwards ? 'nextSibling' : 'previousSibling', next, getNext = function (node) {\n                            while (node && !node[sibling]) {\n                                node = node.parentNode;\n                            }\n                            return node && $.contains(top, node) ? node[sibling] : null;\n                        };\n                    start = getNext(start);\n                    while (start) {\n                        next = getNext(start);\n                        dom.remove(start);\n                        start = next;\n                    }\n                }\n            }\n        });\n        var TypingHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            keydown: function (e) {\n                var that = this, editor = that.editor, keyboard = editor.keyboard, isTypingKey = keyboard.isTypingKey(e), evt = extend($.Event(), e);\n                that.editor.trigger('keydown', evt);\n                if (evt.isDefaultPrevented()) {\n                    e.preventDefault();\n                    return true;\n                }\n                if (!evt.isDefaultPrevented() && isTypingKey && !keyboard.isTypingInProgress()) {\n                    var range = editor.getRange();\n                    var body = editor.body;\n                    that.startRestorePoint = new RestorePoint(range, body);\n                    if (inTable(range)) {\n                        var removeTableContent = new RemoveTableContent(editor);\n                        removeTableContent.remove(range);\n                        editor.selectRange(range);\n                    }\n                    if (browser.webkit && !range.collapsed && selected(body, range)) {\n                        body.innerHTML = '';\n                    }\n                    if (editor.immutables && editorNS.Immutables.immutablesContext(range)) {\n                        var backspaceHandler = new editorNS.BackspaceHandler(editor);\n                        backspaceHandler.deleteSelection(range);\n                    }\n                    keyboard.startTyping(function () {\n                        that.endRestorePoint = editorNS._finishUpdate(editor, that.startRestorePoint);\n                    });\n                    return true;\n                }\n                return false;\n            },\n            keyup: function (e) {\n                var keyboard = this.editor.keyboard;\n                this.editor.trigger('keyup', e);\n                if (keyboard.isTypingInProgress()) {\n                    keyboard.endTyping();\n                    return true;\n                }\n                return false;\n            }\n        });\n        var BackspaceHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            _addCaret: function (container) {\n                var caret = dom.create(this.editor.document, 'a');\n                if (!kendo.support.browser.chrome && container.firstChild && container.firstChild.nodeType === nodeTypes.ELEMENT_NODE) {\n                    container = container.firstChild;\n                }\n                dom.insertAt(container, caret, 0);\n                dom.stripBomNode(caret.previousSibling);\n                dom.stripBomNode(caret.nextSibling);\n                return caret;\n            },\n            _restoreCaret: function (caret) {\n                var range = this.editor.createRange();\n                if (!caret.nextSibling && dom.isDataNode(caret.previousSibling)) {\n                    range.setStart(caret.previousSibling, caret.previousSibling.length);\n                } else {\n                    range.setStartAfter(caret);\n                }\n                range.collapse(true);\n                this.editor.selectRange(range);\n                dom.remove(caret);\n            },\n            _handleDelete: function (range) {\n                var node = range.endContainer;\n                var block = dom.closestEditableOfType(node, dom.blockElements);\n                if (block && editorNS.RangeUtils.isEndOf(range, block)) {\n                    var next = dom.next(block);\n                    if (!next || dom.name(next) != 'p') {\n                        return false;\n                    }\n                    var caret = this._addCaret(next);\n                    this._merge(block, next);\n                    this._restoreCaret(caret);\n                    return true;\n                }\n                return false;\n            },\n            _cleanBomBefore: function (range) {\n                var offset = range.startOffset;\n                var node = range.startContainer;\n                var text = node.nodeValue;\n                var count = 0;\n                while (offset - count >= 0 && text[offset - count - 1] == '\\uFEFF') {\n                    count++;\n                }\n                if (count > 0) {\n                    node.deleteData(offset - count, count);\n                    range.setStart(node, Math.max(0, offset - count));\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n            },\n            _handleBackspace: function (range) {\n                var node = range.startContainer;\n                var li = dom.closestEditableOfType(node, ['li']);\n                var block = dom.closestEditableOfType(node, 'p,h1,h2,h3,h4,h5,h6'.split(','));\n                var editor = this.editor;\n                var previousSibling;\n                if (dom.isDataNode(node)) {\n                    if (range.collapsed && /^\\s[\\ufeff]+$/.test(node.nodeValue)) {\n                        range.setStart(node, 0);\n                        range.setEnd(node, node.length);\n                        editor.selectRange(range);\n                        return false;\n                    }\n                    this._cleanBomBefore(range);\n                }\n                previousSibling = getSibling(block, PREVIOUS_SIBLING, function (sibling) {\n                    return !dom.htmlIndentSpace(sibling);\n                });\n                if (range.collapsed && range.startOffset !== range.endOffset && range.startOffset < 0) {\n                    range.startOffset = 0;\n                    range.endOffset = 0;\n                    editor.selectRange(range);\n                }\n                var startAtLi = li && editorNS.RangeUtils.isStartOf(range, li);\n                var liIndex = li && $(li).index();\n                var startAtNonFirstLi = startAtLi && liIndex > 0;\n                if (startAtNonFirstLi) {\n                    block = li;\n                    previousSibling = dom.prev(li);\n                }\n                if (block && previousSibling && dom.is(previousSibling, 'table') && editorNS.RangeUtils.isStartOf(range, block)) {\n                    if (block.innerText === '') {\n                        block.innerHTML = '\\uFEFF';\n                    }\n                    return true;\n                }\n                if (editorNS.RangeUtils.isStartOf(range, block) && (parseInt(block.style.marginLeft, 10) > 0 || parseInt(block.style.marginRight, 10) > 0)) {\n                    editor.exec('outdent');\n                    return true;\n                }\n                if (block && previousSibling && editorNS.RangeUtils.isStartOf(range, block) || startAtNonFirstLi) {\n                    var caret = this._addCaret(block);\n                    this._merge(previousSibling, block);\n                    this._restoreCaret(caret);\n                    return true;\n                }\n                if (startAtLi && liIndex === 0) {\n                    var child = li.firstChild;\n                    if (!child) {\n                        li.innerHTML = editorNS.emptyElementContent;\n                        child = li.firstChild;\n                    }\n                    var formatter = new editorNS.ListFormatter(dom.name(li.parentNode), 'p');\n                    range.selectNodeContents(li);\n                    formatter.toggle(range);\n                    if (dom.insignificant(child)) {\n                        range.setStartBefore(child);\n                    } else {\n                        range.setStart(child, 0);\n                    }\n                    editor.selectRange(range);\n                    return true;\n                }\n                var rangeStartNode = node.childNodes[range.startOffset - 1];\n                var linkRange = range;\n                var anchor = rangeStartNode && dom.closestEditableOfType(rangeStartNode, ['a']);\n                var previousNode = getSibling(rangeStartNode || node, PREVIOUS_SIBLING, function (sibling) {\n                    return !dom.isDataNode(sibling) || !dom.isBom(sibling) && sibling.length > 0;\n                });\n                if (anchor || (range.startOffset === 0 || rangeStartNode) && dom.is(previousNode, 'a')) {\n                    anchor = anchor || previousNode;\n                    linkRange = editor.createRange();\n                    linkRange.setStart(anchor, anchor.childNodes.length);\n                    linkRange.collapse(true);\n                }\n                anchor = anchor || dom.closestEditableOfType(rangeStartNode || linkRange.startContainer, ['a']);\n                var isEndOfLink = anchor && editorNS.RangeUtils.isEndOf(linkRange, anchor);\n                if (isEndOfLink) {\n                    var command = new editorNS.UnlinkCommand({\n                        range: linkRange,\n                        body: editor.body,\n                        immutables: !!editor.immutables\n                    });\n                    editor.execCommand(command);\n                    editor._selectionChange();\n                }\n                return false;\n            },\n            _handleSelection: function (range) {\n                var ancestor = range.commonAncestorContainer;\n                var table = dom.closest(ancestor, 'table');\n                var emptyParagraphContent = editorNS.emptyElementContent;\n                var editor = this.editor;\n                if (inTable(range)) {\n                    var removeTableContent = new RemoveTableContent(editor);\n                    removeTableContent.remove(range);\n                    editor.selectRange(range);\n                    return true;\n                }\n                var marker = new Marker();\n                marker.add(range, false);\n                if (range.commonAncestorContainer === editor.body) {\n                    this._surroundFullyContent(marker, range);\n                }\n                if (editor.immutables) {\n                    this._handleImmutables(marker);\n                }\n                this._surroundFullySelectedAnchor(marker, range);\n                range.setStartAfter(marker.start);\n                range.setEndBefore(marker.end);\n                var start = range.startContainer;\n                var end = range.endContainer;\n                range.deleteContents();\n                if (end.tagName.toLocaleLowerCase() === 'li' && dom.emptyNode(end)) {\n                    range.selectNode(end);\n                    range.deleteContents();\n                }\n                if (table && $(table).text() === '') {\n                    range.selectNode(table);\n                    range.deleteContents();\n                }\n                ancestor = range.commonAncestorContainer;\n                if (dom.name(ancestor) === 'p' && ancestor.innerHTML === '') {\n                    ancestor.innerHTML = emptyParagraphContent;\n                    range.setStart(ancestor, 0);\n                }\n                this._join(start, end);\n                dom.insertAfter(editor.document.createTextNode('\\uFEFF'), marker.start);\n                marker.remove(range);\n                start = range.startContainer;\n                if (dom.name(start) == 'tr') {\n                    start = start.childNodes[Math.max(0, range.startOffset - 1)];\n                    range.setStart(start, dom.getNodeLength(start));\n                }\n                range.collapse(true);\n                editor.selectRange(range);\n                return true;\n            },\n            _handleImmutables: function (marker) {\n                var immutableParent = editorNS.Immutables.immutableParent;\n                var startImmutable = immutableParent(marker.start);\n                var endImmutable = immutableParent(marker.start);\n                if (startImmutable) {\n                    dom.insertBefore(marker.start, startImmutable);\n                }\n                if (endImmutable) {\n                    dom.insertAfter(marker.end, endImmutable);\n                }\n                if (startImmutable) {\n                    dom.remove(startImmutable);\n                }\n                if (endImmutable && endImmutable.parentNode) {\n                    dom.remove(endImmutable);\n                }\n            },\n            _surroundFullyContent: function (marker, range) {\n                var children = range.commonAncestorContainer.children, startParent = children[0], endParent = children[children.length - 1];\n                this._moveMarker(marker, range, startParent, endParent);\n            },\n            _surroundFullySelectedAnchor: function (marker, range) {\n                var start = marker.start, startParent = $(start).closest('a').get(0), end = marker.end, endParent = $(end).closest('a').get(0);\n                this._moveMarker(marker, range, startParent, endParent);\n            },\n            _moveMarker: function (marker, range, startParent, endParent) {\n                var start = marker.start, end = marker.end;\n                if (startParent && RangeUtils.isStartOf(range, startParent)) {\n                    dom.insertBefore(start, startParent);\n                }\n                if (endParent && RangeUtils.isEndOf(range, endParent)) {\n                    dom.insertAfter(end, endParent);\n                }\n            },\n            _root: function (node) {\n                while (node && dom.name(node) != 'body' && node.parentNode && dom.name(node.parentNode) != 'body') {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            _join: function (start, end) {\n                start = this._root(start);\n                end = this._root(end);\n                if (start != end && dom.is(end, 'p')) {\n                    this._merge(start, end);\n                }\n            },\n            _merge: function (dest, src) {\n                dom.removeTrailingBreak(dest);\n                while (dest && src.firstChild) {\n                    if (dest.nodeType == 1) {\n                        dest = dom.list(dest) ? dest.children[dest.children.length - 1] : dest;\n                        if (dest) {\n                            dest.appendChild(src.firstChild);\n                        }\n                    } else if (dest.nodeType === nodeTypes.TEXT_NODE) {\n                        this._mergeWithTextNode(dest, src.firstChild);\n                    } else {\n                        dest.parentNode.appendChild(src.firstChild);\n                    }\n                }\n                dom.remove(src);\n            },\n            _mergeWithTextNode: function (textNode, appendedNode) {\n                if (textNode && textNode.nodeType === nodeTypes.TEXT_NODE) {\n                    if (textNode.nextSibling && this._isCaret(textNode.nextSibling)) {\n                        dom.insertAfter(appendedNode, textNode.nextSibling);\n                    } else {\n                        dom.insertAfter(appendedNode, textNode);\n                    }\n                }\n            },\n            _isCaret: function (element) {\n                return $(element).is('a');\n            },\n            keydown: function (e) {\n                var method, startRestorePoint;\n                var editor = this.editor;\n                var range = editor.getRange();\n                var keyCode = e.keyCode;\n                var keys = kendo.keys;\n                var backspace = keyCode === keys.BACKSPACE;\n                var del = keyCode == keys.DELETE;\n                if (editor.immutables && editor.immutables.keydown(e, range)) {\n                    return;\n                }\n                if ((backspace || del) && !range.collapsed) {\n                    method = '_handleSelection';\n                } else if (backspace) {\n                    method = '_handleBackspace';\n                } else if (del) {\n                    method = '_handleDelete';\n                }\n                if (!method) {\n                    return;\n                }\n                startRestorePoint = new RestorePoint(range, editor.body);\n                if (this[method](range)) {\n                    e.preventDefault();\n                    editorNS._finishUpdate(editor, startRestorePoint);\n                }\n            },\n            deleteSelection: function (range) {\n                this._handleSelection(range);\n            },\n            keyup: $.noop\n        });\n        var SystemHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                this.systemCommandIsInProgress = false;\n            },\n            createUndoCommand: function () {\n                this.startRestorePoint = this.endRestorePoint = editorNS._finishUpdate(this.editor, this.startRestorePoint);\n            },\n            changed: function () {\n                if (this.startRestorePoint) {\n                    return this.startRestorePoint.html != this.editor.body.innerHTML;\n                }\n                return false;\n            },\n            keydown: function (e) {\n                var that = this, editor = that.editor, keyboard = editor.keyboard;\n                if (keyboard.isModifierKey(e)) {\n                    if (keyboard.isTypingInProgress()) {\n                        keyboard.endTyping(true);\n                    }\n                    that.startRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n                    return true;\n                }\n                if (keyboard.isSystem(e)) {\n                    that.systemCommandIsInProgress = true;\n                    if (that.changed()) {\n                        that.systemCommandIsInProgress = false;\n                        that.createUndoCommand();\n                    }\n                    return true;\n                }\n                return false;\n            },\n            keyup: function () {\n                var that = this;\n                if (that.systemCommandIsInProgress && that.changed()) {\n                    that.systemCommandIsInProgress = false;\n                    that.createUndoCommand();\n                    return true;\n                }\n                return false;\n            }\n        });\n        var SelectAllHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            keydown: function (e) {\n                if (!browser.webkit || e.isDefaultPrevented() || !(e.ctrlKey && e.keyCode == 65 && !e.altKey && !e.shiftKey)) {\n                    return;\n                }\n                if (this.editor.options.immutables) {\n                    this._toSelectableImmutables();\n                }\n                this._selectEditorBody();\n            },\n            _selectEditorBody: function () {\n                var editor = this.editor;\n                var range = editor.getRange();\n                range.selectNodeContents(editor.body);\n                editor.selectRange(range);\n            },\n            _toSelectableImmutables: function () {\n                var editor = this.editor, body = editor.body, immutable = editorNS.Immutables.immutable, emptyTextNode = dom.emptyTextNode, first = body.firstChild, last = body.lastChild;\n                while (emptyTextNode(first)) {\n                    first = first.nextSibling;\n                }\n                while (emptyTextNode(last)) {\n                    last = last.previousSibling;\n                }\n                if (first && immutable(first)) {\n                    $(br).prependTo(body);\n                }\n                if (last && immutable(last)) {\n                    $(br).appendTo(body);\n                }\n            },\n            keyup: $.noop\n        });\n        var Keyboard = Class.extend({\n            init: function (handlers) {\n                this.handlers = handlers;\n                this.typingInProgress = false;\n            },\n            isCharacter: function (keyCode) {\n                return keyCode >= 48 && keyCode <= 90 || keyCode >= 96 && keyCode <= 111 || keyCode >= 186 && keyCode <= 192 || keyCode >= 219 && keyCode <= 222 || keyCode == 229;\n            },\n            toolFromShortcut: function (tools, e) {\n                var key = String.fromCharCode(e.keyCode), toolName, toolOptions, modifier = this._getShortcutModifier(e, navigator.platform);\n                for (toolName in tools) {\n                    toolOptions = $.extend({\n                        ctrl: false,\n                        alt: false,\n                        shift: false\n                    }, tools[toolName].options);\n                    if ((toolOptions.key == key || toolOptions.key == e.keyCode) && toolOptions.ctrl == modifier && toolOptions.alt == e.altKey && toolOptions.shift == e.shiftKey) {\n                        return toolName;\n                    }\n                }\n            },\n            _getShortcutModifier: function (e, platform) {\n                var mac = platform.toUpperCase().indexOf('MAC') >= 0;\n                return mac ? e.metaKey : e.ctrlKey;\n            },\n            toolsFromShortcut: function (tools, e) {\n                var key = String.fromCharCode(e.keyCode), toolName, o, matchesKey, found = [];\n                var matchKey = function (toolKey) {\n                    return toolKey == key || toolKey == e.keyCode || toolKey == e.charCode;\n                };\n                for (toolName in tools) {\n                    o = $.extend({\n                        ctrl: false,\n                        alt: false,\n                        shift: false\n                    }, tools[toolName].options);\n                    matchesKey = $.isArray(o.key) ? $.grep(o.key, matchKey).length > 0 : matchKey(o.key);\n                    if (matchesKey && o.ctrl == e.ctrlKey && o.alt == e.altKey && o.shift == e.shiftKey) {\n                        found.push(tools[toolName]);\n                    }\n                }\n                return found;\n            },\n            isTypingKey: function (e) {\n                var keyCode = e.keyCode;\n                return this.isCharacter(keyCode) && !e.ctrlKey && !e.altKey || keyCode == 32 || keyCode == 13 || keyCode == 8 || keyCode == 46 && !e.shiftKey && !e.ctrlKey && !e.altKey;\n            },\n            isModifierKey: function (e) {\n                var keyCode = e.keyCode;\n                return keyCode == 17 && !e.shiftKey && !e.altKey || keyCode == 16 && !e.ctrlKey && !e.altKey || keyCode == 18 && !e.ctrlKey && !e.shiftKey;\n            },\n            isSystem: function (e) {\n                return e.keyCode == 46 && e.ctrlKey && !e.altKey && !e.shiftKey;\n            },\n            startTyping: function (callback) {\n                this.onEndTyping = callback;\n                this.typingInProgress = true;\n            },\n            stopTyping: function () {\n                if (this.typingInProgress && this.onEndTyping) {\n                    this.onEndTyping();\n                }\n                this.typingInProgress = false;\n            },\n            endTyping: function (force) {\n                var that = this;\n                that.clearTimeout();\n                if (force) {\n                    that.stopTyping();\n                } else {\n                    that.timeout = window.setTimeout($.proxy(that.stopTyping, that), 1000);\n                }\n            },\n            isTypingInProgress: function () {\n                return this.typingInProgress;\n            },\n            clearTimeout: function () {\n                window.clearTimeout(this.timeout);\n            },\n            notify: function (e, what) {\n                var i, handlers = this.handlers;\n                for (i = 0; i < handlers.length; i++) {\n                    if (handlers[i][what](e)) {\n                        break;\n                    }\n                }\n            },\n            keydown: function (e) {\n                this.notify(e, 'keydown');\n            },\n            keyup: function (e) {\n                this.notify(e, 'keyup');\n            }\n        });\n        extend(editorNS, {\n            TypingHandler: TypingHandler,\n            SystemHandler: SystemHandler,\n            BackspaceHandler: BackspaceHandler,\n            SelectAllHandler: SelectAllHandler,\n            Keyboard: Keyboard\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/exportpdf', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, editorNS = kendo.ui.editor, Command = editorNS.Command, EditorUtils = editorNS.EditorUtils, registerTool = EditorUtils.registerTool, Tool = editorNS.Tool, ToolTemplate = editorNS.ToolTemplate, extend = $.extend;\n        var ExportPdfCommand = Command.extend({\n            init: function (options) {\n                this.async = true;\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var that = this;\n                var range = that.lockRange(true);\n                var editor = that.editor;\n                editor._destroyResizings();\n                editor.saveAsPDF().then(function () {\n                    that.releaseRange(range);\n                    editor._initializeColumnResizing();\n                    editor._initializeRowResizing();\n                    editor._initializeTableResizing();\n                });\n            }\n        });\n        extend(editorNS, { ExportPdfCommand: ExportPdfCommand });\n        registerTool('pdf', new Tool({\n            command: ExportPdfCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Export PDF'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/print', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, editorNS = kendo.ui.editor, Command = editorNS.Command, EditorUtils = editorNS.EditorUtils, registerTool = EditorUtils.registerTool, Tool = editorNS.Tool, ToolTemplate = editorNS.ToolTemplate, extend = $.extend;\n        var PrintCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.managesUndoRedo = true;\n            },\n            exec: function () {\n                var editor = this.editor;\n                if (kendo.support.browser.msie) {\n                    editor.document.execCommand('print', false, null);\n                } else if (editor.window.print) {\n                    editor.window.print();\n                }\n            }\n        });\n        extend(editorNS, { PrintCommand: PrintCommand });\n        registerTool('print', new Tool({\n            command: PrintCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Print'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/resizing-utils', ['editor/main'], f);\n}(function () {\n    (function (kendo, undefined) {\n        var global = window;\n        var math = global.Math;\n        var min = math.min;\n        var max = math.max;\n        var parseFloat = global.parseFloat;\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var Editor = kendo.ui.editor;\n        var PERCENTAGE = '%';\n        var PIXEL = 'px';\n        var REGEX_NUMBER_IN_PERCENTAGES = /(\\d+)(\\.?)(\\d*)%/;\n        var REGEX_NUMBER_IN_PIXELS = /(\\d+)(\\.?)(\\d*)px/;\n        var STRING = 'string';\n        function constrain(options) {\n            var value = options.value;\n            var lowerBound = options.min;\n            var upperBound = options.max;\n            return max(min(parseFloat(value), parseFloat(upperBound)), parseFloat(lowerBound));\n        }\n        function getScrollBarWidth(element) {\n            if (element && !$(element).is('body') && element.scrollHeight > element.clientHeight) {\n                return kendo.support.scrollbar();\n            }\n            return 0;\n        }\n        function calculatePercentageRatio(value, total) {\n            if (inPercentages(value)) {\n                return parseFloat(value);\n            } else {\n                return parseFloat(value) / total * 100;\n            }\n        }\n        function inPercentages(value) {\n            return typeof value === STRING && REGEX_NUMBER_IN_PERCENTAGES.test(value);\n        }\n        function inPixels(value) {\n            return typeof value === STRING && REGEX_NUMBER_IN_PIXELS.test(value);\n        }\n        function toPercentages(value) {\n            return parseFloat(value) + PERCENTAGE;\n        }\n        function toPixels(value) {\n            return parseFloat(value) + PIXEL;\n        }\n        var ResizingUtils = {\n            constrain: constrain,\n            getScrollBarWidth: getScrollBarWidth,\n            calculatePercentageRatio: calculatePercentageRatio,\n            inPercentages: inPercentages,\n            inPixels: inPixels,\n            toPercentages: toPercentages,\n            toPixels: toPixels\n        };\n        extend(Editor, { ResizingUtils: ResizingUtils });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/table-element-resizing', [\n        'editor/main',\n        'kendo.resizable',\n        'editor/resizing/resizing-utils'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var noop = $.noop;\n        var proxy = $.proxy;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var KEY_DOWN = 'keydown';\n        var MOUSE_DOWN = 'mousedown';\n        var MOUSE_ENTER = 'mouseenter';\n        var MOUSE_LEAVE = 'mouseleave';\n        var MOUSE_MOVE = 'mousemove';\n        var MOUSE_UP = 'mouseup';\n        var COMMA = ',';\n        var DOT = '.';\n        var LAST_CHILD = ':last-child';\n        var TABLE = 'table';\n        var TableElementResizing = Class.extend({\n            init: function (element, options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n                that.options.tags = $.isArray(that.options.tags) ? that.options.tags : [that.options.tags];\n                if ($(element).is(TABLE)) {\n                    that.element = element;\n                    that._attachEventHandlers();\n                }\n            },\n            destroy: function () {\n                var that = this;\n                var eventNamespace = that.options.eventNamespace;\n                if (that.element) {\n                    $(that.element).off(eventNamespace);\n                    that.element = null;\n                }\n                $(that.options.rootElement).off(KEY_DOWN + eventNamespace);\n                that._destroyResizeHandle();\n            },\n            options: {\n                tags: [],\n                min: 0,\n                rootElement: null,\n                eventNamespace: '',\n                rtl: false,\n                handle: {\n                    dataAttribute: '',\n                    height: 0,\n                    width: 0,\n                    classNames: {},\n                    template: ''\n                }\n            },\n            _attachEventHandlers: function () {\n                var that = this;\n                var options = that.options;\n                $(that.element).on(MOUSE_MOVE + options.eventNamespace, options.tags.join(COMMA), proxy(that.detectElementBorderHovering, that));\n            },\n            resizingInProgress: function () {\n                var that = this;\n                var resizable = that._resizable;\n                if (resizable) {\n                    return !!resizable.resizing;\n                }\n                return false;\n            },\n            resize: noop,\n            detectElementBorderHovering: function (e) {\n                var that = this;\n                var options = that.options;\n                var handleOptions = options.handle;\n                var tableElement = $(e.currentTarget);\n                var resizeHandle = that.resizeHandle;\n                var dataAttribute = handleOptions.dataAttribute;\n                if (!that.resizingInProgress()) {\n                    if (!tableElement.is(LAST_CHILD) && that.elementBorderHovered(tableElement, e)) {\n                        if (resizeHandle) {\n                            if (resizeHandle.data(dataAttribute) && resizeHandle.data(dataAttribute) !== tableElement[0]) {\n                                that.showResizeHandle(tableElement, e);\n                            }\n                        } else {\n                            that.showResizeHandle(tableElement, e);\n                        }\n                    } else {\n                        if (resizeHandle) {\n                            that._destroyResizeHandle();\n                        }\n                    }\n                }\n            },\n            elementBorderHovered: noop,\n            showResizeHandle: function (tableElement, e) {\n                var that = this;\n                if (e.buttons !== 0) {\n                    return;\n                }\n                that._initResizeHandle();\n                that.setResizeHandlePosition(tableElement);\n                that.setResizeHandleDimensions();\n                that.setResizeHandleDataAttributes(tableElement[0]);\n                that._attachResizeHandleEventHandlers();\n                that._initResizable(tableElement);\n                that._hideResizeMarker();\n                that.resizeHandle.show();\n            },\n            _initResizeHandle: function () {\n                var that = this;\n                var options = that.options;\n                that._destroyResizeHandle();\n                that.resizeHandle = $(options.handle.template).appendTo(options.rootElement);\n            },\n            setResizeHandlePosition: noop,\n            setResizeHandleDimensions: noop,\n            setResizeHandleDataAttributes: function (tableElement) {\n                var that = this;\n                that.resizeHandle.data(that.options.handle.dataAttribute, tableElement);\n            },\n            _attachResizeHandleEventHandlers: function () {\n                var that = this;\n                var options = that.options;\n                var eventNamespace = options.eventNamespace;\n                var markerClass = options.handle.classNames.marker;\n                var resizeHandle = that.resizeHandle;\n                that.resizeHandle.on(MOUSE_DOWN + eventNamespace, function () {\n                    resizeHandle.find(DOT + markerClass).show();\n                }).on(MOUSE_UP + eventNamespace, function () {\n                    resizeHandle.find(DOT + markerClass).hide();\n                });\n            },\n            _hideResizeMarker: function () {\n                var that = this;\n                that.resizeHandle.find(DOT + that.options.handle.classNames.marker).hide();\n            },\n            _destroyResizeHandle: function () {\n                var that = this;\n                if (that.resizeHandle) {\n                    that._destroyResizable();\n                    that.resizeHandle.off(that.options.eventNamespace).remove();\n                    that.resizeHandle = null;\n                }\n            },\n            _initResizable: function (tableElement) {\n                var that = this;\n                if (!that.resizeHandle) {\n                    return;\n                }\n                that._destroyResizable();\n                that._resizable = new kendo.ui.Resizable(tableElement, {\n                    draggableElement: that.resizeHandle[0],\n                    start: proxy(that.onResizeStart, that),\n                    resize: proxy(that.onResize, that),\n                    resizeend: proxy(that.onResizeEnd, that)\n                });\n            },\n            _destroyResizable: function () {\n                var that = this;\n                if (that._resizable) {\n                    that._resizable.destroy();\n                    that._resizable = null;\n                }\n            },\n            onResizeStart: function () {\n                this._disableKeyboard();\n            },\n            onResize: function (e) {\n                this.setResizeHandleDragPosition(e);\n            },\n            setResizeHandleDragPosition: noop,\n            onResizeEnd: function (e) {\n                var that = this;\n                that.resize(e);\n                that._destroyResizeHandle();\n                that._enableKeyboard();\n            },\n            _enableKeyboard: function () {\n                var options = this.options;\n                $(options.rootElement).off(KEY_DOWN + options.eventNamespace);\n            },\n            _disableKeyboard: function () {\n                var options = this.options;\n                $(options.rootElement).on(KEY_DOWN + options.eventNamespace, function (e) {\n                    e.preventDefault();\n                });\n            },\n            _forceResizing: function (e) {\n                var resizable = this._resizable;\n                if (resizable && resizable.userEvents) {\n                    resizable.userEvents._end(e);\n                }\n            }\n        });\n        var ResizingFactory = Class.extend({\n            create: function (editor, options) {\n                var that = this;\n                var resizingName = options.name;\n                var NS = options.eventNamespace;\n                $(editor.body).on(MOUSE_ENTER + NS, TABLE, function (e) {\n                    var table = e.currentTarget;\n                    var resizing = editor[resizingName];\n                    e.stopPropagation();\n                    if (resizing) {\n                        if (resizing.element !== table && !resizing.resizingInProgress()) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, table, options);\n                        }\n                    } else {\n                        that._initResizing(editor, table, options);\n                    }\n                }).on(MOUSE_LEAVE + NS, TABLE, function (e) {\n                    var parentTable;\n                    var resizing = editor[resizingName];\n                    e.stopPropagation();\n                    if (resizing && !resizing.resizingInProgress() && !resizing.resizeHandle) {\n                        parentTable = $(resizing.element).parents(TABLE)[0];\n                        if (parentTable) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                }).on(MOUSE_LEAVE + NS, function () {\n                    var resizing = editor[resizingName];\n                    if (resizing && !resizing.resizingInProgress()) {\n                        that._destroyResizing(editor, options);\n                    }\n                }).on(MOUSE_UP + NS, function (e) {\n                    var resizing = editor[resizingName];\n                    var parentTable;\n                    if (resizing && resizing.resizingInProgress()) {\n                        parentTable = $(e.target).parents(TABLE)[0];\n                        if (parentTable) {\n                            resizing._forceResizing(e);\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                });\n            },\n            dispose: function (editor, options) {\n                $(editor.body).off(options.eventNamespace);\n            },\n            _initResizing: function (editor, tableElement, options) {\n                var resizingName = options.name;\n                var resizingType = options.type;\n                editor[resizingName] = new resizingType(tableElement, {\n                    rtl: kendo.support.isRtl(editor.element),\n                    rootElement: editor.body\n                });\n            },\n            _destroyResizing: function (editor, options) {\n                var resizingName = options.name;\n                if (editor[resizingName]) {\n                    editor[resizingName].destroy();\n                    editor[resizingName] = null;\n                }\n            }\n        });\n        ResizingFactory.current = new ResizingFactory();\n        TableElementResizing.create = function (editor, options) {\n            ResizingFactory.current.create(editor, options);\n        };\n        TableElementResizing.dispose = function (editor, options) {\n            ResizingFactory.current.dispose(editor, options);\n        };\n        extend(Editor, { TableElementResizing: TableElementResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/column-resizing', [\n        'editor/main',\n        'editor/resizing/resizing-utils',\n        'editor/resizing/table-element-resizing'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var global = window;\n        var math = global.Math;\n        var abs = math.abs;\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var Editor = kendo.ui.editor;\n        var TableElementResizing = Editor.TableElementResizing;\n        var ResizingUtils = Editor.ResizingUtils;\n        var constrain = ResizingUtils.constrain;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n        var inPercentages = ResizingUtils.inPercentages;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerWidth = kendo._outerWidth;\n        var NS = '.kendoEditorColumnResizing';\n        var RESIZE_HANDLE_CLASS = 'k-column-resize-handle';\n        var RESIZE_MARKER_CLASS = 'k-column-resize-marker';\n        var BODY = 'body';\n        var TBODY = 'tbody';\n        var TD = 'td';\n        var TH = 'th';\n        var TR = 'tr';\n        var COMMA = ',';\n        var WIDTH = 'width';\n        var ColumnResizing = TableElementResizing.extend({\n            options: {\n                tags: [\n                    TD,\n                    TH\n                ],\n                min: 20,\n                rootElement: null,\n                eventNamespace: NS,\n                rtl: false,\n                handle: {\n                    dataAttribute: 'column',\n                    width: 10,\n                    height: 0,\n                    classNames: {\n                        handle: RESIZE_HANDLE_CLASS,\n                        marker: RESIZE_MARKER_CLASS\n                    },\n                    template: '<div class=\"k-column-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' + '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' + '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' + '</div>' + '</div>'\n                }\n            },\n            elementBorderHovered: function (column, e) {\n                var that = this;\n                var options = that.options;\n                var handleWidth = options.handle.width;\n                var borderOffset = column.offset().left + (options.rtl ? 0 : outerWidth(column));\n                var mousePosition = e.clientX + $(column[0].ownerDocument).scrollLeft();\n                if (mousePosition > borderOffset - handleWidth && mousePosition < borderOffset + handleWidth) {\n                    return true;\n                } else {\n                    return false;\n                }\n            },\n            setResizeHandlePosition: function (column) {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                var options = that.options;\n                var rtl = options.rtl;\n                var handleWidth = options.handle.width;\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : rootElement.scrollLeft();\n                var columnWidthOffset = rtl ? 0 : outerWidth(column);\n                var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var columnOffsetLeft = column.offset().left - (rootElement.offset().left + parseFloat(rootElement.css('borderLeftWidth'))) - parseFloat(column.css('marginLeft'));\n                var tBodyOffsetTop = tableBody.offset().top - (rootElement.offset().top + parseFloat(rootElement.css('borderTopWidth'))) - parseFloat(tableBody.css('marginTop'));\n                that.resizeHandle.css({\n                    top: tBodyOffsetTop + scrollTopOffset,\n                    left: columnOffsetLeft + columnWidthOffset + (scrollLeftOffset - scrollBarWidth) - handleWidth / 2,\n                    position: 'absolute'\n                });\n            },\n            setResizeHandleDimensions: function () {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                that.resizeHandle.css({\n                    width: that.options.handle.width,\n                    height: tableBody.height()\n                });\n            },\n            setResizeHandleDragPosition: function (e) {\n                var that = this;\n                var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n                var options = that.options;\n                var rootElement = $(options.rootElement);\n                var handleWidth = options.handle ? options.handle.width : 0;\n                var min = options.min;\n                var rtl = options.rtl;\n                var columnWidth = outerWidth(column);\n                var columnLeftOffset = column.offset().left - (rootElement.offset().left + parseFloat(rootElement.css('borderLeftWidth'))) - parseFloat(column.css('marginLeft'));\n                var adjacentColumnWidth = outerWidth(column.next());\n                var resizeHandle = $(that.resizeHandle);\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : rootElement.scrollLeft();\n                var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var resizeHandleOffsetLeft = resizeHandle.offset().left - (rootElement.offset().left + parseFloat(rootElement.css('borderLeftWidth'))) - parseFloat(resizeHandle.css('marginLeft'));\n                var handleOffset = constrain({\n                    value: resizeHandleOffsetLeft + (scrollLeftOffset - scrollBarWidth) + e.x.delta,\n                    min: columnLeftOffset + (scrollLeftOffset - scrollBarWidth) - (rtl ? adjacentColumnWidth : 0) + min,\n                    max: columnLeftOffset + columnWidth + (scrollLeftOffset - scrollBarWidth) + (rtl ? 0 : adjacentColumnWidth) - handleWidth - min\n                });\n                resizeHandle.css({ left: handleOffset });\n            },\n            resize: function (e) {\n                var that = this;\n                var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n                var options = that.options;\n                var rtlModifier = options.rtl ? -1 : 1;\n                var min = options.min;\n                var initialDeltaX = rtlModifier * e.x.initialDelta;\n                var newWidth;\n                var initialAdjacentColumnWidth;\n                var initialColumnWidth;\n                that._setTableComputedWidth();\n                that._setColumnsComputedWidth();\n                initialColumnWidth = outerWidth(column);\n                initialAdjacentColumnWidth = outerWidth(column.next());\n                newWidth = constrain({\n                    value: initialColumnWidth + initialDeltaX,\n                    min: min,\n                    max: initialColumnWidth + initialAdjacentColumnWidth - min\n                });\n                that._resizeColumn(column[0], newWidth);\n                that._resizeTopAndBottomColumns(column[0], newWidth);\n                that._resizeAdjacentColumns(column.index(), initialAdjacentColumnWidth, initialColumnWidth, initialColumnWidth - newWidth);\n            },\n            _setTableComputedWidth: function () {\n                var element = this.element;\n                if (element.style[WIDTH] === '') {\n                    element.style[WIDTH] = toPixels(outerWidth($(element)));\n                }\n            },\n            _setColumnsComputedWidth: function () {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyWidth = outerWidth(tableBody);\n                var columns = tableBody.children(TR).children(TD);\n                var length = columns.length;\n                var currentColumnsWidths = columns.map(function () {\n                    return outerWidth($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    if (inPercentages(columns[i].style[WIDTH])) {\n                        columns[i].style[WIDTH] = toPercentages(calculatePercentageRatio(currentColumnsWidths[i], tableBodyWidth));\n                    } else {\n                        columns[i].style[WIDTH] = toPixels(currentColumnsWidths[i]);\n                    }\n                }\n            },\n            _resizeTopAndBottomColumns: function (column, newWidth) {\n                var that = this;\n                var columnIndex = $(column).index();\n                var topAndBottomColumns = $(that.element).children(TBODY).children(TR).children(that.options.tags.join(COMMA)).filter(function () {\n                    var cell = this;\n                    return $(cell).index() === columnIndex && cell !== column;\n                });\n                var length = topAndBottomColumns.length;\n                var i;\n                for (i = 0; i < length; i++) {\n                    that._resizeColumn(topAndBottomColumns[i], newWidth);\n                }\n            },\n            _resizeColumn: function (column, newWidth) {\n                if (inPercentages(column.style[WIDTH])) {\n                    column.style[WIDTH] = toPercentages(calculatePercentageRatio(newWidth, outerWidth($(this.element).children(TBODY))));\n                } else {\n                    column.style[WIDTH] = toPixels(newWidth);\n                }\n            },\n            _resizeAdjacentColumns: function (columnIndex, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n                var that = this;\n                var adjacentColumns = $(that.element).children(TBODY).children(TR).children(that.options.tags.join(COMMA)).filter(function () {\n                    return $(this).index() === columnIndex + 1;\n                });\n                var length = adjacentColumns.length;\n                var i;\n                for (i = 0; i < length; i++) {\n                    that._resizeAdjacentColumn(adjacentColumns[i], initialAdjacentColumnWidth, initialColumnWidth, deltaWidth);\n                }\n            },\n            _resizeAdjacentColumn: function (adjacentColumn, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n                var that = this;\n                var min = that.options.min;\n                var newWidth;\n                newWidth = constrain({\n                    value: initialAdjacentColumnWidth + deltaWidth,\n                    min: min,\n                    max: abs(initialColumnWidth + initialAdjacentColumnWidth - min)\n                });\n                that._resizeColumn(adjacentColumn, newWidth);\n            }\n        });\n        ColumnResizing.create = function (editor) {\n            TableElementResizing.create(editor, {\n                name: 'columnResizing',\n                type: ColumnResizing,\n                eventNamespace: NS\n            });\n        };\n        ColumnResizing.dispose = function (editor) {\n            TableElementResizing.dispose(editor, { eventNamespace: NS });\n        };\n        extend(Editor, { ColumnResizing: ColumnResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/row-resizing', [\n        'editor/main',\n        'editor/resizing/resizing-utils',\n        'editor/resizing/table-element-resizing'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var math = window.Math;\n        var abs = math.abs;\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var Editor = kendo.ui.editor;\n        var TableElementResizing = Editor.TableElementResizing;\n        var ResizingUtils = Editor.ResizingUtils;\n        var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n        var constrain = ResizingUtils.constrain;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var inPercentages = ResizingUtils.inPercentages;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerHeight = kendo._outerHeight;\n        var NS = '.kendoEditorRowResizing';\n        var RESIZE_HANDLE_CLASS = 'k-row-resize-handle';\n        var RESIZE_HANDLE_MARKER_WRAPPER_CLASS = 'k-row-resize-marker-wrapper';\n        var RESIZE_MARKER_CLASS = 'k-row-resize-marker';\n        var BODY = 'body';\n        var TR = 'tr';\n        var TBODY = 'tbody';\n        var HEIGHT = 'height';\n        var RowResizing = TableElementResizing.extend({\n            options: {\n                tags: [TR],\n                min: 20,\n                rootElement: null,\n                eventNamespace: NS,\n                rtl: false,\n                handle: {\n                    dataAttribute: 'row',\n                    width: 0,\n                    height: 10,\n                    classNames: {\n                        handle: RESIZE_HANDLE_CLASS,\n                        marker: RESIZE_MARKER_CLASS\n                    },\n                    template: '<div class=\"k-row-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' + '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' + '<div class=\"' + RESIZE_HANDLE_MARKER_WRAPPER_CLASS + '\">' + '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' + '</div>' + '</div>' + '</div>'\n                }\n            },\n            elementBorderHovered: function (tableElement, e) {\n                var that = this;\n                var handleHeight = that.options.handle[HEIGHT];\n                var borderOffset = tableElement.offset().top + outerHeight(tableElement);\n                var mousePosition = e.clientY + $(tableElement[0].ownerDocument).scrollTop();\n                if (mousePosition > borderOffset - handleHeight && mousePosition < borderOffset + handleHeight) {\n                    return true;\n                } else {\n                    return false;\n                }\n            },\n            setResizeHandlePosition: function (row) {\n                var that = this;\n                var options = that.options;\n                var handleHeight = options.handle[HEIGHT];\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : rootElement.scrollLeft();\n                var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var rowOffsetLeft = row.offset().left - (rootElement.offset().left + parseFloat(rootElement.css('borderLeftWidth'))) - parseFloat(row.css('marginLeft'));\n                var rowOffsetTop = row.offset().top - (rootElement.offset().top + parseFloat(rootElement.css('borderTopWidth'))) - parseFloat(row.css('marginTop'));\n                that.resizeHandle.css({\n                    top: rowOffsetTop + outerHeight(row) + scrollTopOffset - handleHeight / 2,\n                    left: rowOffsetLeft + (scrollLeftOffset - scrollBarWidth),\n                    position: 'absolute'\n                });\n            },\n            setResizeHandleDimensions: function () {\n                var that = this;\n                that.resizeHandle.css({\n                    width: $(that.element).children(TBODY).width(),\n                    height: that.options.handle[HEIGHT]\n                });\n            },\n            setResizeHandleDragPosition: function (e) {\n                var that = this;\n                var options = that.options;\n                var min = options.min;\n                var tableBody = $(that.element).children(TBODY);\n                var resizeHandle = $(that.resizeHandle);\n                var row = $(e.currentTarget).data(options.handle.dataAttribute);\n                var $row = $(row);\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var tableBodyTopOffset = tableBody.offset().top - (rootElement.offset().top + parseFloat(rootElement.css('borderTopWidth'))) - parseFloat(tableBody.css('marginTop'));\n                var rowOffsetTop = $row.offset().top - (rootElement.offset().top + parseFloat(rootElement.css('borderTopWidth'))) - parseFloat($row.css('marginTop'));\n                var resizeHandleOffsetTop = resizeHandle.offset().top - (Math.max(0, rootElement.offset().top) + parseFloat(rootElement.css('borderTopWidth'))) - parseFloat(resizeHandle.css('marginTop'));\n                var handleOffset = constrain({\n                    value: resizeHandleOffsetTop + scrollTopOffset + e.y.delta,\n                    min: rowOffsetTop + scrollTopOffset + min,\n                    max: tableBodyTopOffset + outerHeight(tableBody) + scrollTopOffset - options.handle[HEIGHT] - min\n                });\n                resizeHandle.css({ top: handleOffset });\n            },\n            resize: function (e) {\n                var that = this;\n                var options = that.options;\n                var row = $(e.currentTarget).data(options.handle.dataAttribute);\n                var currentRowHeight = outerHeight($(row));\n                var element = $(that.element);\n                var initialTableHeight = outerHeight(element);\n                var tableBody = element.children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var initialStyleHeight = row.style[HEIGHT];\n                var newRowHeight = constrain({\n                    value: currentRowHeight + e.y.initialDelta,\n                    min: options.min,\n                    max: abs(tableBodyHeight - options.min)\n                });\n                that._setRowsHeightInPixels();\n                row.style[HEIGHT] = toPixels(newRowHeight);\n                that._setTableHeight(initialTableHeight + (newRowHeight - currentRowHeight));\n                if (inPercentages(initialStyleHeight)) {\n                    that._setRowsHeightInPercentages();\n                }\n            },\n            _setRowsHeightInPixels: function () {\n                var that = this;\n                var rows = $(that.element).children(TBODY).children(TR);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n                }\n            },\n            _setRowsHeightInPercentages: function () {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var rows = tableBody.children(TR);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableBodyHeight));\n                }\n            },\n            _setTableHeight: function (newHeight) {\n                var element = this.element;\n                if (inPercentages(element.style[HEIGHT])) {\n                    element.style[HEIGHT] = toPercentages(calculatePercentageRatio(newHeight, $(element).parent().height()));\n                } else {\n                    element.style[HEIGHT] = toPixels(newHeight);\n                }\n            }\n        });\n        RowResizing.create = function (editor) {\n            TableElementResizing.create(editor, {\n                name: 'rowResizing',\n                type: RowResizing,\n                eventNamespace: NS\n            });\n        };\n        RowResizing.dispose = function (editor) {\n            TableElementResizing.dispose(editor, { eventNamespace: NS });\n        };\n        extend(Editor, { RowResizing: RowResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/table-resize-handle', [\n        'editor/main',\n        'kendo.draganddrop',\n        'editor/resizing/resizing-utils'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var noop = $.noop;\n        var proxy = $.proxy;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var Draggable = kendo.ui.Draggable;\n        var Observable = kendo.Observable;\n        var getScrollBarWidth = Editor.ResizingUtils.getScrollBarWidth;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var NS = '.kendoEditorTableResizeHandle';\n        var RESIZE_HANDLE_CLASS = 'k-table-resize-handle';\n        var DRAG_START = 'dragStart';\n        var DRAG = 'drag';\n        var DRAG_END = 'dragEnd';\n        var HALF_INSIDE = 'halfInside';\n        var MOUSE_OVER = 'mouseover';\n        var MOUSE_OUT = 'mouseout';\n        var BODY = 'body';\n        var TABLE = 'table';\n        var EAST = 'east';\n        var NORTH = 'north';\n        var NORTHEAST = 'northeast';\n        var NORTHWEST = 'northwest';\n        var SOUTH = 'south';\n        var SOUTHEAST = 'southeast';\n        var SOUTHWEST = 'southwest';\n        var WEST = 'west';\n        var DOT = '.';\n        var TableResizeHandle = Observable.extend({\n            init: function (options) {\n                var that = this;\n                Observable.fn.init.call(that);\n                that.options = extend({}, that.options, options);\n                that.element = $(that.options.template).appendTo(that.options.appendTo)[0];\n                that._attachEventHandlers();\n                that._addStyles();\n                that._initDraggable();\n                that._initPositioningStrategy();\n                that._initDraggingStrategy();\n                $(that.element).data(TABLE, that.options.resizableElement);\n            },\n            destroy: function () {\n                var that = this;\n                $(that.element).off(NS).remove();\n                that.element = null;\n                that._destroyDraggable();\n                that.unbind();\n            },\n            options: {\n                appendTo: null,\n                direction: SOUTHEAST,\n                resizableElement: null,\n                rtl: false,\n                template: '<div class=\\'k-table-resize-handle-wrapper\\' unselectable=\\'on\\' contenteditable=\\'false\\'>' + '<div class=\\'' + RESIZE_HANDLE_CLASS + '\\'></div>' + '</div>'\n            },\n            events: [\n                DRAG_START,\n                DRAG,\n                DRAG_END,\n                MOUSE_OVER,\n                MOUSE_OUT\n            ],\n            show: function () {\n                this._setPosition();\n            },\n            _setPosition: function () {\n                var that = this;\n                var position = that._positioningStrategy.getPosition();\n                $(that.element).css({\n                    top: position.top,\n                    left: position.left,\n                    position: 'absolute'\n                });\n            },\n            _attachEventHandlers: function () {\n                var that = this;\n                $(that.element).on(MOUSE_OVER + NS, proxy(that._onMouseOver, that)).on(MOUSE_OUT + NS, proxy(that._onMouseOut, that));\n            },\n            _onMouseOver: function () {\n                this.trigger(MOUSE_OVER);\n            },\n            _onMouseOut: function () {\n                this.trigger(MOUSE_OUT);\n            },\n            _addStyles: function () {\n                var that = this;\n                $(that.element).children(DOT + RESIZE_HANDLE_CLASS).addClass('k-resize-' + that.options.direction);\n            },\n            _initPositioningStrategy: function () {\n                var that = this;\n                var options = that.options;\n                that._positioningStrategy = HandlePositioningStrategy.create({\n                    name: options.direction,\n                    handle: that.element,\n                    resizableElement: options.resizableElement,\n                    rootElement: options.rootElement,\n                    rtl: options.rtl\n                });\n            },\n            _initDraggable: function () {\n                var that = this;\n                var element = that.element;\n                if (that._draggable || !element) {\n                    return;\n                }\n                that._draggable = new Draggable(element, {\n                    dragstart: proxy(that._onDragStart, that),\n                    drag: proxy(that._onDrag, that),\n                    dragend: proxy(that._onDragEnd, that)\n                });\n            },\n            _onDragStart: function () {\n                this.trigger(DRAG_START);\n            },\n            _onDrag: function (e) {\n                var that = this;\n                that.trigger(DRAG, that._draggingStrategy.adjustDragDelta({\n                    deltaX: e.x.delta,\n                    deltaY: e.y.delta,\n                    initialDeltaX: e.x.initialDelta,\n                    initialDeltaY: e.y.initialDelta\n                }));\n            },\n            _onDragEnd: function () {\n                this.trigger(DRAG_END);\n            },\n            _destroyDraggable: function () {\n                var that = this;\n                if (that._draggable) {\n                    that._draggable.destroy();\n                    that._draggable = null;\n                }\n            },\n            _initDraggingStrategy: function () {\n                var that = this;\n                that._draggingStrategy = HandleDraggingStrategy.create({ name: that.options.direction });\n            }\n        });\n        var StrategyFactory = Class.extend({\n            init: function () {\n                this._items = [];\n            },\n            register: function (name, type) {\n                this._items.push({\n                    name: name,\n                    type: type\n                });\n            },\n            create: function (options) {\n                var items = this._items;\n                var itemsLength = items.length;\n                var name = options.name ? options.name.toLowerCase() : '';\n                var match;\n                var item;\n                var i;\n                for (i = 0; i < itemsLength; i++) {\n                    item = items[i];\n                    if (item.name.toLowerCase() === name) {\n                        match = item;\n                        break;\n                    }\n                }\n                if (match) {\n                    return new match.type(options);\n                }\n            }\n        });\n        var PositioningStrategyFactory = StrategyFactory.extend({});\n        PositioningStrategyFactory.current = new PositioningStrategyFactory();\n        var HandlePositioningStrategy = Class.extend({\n            init: function (options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n            },\n            options: {\n                handle: null,\n                offset: HALF_INSIDE,\n                resizableElement: null,\n                rootElement: null,\n                rtl: false\n            },\n            getPosition: function () {\n                var that = this;\n                var position = that.calculatePosition();\n                var handleOffsetPosition = that.applyHandleOffset(position);\n                var scrollOffsetPosition = that.applyScrollOffset(handleOffsetPosition);\n                return scrollOffsetPosition;\n            },\n            calculatePosition: noop,\n            applyHandleOffset: function (position) {\n                var options = this.options;\n                var handle = $(options.handle);\n                if (options.offset === HALF_INSIDE) {\n                    return {\n                        top: position.top - outerHeight(handle) / 2,\n                        left: position.left - outerWidth(handle) / 2\n                    };\n                }\n                return position;\n            },\n            applyScrollOffset: function (position) {\n                var options = this.options;\n                var rootElement = $(options.rootElement);\n                var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                if (!rootElement.is(BODY)) {\n                    return {\n                        top: position.top + (rootElement.scrollTop() || 0),\n                        left: position.left + (rootElement.scrollLeft() || 0) - scrollBarWidth\n                    };\n                }\n                return position;\n            }\n        });\n        HandlePositioningStrategy.create = function (options) {\n            return PositioningStrategyFactory.current.create(options);\n        };\n        var EastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement) / 2,\n                    left: offset.left + outerWidth(resizableElement)\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(EAST, EastPositioningStrategy);\n        var NorthPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top,\n                    left: offset.left + outerWidth(resizableElement) / 2\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTH, NorthPositioningStrategy);\n        var NortheastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top,\n                    left: offset.left + outerWidth(resizableElement)\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTHEAST, NortheastPositioningStrategy);\n        var NorthwestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top,\n                    left: offset.left\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTHWEST, NorthwestPositioningStrategy);\n        var SouthPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + outerWidth(resizableElement) / 2\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTH, SouthPositioningStrategy);\n        var SoutheastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + outerWidth(resizableElement)\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTHEAST, SoutheastPositioningStrategy);\n        var SouthwestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTHWEST, SouthwestPositioningStrategy);\n        var WestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement) / 2,\n                    left: offset.left\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(WEST, WestPositioningStrategy);\n        var DraggingStrategyFactory = StrategyFactory.extend({});\n        DraggingStrategyFactory.current = new DraggingStrategyFactory();\n        var HandleDraggingStrategy = Class.extend({\n            init: function (options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n            },\n            options: {\n                deltaX: {\n                    adjustment: null,\n                    modifier: null\n                },\n                deltaY: {\n                    adjustment: null,\n                    modifier: null\n                }\n            },\n            adjustDragDelta: function (deltas) {\n                var options = this.options;\n                var xAxisAdjustment = options.deltaX.adjustment * options.deltaX.modifier;\n                var yAxisAdjustment = options.deltaY.adjustment * options.deltaY.modifier;\n                return {\n                    deltaX: deltas.deltaX * xAxisAdjustment,\n                    deltaY: deltas.deltaY * yAxisAdjustment,\n                    initialDeltaX: deltas.initialDeltaX * xAxisAdjustment,\n                    initialDeltaY: deltas.initialDeltaY * yAxisAdjustment\n                };\n            }\n        });\n        HandleDraggingStrategy.create = function (options) {\n            return DraggingStrategyFactory.current.create(options);\n        };\n        var HorizontalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 1,\n                    modifier: 1\n                },\n                deltaY: {\n                    adjustment: 0,\n                    modifier: 0\n                }\n            }\n        });\n        var EastDraggingStrategy = HorizontalDraggingStrategy.extend({ options: { deltaX: { modifier: 1 } } });\n        DraggingStrategyFactory.current.register(EAST, EastDraggingStrategy);\n        var WestDraggingStrategy = HorizontalDraggingStrategy.extend({ options: { deltaX: { modifier: -1 } } });\n        DraggingStrategyFactory.current.register(WEST, WestDraggingStrategy);\n        var VerticalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 0,\n                    modifier: 0\n                },\n                deltaY: {\n                    adjustment: 1,\n                    modifier: 1\n                }\n            }\n        });\n        var NorthDraggingStrategy = VerticalDraggingStrategy.extend({ options: { deltaY: { modifier: -1 } } });\n        DraggingStrategyFactory.current.register(NORTH, NorthDraggingStrategy);\n        var SouthDraggingStrategy = VerticalDraggingStrategy.extend({ options: { deltaY: { modifier: 1 } } });\n        DraggingStrategyFactory.current.register(SOUTH, SouthDraggingStrategy);\n        var HorizontalAndVerticalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 1,\n                    modifier: 1\n                },\n                deltaY: {\n                    adjustment: 1,\n                    modifier: 1\n                }\n            }\n        });\n        var NorthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: 1 },\n                deltaY: { modifier: -1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTHEAST, NorthEastDraggingStrategy);\n        var NorthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: -1 },\n                deltaY: { modifier: -1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTHWEST, NorthWestDraggingStrategy);\n        var SouthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: 1 },\n                deltaY: { modifier: 1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTHEAST, SouthEastDraggingStrategy);\n        var SouthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: -1 },\n                deltaY: { modifier: 1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTHWEST, SouthWestDraggingStrategy);\n        extend(Editor, { TableResizeHandle: TableResizeHandle });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/table-resizing', [\n        'editor/main',\n        'editor/resizing/table-resize-handle',\n        'editor/resizing/resizing-utils'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var global = window;\n        var math = global.Math;\n        var min = math.min;\n        var max = math.max;\n        var $ = kendo.jQuery;\n        var contains = $.contains;\n        var extend = $.extend;\n        var proxy = $.proxy;\n        var browser = kendo.support.browser;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var TableResizeHandle = Editor.TableResizeHandle;\n        var ResizingUtils = Editor.ResizingUtils;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var constrain = ResizingUtils.constrain;\n        var inPercentages = ResizingUtils.inPercentages;\n        var inPixels = ResizingUtils.inPixels;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var NS = '.kendoEditorTableResizing';\n        var RESIZE_HANDLE_WRAPPER_CLASS = 'k-table-resize-handle-wrapper';\n        var TABLE_CLASS = 'k-table';\n        var TABLE_RESIZING_CLASS = 'k-table-resizing';\n        var DRAG_START = 'dragStart';\n        var DRAG = 'drag';\n        var DRAG_END = 'dragEnd';\n        var KEY_DOWN = 'keydown';\n        var MOUSE_DOWN = 'mousedown';\n        var MOUSE_OVER = 'mouseover';\n        var MOUSE_OUT = 'mouseout';\n        var COLUMN = 'td';\n        var ROW = 'tr';\n        var TBODY = 'tbody';\n        var TABLE = 'table';\n        var WIDTH = 'width';\n        var HEIGHT = 'height';\n        var EAST = 'east';\n        var NORTH = 'north';\n        var NORTHEAST = 'northeast';\n        var NORTHWEST = 'northwest';\n        var SOUTH = 'south';\n        var SOUTHEAST = 'southeast';\n        var SOUTHWEST = 'southwest';\n        var WEST = 'west';\n        var DOT = '.';\n        function isUndefined(value) {\n            return typeof value === 'undefined';\n        }\n        var TableResizing = Class.extend({\n            init: function (element, options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n                that.handles = [];\n                if ($(element).is(TABLE)) {\n                    that.element = element;\n                }\n            },\n            destroy: function () {\n                var that = this;\n                $(that.element).off(NS);\n                that.element = null;\n                $(that.options.rootElement).off(KEY_DOWN + NS);\n                that._destroyResizeHandles();\n            },\n            options: {\n                appendHandlesTo: null,\n                rtl: false,\n                rootElement: null,\n                minWidth: 10,\n                minHeight: 10,\n                handles: [\n                    { direction: NORTHWEST },\n                    { direction: NORTH },\n                    { direction: NORTHEAST },\n                    { direction: EAST },\n                    { direction: SOUTHEAST },\n                    { direction: SOUTH },\n                    { direction: SOUTHWEST },\n                    { direction: WEST }\n                ]\n            },\n            resize: function (args) {\n                var that = this;\n                var deltas = extend({}, {\n                    deltaX: 0,\n                    deltaY: 0,\n                    initialDeltaX: 0,\n                    initialDeltaY: 0\n                }, args);\n                that._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n                that._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n                that.showResizeHandles();\n            },\n            _resizeWidth: function (delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var styleWidth = element[0].style[WIDTH];\n                var currentWidth = outerWidth(element);\n                var parentWidth = element.parent().width();\n                var maxWidth = that._getMaxDimensionValue(WIDTH);\n                var newWidth;\n                var ratioValue;\n                var ratioTotalValue;\n                var constrainedWidth;\n                if (delta === 0) {\n                    return;\n                }\n                if (isUndefined(that._initialElementWidth)) {\n                    that._initialElementWidth = currentWidth;\n                }\n                constrainedWidth = constrain({\n                    value: that._initialElementWidth + initialDelta,\n                    min: that.options.minWidth,\n                    max: maxWidth\n                });\n                if (inPercentages(styleWidth)) {\n                    if (currentWidth + delta > parentWidth) {\n                        ratioValue = max(constrainedWidth, parentWidth);\n                        ratioTotalValue = min(constrainedWidth, parentWidth);\n                    } else {\n                        ratioValue = min(constrainedWidth, parentWidth);\n                        ratioTotalValue = max(constrainedWidth, parentWidth);\n                    }\n                    newWidth = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n                } else {\n                    newWidth = toPixels(constrainedWidth);\n                }\n                that._setColumnsWidth();\n                element[0].style[WIDTH] = newWidth;\n            },\n            _resizeHeight: function (delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var styleHeight = element[0].style[HEIGHT];\n                var currentHeight = outerHeight(element);\n                var parent = element.parent();\n                var parentHeight = parent.height();\n                var maxHeight = that._getMaxDimensionValue(HEIGHT);\n                var newHeight;\n                var ratioValue;\n                var ratioTotalValue;\n                var constrainedHeight;\n                var minHeight = that.options.minHeight;\n                var hasRowsInPixels = that._hasRowsInPixels();\n                if (delta === 0) {\n                    return;\n                }\n                if (isUndefined(that._initialElementHeight)) {\n                    that._initialElementHeight = currentHeight;\n                }\n                constrainedHeight = constrain({\n                    value: that._initialElementHeight + initialDelta,\n                    min: minHeight,\n                    max: maxHeight\n                });\n                if (hasRowsInPixels && delta < 0) {\n                    that._setRowsHeightInPercentages();\n                }\n                if (inPercentages(styleHeight)) {\n                    if (currentHeight + delta > parentHeight) {\n                        ratioValue = max(constrainedHeight, parentHeight);\n                        ratioTotalValue = min(constrainedHeight, parentHeight);\n                    } else {\n                        ratioValue = min(constrainedHeight, parentHeight);\n                        ratioTotalValue = max(constrainedHeight, parentHeight);\n                    }\n                    newHeight = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n                } else {\n                    newHeight = toPixels(constrainedHeight);\n                }\n                element[0].style[HEIGHT] = newHeight;\n                if (hasRowsInPixels && delta < 0) {\n                    that._setRowsHeightInPixels();\n                }\n            },\n            _getMaxDimensionValue: function (dimension) {\n                var that = this;\n                var element = $(that.element);\n                var dimensionLowercase = dimension.toLowerCase();\n                var rtlModifier = that.options.rtl ? -1 : 1;\n                var parent = $(that.element).parent();\n                var parentElement = parent[0];\n                var parentDimension = parent[dimensionLowercase]();\n                var parentScrollOffset = rtlModifier * (dimension === WIDTH ? parent.scrollLeft() : parent.scrollTop());\n                if (parentElement === element.closest(COLUMN)[0]) {\n                    if (parentElement.style[dimensionLowercase] === '' && !inPercentages(that.element.style[dimensionLowercase])) {\n                        return Infinity;\n                    } else {\n                        return parentDimension + parentScrollOffset;\n                    }\n                } else {\n                    return parentDimension + parentScrollOffset;\n                }\n            },\n            _setColumnsWidth: function () {\n                var that = this;\n                var element = $(that.element);\n                var parentElement = element.parent()[0];\n                var parentColumn = element.closest(COLUMN);\n                var columns = parentColumn.closest(ROW).children();\n                var columnsLength = columns.length;\n                var i;\n                function isWidthInPercentages(element) {\n                    var styleWidth = element.style.width;\n                    if (styleWidth !== '') {\n                        return inPercentages(styleWidth) ? true : false;\n                    } else {\n                        return $(element).hasClass(TABLE_CLASS) ? true : false;\n                    }\n                }\n                if (isWidthInPercentages(element[0]) && parentElement === parentColumn[0] && parentElement.style[WIDTH] === '') {\n                    for (i = 0; i < columnsLength; i++) {\n                        columns[i].style[WIDTH] = toPixels($(columns[i]).width());\n                    }\n                }\n            },\n            _hasRowsInPixels: function () {\n                var that = this;\n                var rows = $(that.element).children(TBODY).children(ROW);\n                for (var i = 0; i < rows.length; i++) {\n                    if (rows[i].style.height === '' || inPixels(rows[i].style.height)) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            _setRowsHeightInPercentages: function () {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var rows = tableBody.children(ROW);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableBodyHeight));\n                }\n            },\n            _setRowsHeightInPixels: function () {\n                var that = this;\n                var rows = $(that.element).children(TBODY).children(ROW);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n                }\n            },\n            showResizeHandles: function () {\n                var that = this;\n                that._initResizeHandles();\n                that._showResizeHandles();\n            },\n            _initResizeHandles: function () {\n                var that = this;\n                var handles = that.handles;\n                var options = that.options;\n                var handleOptions = that.options.handles;\n                var length = handleOptions.length;\n                var i;\n                if (handles && handles.length > 0) {\n                    return;\n                }\n                for (i = 0; i < length; i++) {\n                    that.handles.push(new TableResizeHandle(extend({\n                        appendTo: options.appendHandlesTo,\n                        resizableElement: that.element,\n                        rootElement: options.rootElement,\n                        rtl: options.rtl\n                    }, handleOptions[i])));\n                }\n                that._bindToResizeHandlesEvents();\n            },\n            _destroyResizeHandles: function () {\n                var that = this;\n                var length = that.handles ? that.handles.length : 0;\n                for (var i = 0; i < length; i++) {\n                    that.handles[i].destroy();\n                }\n            },\n            _showResizeHandles: function () {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n                for (i = 0; i < length; i++) {\n                    that.handles[i].show();\n                }\n            },\n            _bindToResizeHandlesEvents: function () {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n                var handle;\n                for (i = 0; i < length; i++) {\n                    handle = handles[i];\n                    handle.bind(DRAG_START, proxy(that._onResizeHandleDragStart, that));\n                    handle.bind(DRAG, proxy(that._onResizeHandleDrag, that));\n                    handle.bind(DRAG_END, proxy(that._onResizeHandleDragEnd, that));\n                    handle.bind(MOUSE_OVER, proxy(that._onResizeHandleMouseOver, that));\n                    handle.bind(MOUSE_OUT, proxy(that._onResizeHandleMouseOut, that));\n                }\n            },\n            _onResizeHandleDragStart: function () {\n                var that = this;\n                var element = $(that.element);\n                element.addClass(TABLE_RESIZING_CLASS);\n                that._initialElementHeight = outerHeight(element);\n                that._initialElementWidth = outerWidth(element);\n                that._disableKeyboard();\n            },\n            _onResizeHandleDrag: function (e) {\n                this.resize(e);\n            },\n            _onResizeHandleDragEnd: function () {\n                var that = this;\n                $(that.element).removeClass(TABLE_RESIZING_CLASS);\n                that._enableKeyboard();\n            },\n            _enableKeyboard: function () {\n                $(this.options.rootElement).off(KEY_DOWN + NS);\n            },\n            _disableKeyboard: function () {\n                $(this.options.rootElement).on(KEY_DOWN + NS, function (e) {\n                    e.preventDefault();\n                });\n            }\n        });\n        var TableResizingFactory = Class.extend({\n            create: function (editor) {\n                var factory = this;\n                $(editor.body).on(MOUSE_DOWN + NS, TABLE, function (e) {\n                    var eventTarget = e.target;\n                    var eventCurrentTarget = e.currentTarget;\n                    var tableResizing = editor.tableResizing;\n                    var element = tableResizing ? tableResizing.element : null;\n                    if (tableResizing) {\n                        if (element && eventCurrentTarget !== element) {\n                            if (contains(eventCurrentTarget, element) && element !== eventTarget && contains(element, eventTarget)) {\n                                return;\n                            } else {\n                                if (element !== eventTarget) {\n                                    editor._destroyTableResizing();\n                                    factory._initResizing(editor, eventCurrentTarget);\n                                }\n                            }\n                        }\n                    } else {\n                        factory._initResizing(editor, eventCurrentTarget);\n                    }\n                    editor._showTableResizeHandles();\n                }).on(MOUSE_DOWN + NS, function (e) {\n                    var tableResizing = editor.tableResizing;\n                    var element = tableResizing ? tableResizing.element : null;\n                    var target = e.target;\n                    var isResizeHandleOrChild = $(target).hasClass(RESIZE_HANDLE_WRAPPER_CLASS) || $(target).parents(DOT + RESIZE_HANDLE_WRAPPER_CLASS).length > 0;\n                    if (tableResizing && element !== target && !contains(element, target) && !isResizeHandleOrChild) {\n                        editor._destroyTableResizing();\n                    }\n                });\n            },\n            dispose: function (editor) {\n                $(editor.body).off(NS);\n            },\n            _initResizing: function (editor, table) {\n                if (!browser.msie && !browser.mozilla) {\n                    editor.tableResizing = new TableResizing(table, {\n                        appendHandlesTo: editor.body,\n                        rtl: kendo.support.isRtl(editor.element),\n                        rootElement: editor.body\n                    });\n                }\n            }\n        });\n        TableResizingFactory.current = new TableResizingFactory();\n        TableResizing.create = function (editor) {\n            TableResizingFactory.current.create(editor);\n        };\n        TableResizing.dispose = function (editor) {\n            TableResizingFactory.current.dispose(editor);\n        };\n        extend(Editor, { TableResizing: TableResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/table-wizard/table-wizard-command', ['editor/plugins/tables'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, Command = Editor.Command;\n        var tableFormatFinder = new Editor.BlockFormatFinder([{ tags: ['table'] }]);\n        var cellsFormatFinder = new Editor.BlockFormatFinder([{\n                tags: [\n                    'td',\n                    'th'\n                ]\n            }]);\n        var reUnit = /([a-z]+|%)$/i;\n        var TableWizardCommand = Command.extend({\n            exec: function () {\n                var cmd = this;\n                var editor = cmd.editor;\n                var range = cmd.range = cmd.lockRange();\n                var selectedTable = cmd._sourceTable = !cmd.options.insertNewTable ? cmd._selectedTable(range) : undefined;\n                var selectedCells = cmd._selectedTableCells = selectedTable ? cmd._selectedCells(range) : undefined;\n                var options = {\n                    visible: false,\n                    messages: editor.options.messages,\n                    closeCallback: $.proxy(cmd.onDialogClose, cmd),\n                    table: cmd.parseTable(selectedTable, selectedCells),\n                    dialogOptions: editor.options.dialogOptions,\n                    isRtl: kendo.support.isRtl(editor.wrapper)\n                };\n                var dialog = new Editor.TableWizardDialog(options);\n                dialog.open();\n            },\n            onDialogClose: function (data) {\n                var cmd = this;\n                cmd.releaseRange(cmd.range);\n                if (data) {\n                    if (cmd.options.insertNewTable) {\n                        cmd.insertTable(cmd.createNewTable(data));\n                    } else {\n                        cmd.updateTable(data, cmd._sourceTable, cmd._selectedTableCells);\n                    }\n                }\n            },\n            releaseRange: function (range) {\n                var cmd = this;\n                var doc = cmd.editor.document;\n                dom.windowFromDocument(doc).focus();\n                Command.fn.releaseRange.call(cmd, range);\n            },\n            insertTable: function (table) {\n                var range = this.range;\n                range.insertNode(table);\n                range.collapse(true);\n                this.editor.selectRange(range);\n                this._ensureFocusableAfterTable(table);\n            },\n            _ensureFocusableAfterTable: function (table) {\n                var siblingNodes = $(table).parent().contents();\n                var lastSiblingIndex = siblingNodes.length - 1;\n                var lastSibling = siblingNodes.get(lastSiblingIndex);\n                while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === ' ' || lastSibling.nodeValue === '')) {\n                    lastSiblingIndex -= 1;\n                    lastSibling = siblingNodes.get(lastSiblingIndex);\n                }\n                if (lastSibling === table) {\n                    dom.insertAfter(dom.createEmptyNode(this.editor.document, 'p'), table);\n                }\n            },\n            updateTable: function (data, table, selectedCells) {\n                var cmd = this;\n                var tableRows = $(table.rows).toArray();\n                var tableProp = data.tableProperties;\n                var rows = tableProp.rows;\n                var columns = tableProp.columns;\n                var last = function (collection) {\n                    return collection[collection.length - 1];\n                };\n                while (selectedCells.length > 1) {\n                    selectedCells.pop();\n                }\n                var lastSelectedRow = selectedCells.length ? last(selectedCells).parentNode : last(tableRows);\n                var row, parent;\n                cmd._deleteTableRows(tableRows, tableRows.length - rows);\n                if (tableRows.length < rows) {\n                    var rowIndex = $(lastSelectedRow).index();\n                    var cellsLength = lastSelectedRow.cells.length;\n                    var newRowsCount = rows - tableRows.length;\n                    parent = lastSelectedRow.parentNode;\n                    while (newRowsCount) {\n                        row = parent.insertRow(rowIndex + 1);\n                        cmd._insertCells(cellsLength - row.cells.length, row);\n                        newRowsCount--;\n                    }\n                }\n                if (tableRows[0].cells.length > columns) {\n                    $(tableRows).each(function (i, row) {\n                        while (row.cells.length > columns) {\n                            row.deleteCell(-1);\n                        }\n                    });\n                }\n                if (tableRows[0].cells.length < columns) {\n                    var cellIndex = $(last(selectedCells) || last(lastSelectedRow.cells)).index();\n                    $(tableRows).each(function (i, row) {\n                        cmd._insertCells(columns - row.cells.length, row, cellIndex + 1);\n                    });\n                }\n                cmd._updateTableProperties(table, tableProp);\n                var cellProp = data.cellProperties;\n                if (selectedCells[0]) {\n                    dom.attr(selectedCells[0], { id: cellProp.id || null });\n                }\n                (cellProp.selectAllCells ? $(tableRows).children() : $(selectedCells)).each(function (i, cell) {\n                    cmd._updateCellProperties(cell, cellProp);\n                });\n                cmd._updateCaption(table, tableProp);\n                tableProp.cellsWithHeaders = tableProp.cellsWithHeaders || false;\n                if (cmd.cellsWithHeadersAssociated(table) != tableProp.cellsWithHeaders) {\n                    cmd.associateCellsWithHeader(table, tableProp.cellsWithHeaders);\n                }\n            },\n            _isHeadingRow: function (row) {\n                return dom.is(row.parentNode, 'thead') || dom.is(row.cells[0], 'th');\n            },\n            associateCellsWithHeader: function (table, associate) {\n                var timestamp = new Date().getTime();\n                var ids = [];\n                var columns = table.rows[0].cells.length;\n                var index, nextRow, isDataRow;\n                var generateIds = function () {\n                    for (var i = 0; i < columns; i++) {\n                        ids[i] = 'table' + ++timestamp;\n                    }\n                };\n                var modifySellsIds = function (c, cell) {\n                    $(cell)[associate ? 'attr' : 'removeAttr']('id', ids[c]);\n                };\n                var modifyCellsHeadings = function (c, cell) {\n                    $(cell)[associate ? 'attr' : 'removeAttr']('headers', ids[c]);\n                };\n                var isHeadingRow = this._isHeadingRow;\n                $(table.rows).each(function (r, row) {\n                    if (isHeadingRow(row)) {\n                        index = r;\n                        nextRow = table.rows[++index];\n                        isDataRow = nextRow && !isHeadingRow(nextRow);\n                        if (isDataRow) {\n                            generateIds();\n                            $(row.cells).each(modifySellsIds);\n                        }\n                        while (isDataRow) {\n                            $(nextRow.cells).each(modifyCellsHeadings);\n                            nextRow = table.rows[++index];\n                            isDataRow = nextRow && !isHeadingRow(nextRow);\n                        }\n                    }\n                });\n            },\n            cellsWithHeadersAssociated: function (table) {\n                var cells = $(table.rows).children();\n                var isHeadingRow = this._isHeadingRow;\n                var headingIds = [];\n                cells.each(function (c, cell) {\n                    if (cell.id && isHeadingRow(cell.parentNode)) {\n                        headingIds.push(cell.id);\n                    }\n                });\n                var associatedCells = cells.filter(function (c, cell) {\n                    var headersAttr = cell.getAttribute('headers');\n                    return headersAttr && !isHeadingRow(cell.parentNode) && $.inArray(headersAttr, headingIds) > -1;\n                });\n                return !!associatedCells.length;\n            },\n            _insertCells: function (count, row, index) {\n                index = isNaN(index) ? -1 : index;\n                for (var i = 0, cell; i < count; i++) {\n                    cell = row.insertCell(index);\n                    cell.innerHTML = '&nbsp;';\n                }\n            },\n            _deleteTableRows: function (rows, count) {\n                for (var i = 0, row, rowParent; i < count; i++) {\n                    row = rows.pop();\n                    rowParent = row.parentNode;\n                    rowParent.removeChild(row);\n                    if (!rowParent.rows.length) {\n                        dom.remove(rowParent);\n                    }\n                }\n            },\n            createNewTable: function (data) {\n                var cmd = this;\n                var doc = cmd.editor.document;\n                var tableProp = data.tableProperties;\n                var cellProp = data.cellProperties;\n                var cellPropToAll = cellProp.selectAllCells;\n                var table = dom.create(doc, 'table');\n                cmd._updateTableProperties(table, tableProp);\n                cmd._updateCaption(table, tableProp);\n                var tbody = table.createTBody();\n                for (var r = 0, row; r < tableProp.rows; r++) {\n                    row = tbody.insertRow();\n                    for (var c = 0, cell; c < tableProp.columns; c++) {\n                        cell = row.insertCell();\n                        cell.innerHTML = '&nbsp;';\n                        if (r === 0 && c === 0 && cellProp.id) {\n                            cell.id = cellProp.id;\n                        }\n                        cmd._updateCellProperties(cell, cellPropToAll || r === 0 && c === 0 ? cellProp : {});\n                    }\n                }\n                if (tableProp.cellsWithHeaders) {\n                    cmd.associateCellsWithHeader(table, tableProp.cellsWithHeaders);\n                }\n                return table;\n            },\n            _updateTableProperties: function (table, data) {\n                var style = this._getStylesData(data);\n                dom.attr(table, {\n                    cellSpacing: data.cellSpacing || null,\n                    cellPadding: data.cellPadding || null,\n                    className: data.className || null,\n                    id: data.id || null,\n                    summary: data.summary || null,\n                    style: style || null\n                });\n                $(table).addClass('k-table');\n            },\n            _updateCellProperties: function (cell, data) {\n                var style = this._getStylesData(data);\n                style.padding = data.cellPadding || null;\n                style.margin = data.cellMargin || null;\n                dom.attr(cell, {\n                    style: style || null,\n                    className: data.className || null\n                });\n            },\n            _updateCaption: function (table, data) {\n                if (table.caption && !data.captionContent) {\n                    table.deleteCaption();\n                } else if (data.captionContent) {\n                    var caption = table.createCaption();\n                    caption.innerHTML = data.captionContent;\n                    var alignment = this._getAlignmentData(data.captionAlignment);\n                    dom.attr(caption, {\n                        style: {\n                            textAlign: alignment.textAlign,\n                            verticalAlign: alignment.verticalAlign\n                        }\n                    });\n                }\n            },\n            _getStylesData: function (data) {\n                var alignment = this._getAlignmentData(data.alignment);\n                var whiteSpace = 'wrapText' in data ? data.wrapText ? '' : 'nowrap' : null;\n                return {\n                    width: data.width ? data.width + data.widthUnit : null,\n                    height: data.height ? data.height + data.heightUnit : null,\n                    textAlign: alignment.textAlign,\n                    verticalAlign: alignment.verticalAlign,\n                    backgroundColor: data.bgColor || '',\n                    borderWidth: data.borderWidth,\n                    borderStyle: data.borderStyle,\n                    borderColor: data.borderColor || '',\n                    borderCollapse: data.collapseBorders ? 'collapse' : null,\n                    whiteSpace: whiteSpace\n                };\n            },\n            _getAlignmentData: function (alignment) {\n                var textAlign = '';\n                var verticalAlign = textAlign;\n                if (alignment) {\n                    if (alignment.indexOf(' ') != -1) {\n                        var align = alignment.split(' ');\n                        textAlign = align[0];\n                        verticalAlign = align[1];\n                    } else {\n                        textAlign = alignment;\n                    }\n                }\n                return {\n                    textAlign: textAlign,\n                    verticalAlign: verticalAlign\n                };\n            },\n            parseTable: function (table, selectedCells) {\n                if (!table) {\n                    return {\n                        tableProperties: {},\n                        selectedCells: []\n                    };\n                }\n                var cmd = this;\n                var tStyle = table.style;\n                var rows = table.rows;\n                var caption = table.caption;\n                var captionClone = $(caption ? caption.cloneNode(true) : undefined);\n                captionClone.find('.k-marker').remove();\n                var cssClass = table.className;\n                cssClass = cssClass.replace(/^k-table\\s|\\sk-table$/, '');\n                cssClass = cssClass.replace(/\\sk-table\\s/, ' ');\n                cssClass = cssClass.replace(/^k-table$/, '');\n                var tableAlignment = cmd._getAlignment(table, true);\n                var captionAlignment = caption ? cmd._getAlignment(caption) : undefined;\n                var cellsWithHeaders = cmd.cellsWithHeadersAssociated(table);\n                var tableJson = {\n                    tableProperties: {\n                        width: tStyle.width || table.width ? parseFloat(tStyle.width || table.width) : null,\n                        height: tStyle.height || table.height ? parseFloat(tStyle.height || table.height) : null,\n                        columns: rows[0] ? rows[0].children.length : 0,\n                        rows: rows.length,\n                        widthUnit: cmd._getUnit(tStyle.width),\n                        heightUnit: cmd._getUnit(tStyle.height),\n                        cellSpacing: table.cellSpacing,\n                        cellPadding: table.cellPadding,\n                        alignment: tableAlignment.textAlign,\n                        bgColor: tStyle.backgroundColor || table.bgColor,\n                        className: cssClass,\n                        id: table.id,\n                        borderWidth: tStyle.borderWidth || table.border,\n                        borderColor: tStyle.borderColor,\n                        borderStyle: tStyle.borderStyle || '',\n                        collapseBorders: !!tStyle.borderCollapse,\n                        summary: table.summary,\n                        captionContent: caption ? captionClone.html() : '',\n                        captionAlignment: caption && captionAlignment.textAlign ? captionAlignment.textAlign + ' ' + captionAlignment.verticalAlign : '',\n                        cellsWithHeaders: cellsWithHeaders\n                    },\n                    selectedCells: []\n                };\n                tableJson.rows = cmd.parseTableRows(rows, selectedCells, tableJson);\n                return tableJson;\n            },\n            parseTableRows: function (rows, selectedCells, tableJson) {\n                var cmd = this;\n                var data = [], row, rowData, cells, cell, cellData;\n                for (var i = 0; i < rows.length; i++) {\n                    row = rows[i];\n                    rowData = { cells: [] };\n                    cells = row.cells;\n                    data.push(rowData);\n                    for (var j = 0; j < cells.length; j++) {\n                        cell = cells[j];\n                        cellData = cmd.parseCell(cell);\n                        if ($.inArray(cell, selectedCells) != -1) {\n                            tableJson.selectedCells.push(cellData);\n                        }\n                        rowData.cells.push(cellData);\n                    }\n                }\n                return data;\n            },\n            parseCell: function (cell) {\n                var cmd = this;\n                var cStyle = cell.style;\n                var alignment = cmd._getAlignment(cell);\n                alignment = alignment.textAlign ? alignment.textAlign + ' ' + alignment.verticalAlign : '';\n                var data = {\n                    width: cStyle.width || cell.width ? parseFloat(cStyle.width || cell.width) : null,\n                    height: cStyle.height || cell.height ? parseFloat(cStyle.height || cell.height) : null,\n                    widthUnit: cmd._getUnit(cStyle.width),\n                    heightUnit: cmd._getUnit(cStyle.height),\n                    cellMargin: cStyle.margin,\n                    cellPadding: cStyle.padding,\n                    alignment: alignment,\n                    bgColor: cStyle.backgroundColor || cell.bgColor,\n                    className: cell.className,\n                    id: cell.id,\n                    borderWidth: cStyle.borderWidth || cell.border,\n                    borderColor: cStyle.borderColor,\n                    borderStyle: cStyle.borderStyle,\n                    wrapText: cStyle.whiteSpace != 'nowrap'\n                };\n                return data;\n            },\n            _getAlignment: function (element, horizontalOnly) {\n                var style = element.style;\n                var hAlign = style.textAlign || element.align || '';\n                if (horizontalOnly) {\n                    return { textAlign: hAlign };\n                }\n                var vAlign = style.verticalAlign || element.vAlign || '';\n                if (hAlign && vAlign) {\n                    return {\n                        textAlign: hAlign,\n                        verticalAlign: vAlign\n                    };\n                }\n                if (!hAlign && vAlign) {\n                    return {\n                        textAlign: 'left',\n                        verticalAlign: vAlign\n                    };\n                }\n                if (hAlign && !vAlign) {\n                    return {\n                        textAlign: hAlign,\n                        verticalAlign: 'top'\n                    };\n                }\n                return {\n                    textAlign: '',\n                    verticalAlign: ''\n                };\n            },\n            _getUnit: function (value) {\n                var unit = (value || '').match(reUnit);\n                return unit ? unit[0] : 'px';\n            },\n            _selectedTable: function (range) {\n                var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n                return tableFormatFinder.findSuitable(nodes)[0];\n            },\n            _selectedCells: function (range) {\n                var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n                return cellsFormatFinder.findSuitable(nodes);\n            }\n        });\n        var TableWizardTool = Editor.Tool.extend({\n            command: function (options) {\n                options.insertNewTable = this.options.insertNewTable;\n                return new TableWizardCommand(options);\n            }\n        });\n        var TableWizardEditTool = TableWizardTool.extend({\n            update: function (ui, nodes) {\n                var isFormatted = !tableFormatFinder.isFormatted(nodes);\n                ui.toggleClass('k-state-disabled', isFormatted);\n            }\n        });\n        kendo.ui.editor.TableWizardTool = TableWizardTool;\n        kendo.ui.editor.TableWizardCommand = TableWizardCommand;\n        registerTool('tableWizard', new TableWizardEditTool({\n            command: TableWizardCommand,\n            insertNewTable: false,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Table Wizard'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/table-wizard/table-wizard-dialog', [\n        'editor/table-wizard/table-wizard-command',\n        'kendo.tabstrip'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, numericTextBoxSettings = {\n                format: '0',\n                min: 0\n            }, units = [\n                'px',\n                'em'\n            ], borderStyles = [\n                'solid',\n                'dotted',\n                'dashed',\n                'double',\n                'groove',\n                'ridge',\n                'inset',\n                'outset',\n                'initial',\n                'inherit',\n                'none',\n                'hidden'\n            ];\n        var tableAlignmentDropDownSettings = {\n            dataSource: [\n                {\n                    className: 'k-icon k-i-table-align-middle-left',\n                    value: 'left'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-center',\n                    value: 'center'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-right',\n                    value: 'right'\n                },\n                {\n                    className: 'k-icon k-i-align-remove',\n                    value: ''\n                }\n            ],\n            dataTextField: 'className',\n            dataValueField: 'value',\n            template: '<span class=\\'#: className #\\' title=\\'#: tooltip #\\'></span>',\n            valueTemplate: '<span class=\\'k-align-group #: className #\\' title=\\'#: tooltip #\\'></span>'\n        };\n        var cellAlignmentDropDownSettings = {\n            dataSource: [\n                {\n                    className: 'k-icon k-i-table-align-top-left',\n                    value: 'left top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-center',\n                    value: 'center top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-right',\n                    value: 'right top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-left',\n                    value: 'left middle'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-center',\n                    value: 'center middle'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-right',\n                    value: 'right middle'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-left',\n                    value: 'left bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-center',\n                    value: 'center bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-right',\n                    value: 'right bottom'\n                },\n                {\n                    className: 'k-icon k-i-align-remove',\n                    value: ''\n                }\n            ],\n            dataTextField: 'className',\n            dataValueField: 'value',\n            template: '<span class=\\'#: className #\\' title=\\'#: tooltip #\\'></span>',\n            valueTemplate: '<span class=\\'k-align-group #: className #\\' title=\\'#: tooltip #\\'></span>'\n        };\n        var accessibilityAlignmentDropDownSettings = {\n            dataSource: [\n                {\n                    className: 'k-icon k-i-table-align-top-left',\n                    value: 'left top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-center',\n                    value: 'center top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-right',\n                    value: 'right top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-left',\n                    value: 'left bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-center',\n                    value: 'center bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-right',\n                    value: 'right bottom'\n                },\n                {\n                    className: 'k-icon k-i-align-remove',\n                    value: ''\n                }\n            ],\n            dataTextField: 'className',\n            dataValueField: 'value',\n            template: '<span class=\\'#: className #\\' title=\\'#: tooltip #\\'></span>',\n            valueTemplate: '<span class=\\'k-align-group #: className #\\' title=\\'#: tooltip #\\'></span>'\n        };\n        var dialogTemplate = '<div class=\"k-editor-dialog k-editor-table-wizard-dialog k-action-window k-popup-edit-form\">' + '<div class=\"k-edit-form-container\">' + '<div id=\"k-table-wizard-tabs\" class=\"k-root-tabs\">' + '<ul>' + '<li class=\"k-state-active\">#= messages.tableTab #</li>' + '<li>#= messages.cellTab #</li>' + '<li>#= messages.accessibilityTab #</li>' + '</ul>' + '<div id=\"k-table-properties\">' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-width\">#= messages.width #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-width\" />' + '<input id=\"k-editor-table-width-type\" aria-label=\"#= messages.units #\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-height\">#= messages.height #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-height\" />' + '<input id=\"k-editor-table-height-type\" aria-label=\"#= messages.units #\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-columns\">#= messages.columns #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-columns\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-rows\">#= messages.rows #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-rows\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cell-spacing\">#= messages.cellSpacing #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cell-spacing\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cell-padding\">#= messages.cellPadding #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cell-padding\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-alignment\">#= messages.alignment #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-table-alignment\" class=\"k-align\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-bg\">#= messages.background #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-table-bg\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-css-class\">#= messages.cssClass #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-css-class\" class=\"k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-id\">#= messages.id #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-id\" class=\"k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-border-width\">#= messages.border #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-border-width\" />' + '<input id=\"k-editor-border-color\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-border-style\">#= messages.borderStyle #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-border-style\" />' + '</div>' + '<div class=\"k-edit-label\">&nbsp;</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-collapse-borders\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-collapse-borders\" class=\"k-checkbox-label\">#= messages.collapseBorders #</label>' + '</div>' + '</div>' + '<div id=\"k-cell-properties\">' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-selectAllCells\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-selectAllCells\" class=\"k-checkbox-label\">#= messages.selectAllCells #</label>' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-width\">#= messages.width #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-cell-width\" />' + '<input id=\"k-editor-cell-width-type\" aria-label=\"#= messages.units #\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-height\">#= messages.height #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-cell-height\" />' + '<input id=\"k-editor-cell-height-type\" aria-label=\"#= messages.units #\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cell-margin\">#= messages.cellMargin #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cell-margin\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cells-padding\">#= messages.cellPadding #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cells-padding\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-alignment\">#= messages.alignment #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-alignment\" class=\"k-align\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-bg\">#= messages.background #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-bg\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-css-class\">#= messages.cssClass #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-css-class\" class=\"k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-id\">#= messages.id #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-id\" class=\"k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-border-width\">#= messages.border #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-cell-border-width\" />' + '<input id=\"k-editor-cell-border-color\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-border-style\">#= messages.borderStyle #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-border-style\" />' + '</div>' + '<div class=\"k-edit-label\">&nbsp;</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-wrap-text\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-wrap-text\" class=\"k-checkbox-label\">#= messages.wrapText #</label>' + '</div>' + '</div>' + '<div id=\"k-accessibility-properties\">' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-caption\">#= messages.caption #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-table-caption\" class=\"k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-accessibility-alignment\">#= messages.alignment #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-accessibility-alignment\" class=\"k-align\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-accessibility-summary\">#= messages.summary #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<textarea id=\"k-editor-accessibility-summary\" class=\"k-textbox\"></textarea>' + '</div>' + '<div class=\"k-edit-label\">&nbsp;</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cells-headers\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-cells-headers\" class=\"k-checkbox-label\">#= messages.associateCellsWithHeaders #</label>' + '</div>' + '</div>' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-button k-primary k-dialog-ok\">#= messages.dialogOk #</button>' + '<button class=\"k-button k-dialog-close\">#= messages.dialogCancel #</button>' + '</div>' + '</div>' + '</div>';\n        var TableWizardDialog = kendo.Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            open: function () {\n                var that = this, options = that.options, dialogOptions = options.dialogOptions, tableData = options.table, dialog, messages = options.messages, isIE = kendo.support.browser.msie;\n                function close(e) {\n                    e.preventDefault();\n                    that.destroy();\n                    dialog.destroy();\n                }\n                function okHandler(e) {\n                    that.collectDialogValues(tableData);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                    options.closeCallback(tableData);\n                }\n                function closeHandler(e) {\n                    close(e);\n                    options.closeCallback();\n                }\n                dialogOptions.close = closeHandler;\n                dialogOptions.title = messages.tableWizard;\n                dialogOptions.visible = options.visible;\n                dialog = $(that._dialogTemplate(messages)).appendTo(document.body).kendoWindow(dialogOptions).closest('.k-window').toggleClass('k-rtl', options.isRtl).end().find('.k-dialog-ok').click(okHandler).end().find('.k-dialog-close').click(closeHandler).end().data('kendoWindow');\n                var element = dialog.element;\n                that._initTabStripComponent(element);\n                that._initTableViewComponents(element, tableData);\n                that._initCellViewComponents(element, tableData);\n                that._initAccessibilityViewComponents(element, tableData);\n                dialog.center();\n                dialog.open();\n                if (isIE) {\n                    var dialogHeight = element.closest('.k-window').height();\n                    element.css('max-height', dialogHeight);\n                }\n            },\n            _initTabStripComponent: function (element) {\n                var components = this.components = {};\n                components.tabStrip = element.find('#k-table-wizard-tabs').kendoTabStrip({ animation: false }).data('kendoTabStrip');\n            },\n            collectDialogValues: function () {\n                var that = this;\n                var data = that.options.table;\n                that._collectTableViewValues(data);\n                that._collectCellViewValues(data);\n                that._collectAccessibilityViewValues(data);\n            },\n            _collectTableViewValues: function (tableData) {\n                var tableView = this.components.tableView;\n                var tableProperties = tableData.tableProperties;\n                tableProperties.width = tableView.width.value();\n                tableProperties.widthUnit = tableView.widthUnit.value();\n                tableProperties.height = tableView.height.value();\n                tableProperties.columns = tableView.columns.value();\n                tableProperties.rows = tableView.rows.value();\n                tableProperties.heightUnit = tableView.heightUnit.value();\n                tableProperties.cellSpacing = tableView.cellSpacing.value();\n                tableProperties.cellPadding = tableView.cellPadding.value();\n                tableProperties.alignment = tableView.alignment.value();\n                tableProperties.bgColor = tableView.bgColor.value();\n                tableProperties.className = tableView.className.value;\n                tableProperties.id = tableView.id.value;\n                tableProperties.borderWidth = tableView.borderWidth.value();\n                tableProperties.borderColor = tableView.borderColor.value();\n                tableProperties.borderStyle = tableView.borderStyle.value();\n                tableProperties.collapseBorders = tableView.collapseBorders.checked;\n            },\n            _collectCellViewValues: function (table) {\n                var cellData = table.cellProperties = {};\n                var cellView = this.components.cellView;\n                cellData.selectAllCells = cellView.selectAllCells.checked;\n                cellData.width = cellView.width.value();\n                cellData.widthUnit = cellView.widthUnit.value();\n                cellData.height = cellView.height.value();\n                cellData.heightUnit = cellView.heightUnit.value();\n                cellData.cellMargin = cellView.cellMargin.value();\n                cellData.cellPadding = cellView.cellPadding.value();\n                cellData.alignment = cellView.alignment.value();\n                cellData.bgColor = cellView.bgColor.value();\n                cellData.className = cellView.className.value;\n                cellData.id = cellView.id.value;\n                cellData.borderWidth = cellView.borderWidth.value();\n                cellData.borderColor = cellView.borderColor.value();\n                cellData.borderStyle = cellView.borderStyle.value();\n                cellData.wrapText = cellView.wrapText.checked;\n                if (!cellData.width) {\n                    cellData.selectAllCells = true;\n                    cellData.width = 100 / table.tableProperties.columns;\n                    cellData.widthUnit = '%';\n                }\n            },\n            _collectAccessibilityViewValues: function (table) {\n                var tableProperties = table.tableProperties;\n                var accessibilityView = this.components.accessibilityView;\n                tableProperties.captionContent = accessibilityView.captionContent.value;\n                tableProperties.captionAlignment = accessibilityView.captionAlignment.value();\n                tableProperties.summary = accessibilityView.summary.value;\n                tableProperties.cellsWithHeaders = accessibilityView.cellsWithHeaders.checked;\n            },\n            _addUnit: function (units, value) {\n                if (value && $.inArray(value, units) == -1) {\n                    units.push(value);\n                }\n            },\n            _initTableViewComponents: function (element, table) {\n                var components = this.components;\n                var tableView = components.tableView = {};\n                var tableProperties = table.tableProperties = table.tableProperties || {};\n                tableProperties.borderStyle = tableProperties.borderStyle || '';\n                this._addUnit(units, tableProperties.widthUnit);\n                this._addUnit(units, tableProperties.heightUnit);\n                this._initNumericTextbox(element.find('#k-editor-table-width'), 'width', tableProperties, tableView);\n                this._initNumericTextbox(element.find('#k-editor-table-height'), 'height', tableProperties, tableView);\n                this._initNumericTextbox(element.find('#k-editor-table-columns'), 'columns', tableProperties, tableView, {\n                    min: 1,\n                    value: 4\n                });\n                this._initNumericTextbox(element.find('#k-editor-table-rows'), 'rows', tableProperties, tableView, {\n                    min: 1,\n                    value: 4\n                });\n                this._initDropDownList(element.find('#k-editor-table-width-type'), 'widthUnit', tableProperties, tableView, units);\n                this._initDropDownList(element.find('#k-editor-table-height-type'), 'heightUnit', tableProperties, tableView, units);\n                this._initNumericTextbox(element.find('#k-editor-table-cell-spacing'), 'cellSpacing', tableProperties, tableView);\n                this._initNumericTextbox(element.find('#k-editor-table-cell-padding'), 'cellPadding', tableProperties, tableView);\n                this._initTableAlignmentDropDown(element.find('#k-editor-table-alignment'), tableProperties);\n                this._initColorPicker(element.find('#k-editor-table-bg'), 'bgColor', tableProperties, tableView);\n                this._initInput(element.find('#k-editor-css-class'), 'className', tableProperties, tableView);\n                this._initInput(element.find('#k-editor-id'), 'id', tableProperties, tableView);\n                this._initNumericTextbox(element.find('#k-editor-border-width'), 'borderWidth', tableProperties, tableView);\n                this._initColorPicker(element.find('#k-editor-border-color'), 'borderColor', tableProperties, tableView);\n                this._initDropDownList(element.find('#k-editor-border-style'), 'borderStyle', tableProperties, tableView, borderStyles);\n                this._initCheckbox(element.find('#k-editor-collapse-borders'), 'collapseBorders', tableProperties, tableView);\n            },\n            _initCellViewComponents: function (element, table) {\n                var components = this.components;\n                var cellView = components.cellView = {};\n                table.selectedCells = table.selectedCells = table.selectedCells || [];\n                var cellProperties = table.selectedCells[0] || {\n                    borderStyle: '',\n                    wrapText: true\n                };\n                this._addUnit(units, cellProperties.widthUnit);\n                this._addUnit(units, cellProperties.heightUnit);\n                this._initCheckbox(element.find('#k-editor-selectAllCells'), 'selectAllCells', table.tableProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-cell-width'), 'width', cellProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-cell-height'), 'height', cellProperties, cellView);\n                this._initDropDownList(element.find('#k-editor-cell-width-type'), 'widthUnit', cellProperties, cellView, units);\n                this._initDropDownList(element.find('#k-editor-cell-height-type'), 'heightUnit', cellProperties, cellView, units);\n                this._initNumericTextbox(element.find('#k-editor-table-cell-margin'), 'cellMargin', cellProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-table-cells-padding'), 'cellPadding', cellProperties, cellView);\n                this._initCellAlignmentDropDown(element.find('#k-editor-cell-alignment'), cellProperties);\n                this._initColorPicker(element.find('#k-editor-cell-bg'), 'bgColor', cellProperties, cellView);\n                this._initInput(element.find('#k-editor-cell-css-class'), 'className', cellProperties, cellView);\n                this._initInput(element.find('#k-editor-cell-id'), 'id', cellProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-cell-border-width'), 'borderWidth', cellProperties, cellView);\n                this._initColorPicker(element.find('#k-editor-cell-border-color'), 'borderColor', cellProperties, cellView);\n                this._initDropDownList(element.find('#k-editor-cell-border-style'), 'borderStyle', cellProperties, cellView, borderStyles);\n                this._initCheckbox(element.find('#k-editor-wrap-text'), 'wrapText', cellProperties, cellView);\n            },\n            _initAccessibilityViewComponents: function (element, table) {\n                var components = this.components;\n                var accessibilityView = components.accessibilityView = {};\n                var tableProperties = table.tableProperties;\n                this._initInput(element.find('#k-editor-table-caption'), 'captionContent', tableProperties, accessibilityView);\n                this._initAccessibilityAlignmentDropDown(element.find('#k-editor-accessibility-alignment'), tableProperties);\n                this._initInput(element.find('#k-editor-accessibility-summary'), 'summary', tableProperties, accessibilityView);\n                this._initCheckbox(element.find('#k-editor-cells-headers'), 'cellsWithHeaders', tableProperties, accessibilityView);\n            },\n            _initNumericTextbox: function (element, property, data, storage, settings) {\n                var component = storage[property] = element.kendoNumericTextBox(settings ? $.extend({}, numericTextBoxSettings, settings) : numericTextBoxSettings).data('kendoNumericTextBox');\n                if (property in data) {\n                    component.value(parseInt(data[property], 10));\n                }\n            },\n            _initDropDownList: function (element, property, data, storage, dataSource) {\n                var component = storage[property] = element.kendoDropDownList({ dataSource: dataSource }).data('kendoDropDownList');\n                this._setComponentValue(component, data, property);\n            },\n            _initTableAlignmentDropDown: function (element, data) {\n                var messages = this.options.messages;\n                var tableView = this.components.tableView;\n                var dataSource = tableAlignmentDropDownSettings.dataSource;\n                dataSource[0].tooltip = messages.alignLeft;\n                dataSource[1].tooltip = messages.alignCenter;\n                dataSource[2].tooltip = messages.alignRight;\n                dataSource[3].tooltip = messages.alignRemove;\n                this._initAlignmentDropDown(element, tableAlignmentDropDownSettings, 'alignment', data, tableView);\n            },\n            _initCellAlignmentDropDown: function (element, data) {\n                var messages = this.options.messages;\n                var cellView = this.components.cellView;\n                var dataSource = cellAlignmentDropDownSettings.dataSource;\n                dataSource[0].tooltip = messages.alignLeftTop;\n                dataSource[1].tooltip = messages.alignCenterTop;\n                dataSource[2].tooltip = messages.alignRightTop;\n                dataSource[3].tooltip = messages.alignLeftMiddle;\n                dataSource[4].tooltip = messages.alignCenterMiddle;\n                dataSource[5].tooltip = messages.alignRightMiddle;\n                dataSource[6].tooltip = messages.alignLeftBottom;\n                dataSource[7].tooltip = messages.alignCenterBottom;\n                dataSource[8].tooltip = messages.alignRightBottom;\n                dataSource[9].tooltip = messages.alignRemove;\n                this._initAlignmentDropDown(element, cellAlignmentDropDownSettings, 'alignment', data, cellView);\n            },\n            _initAccessibilityAlignmentDropDown: function (element, data) {\n                var messages = this.options.messages;\n                var accessibilityView = this.components.accessibilityView;\n                var dataSource = accessibilityAlignmentDropDownSettings.dataSource;\n                dataSource[0].tooltip = messages.alignLeftTop;\n                dataSource[1].tooltip = messages.alignCenterTop;\n                dataSource[2].tooltip = messages.alignRightTop;\n                dataSource[3].tooltip = messages.alignLeftBottom;\n                dataSource[4].tooltip = messages.alignCenterBottom;\n                dataSource[5].tooltip = messages.alignRightBottom;\n                dataSource[6].tooltip = messages.alignRemove;\n                this._initAlignmentDropDown(element, accessibilityAlignmentDropDownSettings, 'captionAlignment', data, accessibilityView);\n            },\n            _initAlignmentDropDown: function (element, settings, name, data, storage) {\n                var component = storage[name] = element.kendoDropDownList(settings).data('kendoDropDownList');\n                component.list.addClass('k-align').css('width', '110px');\n                this._setComponentValue(component, data, name);\n            },\n            _setComponentValue: function (component, data, property) {\n                if (property in data) {\n                    component.value(data[property]);\n                }\n            },\n            _initColorPicker: function (element, property, data, storage) {\n                var component = storage[property] = element.kendoColorPicker({\n                    buttons: false,\n                    clearButton: true\n                }).data('kendoColorPicker');\n                if (data[property]) {\n                    component.value(data[property]);\n                }\n            },\n            _initInput: function (element, property, data, storage) {\n                var component = storage[property] = element.get(0);\n                if (property in data) {\n                    component.value = data[property];\n                }\n            },\n            _initCheckbox: function (element, property, data, storage) {\n                var component = storage[property] = element.get(0);\n                if (property in data) {\n                    component.checked = data[property];\n                }\n            },\n            destroy: function () {\n                this._destroyComponents(this.components.tableView);\n                this._destroyComponents(this.components.cellView);\n                this._destroyComponents(this.components.accessibilityView);\n                this._destroyComponents(this.components);\n                delete this.components;\n            },\n            _destroyComponents: function (components) {\n                for (var widget in components) {\n                    if (components[widget].destroy) {\n                        components[widget].destroy();\n                    }\n                    delete components[widget];\n                }\n            },\n            _dialogTemplate: function (messages) {\n                return kendo.template(dialogTemplate)({ messages: messages });\n            }\n        });\n        kendo.ui.editor.TableWizardDialog = TableWizardDialog;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('kendo.editor', [\n        'kendo.combobox',\n        'kendo.dropdownlist',\n        'kendo.resizable',\n        'kendo.window',\n        'kendo.colorpicker',\n        'kendo.imagebrowser',\n        'kendo.numerictextbox',\n        'util/undoredostack',\n        'editor/main',\n        'editor/dom',\n        'editor/serializer',\n        'editor/range',\n        'editor/command',\n        'editor/components',\n        'editor/toolbar',\n        'editor/immutables',\n        'editor/plugins/viewhtml',\n        'editor/plugins/link',\n        'editor/plugins/lists',\n        'editor/plugins/formatting',\n        'editor/plugins/image',\n        'editor/plugins/import',\n        'editor/plugins/insert',\n        'editor/plugins/export',\n        'editor/plugins/indent',\n        'editor/plugins/linebreak',\n        'editor/plugins/format',\n        'editor/plugins/inlineformat',\n        'editor/plugins/formatblock',\n        'editor/plugins/file',\n        'editor/plugins/tables',\n        'editor/plugins/clipboard',\n        'editor/plugins/keyboard',\n        'editor/plugins/exportpdf',\n        'editor/plugins/print',\n        'editor/resizing/column-resizing',\n        'editor/resizing/row-resizing',\n        'editor/resizing/table-resizing',\n        'editor/resizing/table-resize-handle',\n        'editor/table-wizard/table-wizard-command',\n        'editor/table-wizard/table-wizard-dialog'\n    ], f);\n}(function () {\n    var __meta__ = {\n        id: 'editor',\n        name: 'Editor',\n        category: 'web',\n        description: 'Rich text editor component',\n        depends: [\n            'combobox',\n            'dropdownlist',\n            'window',\n            'colorpicker'\n        ],\n        features: [\n            {\n                id: 'editor-imagebrowser',\n                name: 'Image Browser',\n                description: 'Support for uploading and inserting images',\n                depends: ['imagebrowser']\n            },\n            {\n                id: 'editor-resizable',\n                name: 'Resize handle',\n                description: 'Support for resizing the content area via a resize handle',\n                depends: ['resizable']\n            },\n            {\n                id: 'editor-tablewizard',\n                name: 'Table wizard dialog',\n                description: 'Support for table properties configuration',\n                depends: [\n                    'tabstrip',\n                    'button',\n                    'numerictextbox'\n                ]\n            },\n            {\n                id: 'editor-pdf-export',\n                name: 'PDF export',\n                description: 'Export Editor content as PDF',\n                depends: [\n                    'pdf',\n                    'drawing'\n                ]\n            }\n        ]\n    };\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"]}